!function e(t,i,s){function n(o,c){if(!i[o]){if(!t[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return n(i?i:e)},u,u.exports,e,t,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(e,t,s){var n=(e("./VRScene.js"),e("./VRUINumberSlider.js")),r=e("./VRUIAccordionStacker.js"),o=(e("./VRSceneDict.js"),e("./VRUISceneList.js")),c=e("./VRStoryDict.js"),a=e("./VRImageLoader.js"),l={},u=function(e,t){var s=null,n=e.split("/");for(i=0;i<n.length;i++)if("photos"==n[i]&&i+2<n.length){s=n[i+2];break}if(null==s)return!1;if(s in l)return void t(l[s]);var r="";r+="https://api.flickr.com/services/rest/?",r+="&method=flickr.photos.getSizes",r+="&api_key=c074e17f92ea52a8d9422928352b0053",r+="&photo_id="+s,r+="&format=json",r+="&nojsoncallback=1";var o=new XMLHttpRequest;o.open("GET",r,!0),o.send(),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText),n=e.sizes.size,r=0,c=0;for(i=0;i<n.length;i++){var a=parseInt(n[i].width);2048>=a&&a>c&&(c=a,r=i)}l[s]=n[r].source,t(l[s])}}};VRCreateUI=function(){var e=this;this.firstRun=!0,this.storyManager=null,this.photoIdx=0,this.sceneIdx=0,this.sceneList=new o,this.sceneSelect=null,this.sceneName=null,this.elementSelect=null,this.imageURL=null,this.imagePreviewCanvas=null,this.hfovVRUINumberSlider=null,this.vfovVRUINumberSlider=null,this.xposVRUINumberSlider=null,this.yposVRUINumberSlider=null,this.isPlane=null,this.isStereo=null,this.U_l_x_slider=null,this.U_l_y_slider=null,this.V_l_x_slider=null,this.V_l_y_slider=null,this.U_r_x_slider=null,this.U_r_y_slider=null,this.V_r_x_slider=null,this.V_r_y_slider=null,this.textMessage=null,this.sceneJump=null,this.fontAlign=null,this.fontFace=null,this.fontSize=null,this.borderThickness=null,this.borderColor=null,this.backgroundColor=null,this.textColor=null,this.accordionStacker=null,this.oneImage=null,this.modeOneImage=null,this.modeNewStory=null,this.existingStory=null,this.modeExistingStory=null,this.oneImageMode="single",this.exportEquirectangularButton=null,this.getStory=function(){return e.storyManager.storyList!=[]?this.storyManager.storyList[0]:null},this.setPanelVisibility=function(){if(""==e.elementSelect.value)return e.showImageOptions(!1),e.showOptionsPosition(!1),e.showOptionsPosition3D(!1),e.showOptionsPlanar(!1),e.showOptionsText(!1),e.showOptionsJump(!1),void e.showOptionsTextCommon(!1);var t=e.elementSelect.value.split("_"),i=t[0];"photo"==i?(e.showImageOptions(!0),e.showOptionsPosition(!0),e.showOptionsPosition3D(!0),e.showOptionsPlanar(e.isPlane.checked),e.showStereoOptions(e.isStereo.checked),e.showOptionsText(!1),e.showOptionsJump(!1),e.showOptionsTextCommon(!1)):"text"==i?(e.showImageOptions(!1),e.showOptionsPosition(!0),e.showOptionsPosition3D(!1),e.showOptionsPlanar(e.isPlane.checked),e.showOptionsText(!0),e.showOptionsJump(!0),e.showOptionsTextCommon(!0)):"decal"==i&&(e.showImageOptions(!0),e.showOptionsPosition(!0),e.showOptionsPosition3D(!1),e.showOptionsPlanar(e.isPlane.checked),e.showStereoOptions(!1),e.showOptionsText(!1),e.showOptionsJump(!0),e.showOptionsTextCommon(!1))},this.showImageOptions=function(e){document.getElementById("options_image_load").hidden=!e},this.showOptionsPosition=function(e){document.getElementById("options_position").hidden=!e},this.showOptionsPosition3D=function(e){document.getElementById("options_position_3d").hidden=!e},this.showOptionsPlanar=function(e){document.getElementById("options_planar").hidden=!e},this.showOptionsText=function(e){document.getElementById("options_text").hidden=!e},this.showOptionsJump=function(e){document.getElementById("options_jump").hidden=!e},this.showOptionsTextCommon=function(e){document.getElementById("options_text_common").hidden=!e},this.showStereoOptions=function(e){var t=document.getElementById("options_stereo");e?t.hidden=!1:t.hidden=!0},this.inputStateChange=function(){if(""!=e.elementSelect.value){var t=e.elementSelect.value.split("_"),i=t[0],s=t[1],n=e.sceneList.scenes[e.sceneSelect.value];if("photo"==i){var r=n.dict.photoObjects[s],o=parseFloat(e.hfovVRUINumberSlider.get()),c=parseFloat(e.vfovVRUINumberSlider.get()),a=parseFloat(e.xposVRUINumberSlider.get()),l=parseFloat(e.yposVRUINumberSlider.get()),M=parseFloat(e.planarOffsetXSlider.get()),d=parseFloat(e.planarOffsetYSlider.get());r.textureDescription.sphereFOV[0]=o,r.textureDescription.sphereFOV[1]=c,r.textureDescription.sphereCentre[0]=a,r.textureDescription.sphereCentre[1]=l,r.textureDescription.src=e.imageURL.value,r.textureDescription.plane=e.isPlane.checked,r.textureDescription.isStereo=e.isStereo.checked,r.textureDescription.planeOffset=[M,d],r.textureDescription.U_l=[parseFloat(e.U_l_x_slider.get()),parseFloat(e.U_l_y_slider.get())],r.textureDescription.V_l=[parseFloat(e.V_l_x_slider.get()),parseFloat(e.V_l_y_slider.get())],r.textureDescription.U_r=[parseFloat(e.U_r_x_slider.get()),parseFloat(e.U_r_y_slider.get())],r.textureDescription.V_r=[parseFloat(e.V_r_x_slider.get()),parseFloat(e.V_r_y_slider.get())]}else if("text"==i){var h=n.dict.textObjects[s],o=parseFloat(e.hfovVRUINumberSlider.get()),c=parseFloat(e.vfovVRUINumberSlider.get()),a=parseFloat(e.xposVRUINumberSlider.get()),l=parseFloat(e.yposVRUINumberSlider.get()),M=parseFloat(e.planarOffsetXSlider.get()),d=parseFloat(e.planarOffsetYSlider.get());h.textureDescription.sphereFOV[0]=o,h.textureDescription.sphereFOV[1]=c,h.textureDescription.sphereCentre[0]=a,h.textureDescription.sphereCentre[1]=l,h.textureDescription.plane=e.isPlane.checked,h.textureDescription.planeOffset=[M,d],h.message=e.textMessage.value,h.jumpTo=e.sceneJump.value,h.textOptions.align=e.fontAlign.value,h.textOptions.fontface=e.fontFace.value,h.textOptions.fontsize=e.fontSize.value,h.textOptions.borderthickness=e.borderThickness.value,h.textOptions.bordercolor=e.borderColor.value,h.textOptions.backgroundcolor=e.backgroundColor.value,h.textOptions.textcolor=e.textColor.value}else if("decal"==i){var L=n.dict.decalObjects[s],o=parseFloat(e.hfovVRUINumberSlider.get()),c=parseFloat(e.vfovVRUINumberSlider.get()),a=parseFloat(e.xposVRUINumberSlider.get()),l=parseFloat(e.yposVRUINumberSlider.get()),M=parseFloat(e.planarOffsetXSlider.get()),d=parseFloat(e.planarOffsetYSlider.get());L.textureDescription.sphereFOV[0]=o,L.textureDescription.sphereFOV[1]=c,L.textureDescription.sphereCentre[0]=a,L.textureDescription.sphereCentre[1]=l,L.textureDescription.plane=e.isPlane.checked,L.textureDescription.planeOffset=[M,d],L.imgsrc=e.imageURL.value,L.jumpTo=e.sceneJump.value}if(e.setPanelVisibility(),"photo"==i){var m=e.imageURL.value;if(-1!=m.indexOf("flickr.com/photos"))return void u(m,e.deferredImageUpdate);e.updateImagePreview()}e.pushFromDictToRender()}},this.deferredImageUpdate=function(t){var i=e.elementSelect.value.split("_"),s=(i[0],i[1]),n=e.sceneList.scenes[e.sceneSelect.value],r=n.dict.photoObjects[s];r.textureDescription.src=t,e.imagePreview.src=t,e.updateImagePreview(),e.pushFromDictToRender()},this.updateImagePreview=function(){var t=1024,i=e.imagePreviewCanvas.getContext("2d");i.clearRect(0,0,t,t);var s,n,r,o,c=i.canvas.clientWidth,a=i.canvas.clientHeight,l=e.imagePreview.width,u=e.imagePreview.height,M=c/a,d=l/u;if(d>M?(r=t,o=r*M):M>1&&d>1?(o=t,r=o/M):M>d?(o=t,r=o/M):(r=t,o=r*M),s=.5*t-.5*r,n=.5*t-.5*o,e.isStereo.checked){i.globalAlpha=.5,i.drawImage(e.imagePreview,s,n,r,o),i.globalAlpha=1,i.strokeStyle="rgba(0,0,0,1.0)",i.fillStyle=i.strokeStyle,i.lineWidth=4,i.moveTo(s,n),i.lineTo(s+r,n),i.moveTo(s,n+.5*o),i.lineTo(s+r,n+.5*o),i.moveTo(s,n+o),i.lineTo(s+r,n+o),i.moveTo(s,n),i.lineTo(s,n+o),i.moveTo(s+.5*r,n),i.lineTo(s+.5*r,n+o),i.moveTo(s+r,n),i.lineTo(s+r,n+o),i.stroke(),i.font="32px Arial",i.fillText("(0,0)",s,n+32),i.fillText("(0,0.5)",s,n+.5*o-32),i.fillText("(0,1)",s,n+o-32),i.fillText("(0.5,0)",s+.5*r-96,n+32),i.fillText("(0.5,0.5)",s+.5*r-116,n+.5*o-32),i.fillText("(0.5,1)",s+.5*r-96,n+o-32),i.fillText("(1,0)",s+r-72,n+32),i.fillText("(1,0.5)",s+r-96,n+.5*o-32),i.fillText("(1,1)",s+r-72,n+o-32),i.lineWidth=1,i.font="Bold 64px Arial";var h=[parseFloat(e.U_l_x_slider.get()),parseFloat(e.U_l_y_slider.get())],L=[parseFloat(e.V_l_x_slider.get()),parseFloat(e.V_l_y_slider.get())];U=[s+h[0]*r,n+h[1]*o],V=[s+L[0]*r,n+L[1]*o],i.fillStyle="rgba(255,0,0,0.5)",i.strokeStyle="rgba(255,0,0,0.5)",i.fillRect(U[0],U[1],V[0]-U[0],V[1]-U[1]),i.stroke(),i.fillStyle="rgba(255,0,0,1.0)",i.strokeStyle="rgba(255,0,0,1.0)",i.fillText("Left",U[0],U[1]+64);var m=[parseFloat(e.U_r_x_slider.get()),parseFloat(e.U_r_y_slider.get())],p=[parseFloat(e.V_r_x_slider.get()),parseFloat(e.V_r_y_slider.get())];U=[s+m[0]*r,n+m[1]*o],V=[s+p[0]*r,n+p[1]*o],i.fillStyle="rgba(0,0,255,0.5)",i.strokeStyle="rgba(0,0,255,0.5)",i.fillRect(U[0],U[1],V[0]-U[0],V[1]-U[1]),i.stroke(),i.fillStyle="rgba(0,0,255,1.0)",i.strokeStyle="rgba(0,0,255,1.0)",i.fillText("Right",U[0],U[1]+64)}else i.drawImage(e.imagePreview,s,n,r,o)},this.loadImage=function(){e.imagePreview.onload=e.updateImagePreview,e.inputStateChange();var t=e.imageURL.value;e.imagePreview.src=t},this.updateSceneListDropdown=function(){for(e.sceneSelect.innerHTML="",i=0;i<e.sceneList.scenes.length;i++){var t=e.sceneList.scenes[i],s=document.createElement("option");s.value=i,""!=t.dict.name?s.innerHTML=t.dict.name:s.innerHTML=i,e.sceneSelect.appendChild(s)}},this.populateGUIFromSceneDict=function(t){e.sceneSelect.value=t,e.elementSelect.innerHTML="";var s=e.sceneList.scenes[t];for(this.sceneName.value=s.dict.name,i=0;i<s.dict.photoObjects.length;i++){var n=document.createElement("option");n.value="photo_"+i,n.innerHTML="Image "+(i+1),e.elementSelect.appendChild(n)}for(i=0;i<s.dict.textObjects.length;i++){var n=document.createElement("option");n.value="text_"+i,n.innerHTML="Text "+(i+1),e.elementSelect.appendChild(n)}for(i=0;i<s.dict.decalObjects.length;i++){var n=document.createElement("option");n.value="decal_"+i,n.innerHTML="Decal "+(i+1),e.elementSelect.appendChild(n)}e.pushFromDictToRender()},this.pushFromGUIToDict=function(){e.sceneList.scenes[e.sceneSelect.value].dict.name=e.sceneName.value,e.updateSceneListDropdown(),e.pushFromDictToRender()},this.addImage=function(){var t=e.sceneList.scenes[e.sceneSelect.value];t.addPhoto(),e.populateGUIFromSceneDict(e.sceneSelect.value),e.elementSelect.value="photo_"+(t.dict.photoObjects.length-1),e.selectElement(),e.accordionStacker.showNamed("setup_scene_object")},this.addText=function(){var t=e.sceneList.scenes[e.sceneSelect.value];t.addText(),e.populateGUIFromSceneDict(e.sceneSelect.value),e.elementSelect.value="text_"+(t.dict.textObjects.length-1),e.selectElement(),e.accordionStacker.showNamed("setup_scene_object")},this.addDecal=function(){var t=e.sceneList.scenes[e.sceneSelect.value];t.addDecal(),e.populateGUIFromSceneDict(e.sceneSelect.value),e.elementSelect.value="decal_"+(t.dict.decalObjects.length-1),e.selectElement(),e.accordionStacker.showNamed("setup_scene_object")},this.removeElement=function(){if(""!=e.elementSelect.value){var t=e.elementSelect.value.split("_"),i=t[0],s=t[1],n=e.sceneList.scenes[e.sceneSelect.value];"photo"==i?n.removePhoto(s):"text"==i?n.removeText(s):"decal"==i&&n.removeDecal(s),e.populateGUIFromSceneDict(e.sceneSelect.value)}},this.pushFromDictToRender=function(){if(null!=e.getStory()){for(e.getStory().sceneList=[],i=0;i<e.sceneList.scenes.length;i++)e.getStory().sceneList.push(e.sceneList.scenes[i].vrScene);var t=e.sceneList.scenes[e.sceneSelect.value];e.getStory().sceneList[e.sceneSelect.value].initDict(t.dict),e.getStory().setupScene(e.sceneSelect.value),e.updateShare()}},this.selectElement=function(){if(e.setPanelVisibility(),""!=e.elementSelect.value){var t=e.elementSelect.value.split("_"),i=t[0],s=t[1],n=e.sceneList.scenes[e.sceneSelect.value];if("photo"==i){var r=n.dict.photoObjects[s];e.hfovVRUINumberSlider.set(r.textureDescription.sphereFOV[0]),e.vfovVRUINumberSlider.set(r.textureDescription.sphereFOV[1]),e.xposVRUINumberSlider.set(r.textureDescription.sphereCentre[0]),e.yposVRUINumberSlider.set(r.textureDescription.sphereCentre[1]),e.imageURL.value=r.textureDescription.src,e.isPlane.checked=r.textureDescription.plane,e.isStereo.checked=r.textureDescription.isStereo,e.U_l_x_slider.set(r.textureDescription.U_l[0]),e.U_l_y_slider.set(r.textureDescription.U_l[1]),e.V_l_x_slider.set(r.textureDescription.V_l[0]),e.V_l_y_slider.set(r.textureDescription.V_l[1]),e.U_r_x_slider.set(r.textureDescription.U_r[0]),e.U_r_y_slider.set(r.textureDescription.U_r[1]),e.V_r_x_slider.set(r.textureDescription.V_r[0]),e.V_r_y_slider.set(r.textureDescription.V_r[1]),e.planarOffsetXSlider.set(r.textureDescription.planeOffset[0]),e.planarOffsetYSlider.set(r.textureDescription.planeOffset[1]),e.loadImage()}else if("text"==i){var o=n.dict.textObjects[s];e.hfovVRUINumberSlider.set(o.textureDescription.sphereFOV[0]),e.vfovVRUINumberSlider.set(o.textureDescription.sphereFOV[1]),e.xposVRUINumberSlider.set(o.textureDescription.sphereCentre[0]),e.yposVRUINumberSlider.set(o.textureDescription.sphereCentre[1]),e.planarOffsetXSlider.set(o.textureDescription.planeOffset[0]),e.planarOffsetYSlider.set(o.textureDescription.planeOffset[1]),e.isPlane.checked=o.textureDescription.plane,e.textMessage.value=o.message,e.sceneJump.value=o.jumpTo,e.fontAlign.value=o.textOptions.align,e.fontFace.value=o.textOptions.fontface,e.fontSize.value=o.textOptions.fontsize,e.borderThickness.value=o.textOptions.borderthickness,e.borderColor.value=o.textOptions.bordercolor,e.backgroundColor.value=o.textOptions.backgroundcolor,e.textColor.value=o.textOptions.textcolor}else if("decal"==i){var c=n.dict.decalObjects[s];e.hfovVRUINumberSlider.set(c.textureDescription.sphereFOV[0]),e.vfovVRUINumberSlider.set(c.textureDescription.sphereFOV[1]),e.xposVRUINumberSlider.set(c.textureDescription.sphereCentre[0]),e.yposVRUINumberSlider.set(c.textureDescription.sphereCentre[1]),e.isPlane.checked=c.textureDescription.plane,e.planarOffsetXSlider.set(c.textureDescription.planeOffset[0]),e.planarOffsetYSlider.set(c.textureDescription.planeOffset[1]),e.imageURL.value=c.imgsrc,e.sceneJump.value=c.jumpTo}}},this.sceneSelectChange=function(){e.populateGUIFromSceneDict(e.sceneSelect.value),e.selectElement()},this.addScene=function(){e.sceneList.addScene(),e.updateSceneListDropdown(),e.populateGUIFromSceneDict(e.sceneSelect.length-1)},this.removeScene=function(){e.sceneList.removeScene(),e.updateSceneListDropdown()},this.stackerEditGallery=function(){e.accordionStacker.totalHide("mode_pick",!0),e.accordionStacker.totalHide("manage_scenes",!0),e.accordionStacker.totalHide("manage_scene_objects",!0),e.accordionStacker.totalHide("setup_scene_object",!0),e.accordionStacker.totalHide("preview_dummy",!0),e.accordionStacker.totalHide("export",!1),e.accordionStacker.showNamed("export"),document.getElementById("preview_box").hidden=!0},this.stackerEditQuick=function(){e.accordionStacker.totalHide("mode_pick",!0),e.accordionStacker.totalHide("manage_scenes",!0),e.accordionStacker.totalHide("manage_scene_objects",!0),e.accordionStacker.totalHide("setup_scene_object",!1),e.accordionStacker.totalHide("preview_dummy",!1),e.accordionStacker.totalHide("export",!1),e.accordionStacker.showNamed("setup_scene_object"),document.getElementById("preview_box").hidden=!1},this.stackerEditFull=function(){e.accordionStacker.totalHide("mode_pick",!0),e.accordionStacker.totalHide("manage_scenes",!1),e.accordionStacker.totalHide("manage_scene_objects",!1),e.accordionStacker.totalHide("setup_scene_object",!1),e.accordionStacker.totalHide("preview_dummy",!1),e.accordionStacker.totalHide("export",!1),e.accordionStacker.showNamed("manage_scenes"),document.getElementById("preview_box").hidden=!1},this.stackerInit=function(){e.accordionStacker.totalHide("manage_scenes",!0),e.accordionStacker.totalHide("manage_scene_objects",!0),e.accordionStacker.totalHide("setup_scene_object",!0),e.accordionStacker.totalHide("preview_dummy",!0),e.accordionStacker.totalHide("export",!0),document.getElementById("preview_box").hidden=!0},this.tryModeOneImage=function(){if(""!=e.oneImage.value){e.oneImageMode="single";var t=e.oneImage.value;-1!=t.indexOf("flickr.com/photos")?u(t,e.loadModeOneImage):e.loadModeOneImage(t)}},this.tryMode360Image=function(){if(""!=e.oneImage.value){e.oneImageMode="360";var t=e.oneImage.value;-1!=t.indexOf("flickr.com/photos")?u(t,e.loadModeOneImage):e.loadModeOneImage(t)}},this.tryModeStereoImage=function(){if(""!=e.oneImage.value){e.oneImageMode="stereo";var t=e.oneImage.value;-1!=t.indexOf("flickr.com/photos")?u(t,e.loadModeOneImage):e.loadModeOneImage(t)}},this.tryModeGallery=function(){if(""!=e.oneImage.value){var t=e.oneImage.value;a.getImagesCallback(t,e.loadGallery),e.getStory().setGallerySrc(t)}},this.loadGallery=function(t){e.sceneSelect.value=0,e.sceneList.scenes=t,e.populateGUIFromSceneDict(e.sceneSelect.value),e.selectElement(),e.stackerEditGallery()},this.loadModeOneImage=function(t){var i=e.sceneList.scenes[e.sceneSelect.value];i.addPhoto(),i.dict.photoObjects[0].textureDescription.src=t,"360"==e.oneImageMode?i.dict.photoObjects[0].textureDescription.sphereFOV=[360,180]:"stereo"==e.oneImageMode&&(i.dict.photoObjects[0].textureDescription.isStereo=!0),e.populateGUIFromSceneDict(e.sceneSelect.value),e.elementSelect.value="photo_"+(i.dict.photoObjects.length-1),e.selectElement(),e.stackerEditQuick()},this.tryModeNewStory=function(){e.stackerEditFull()},this.tryModeExistingStory=function(){if(""!=e.existingStory.value){var t=e.existingStory.value,i=new c,s=i.init(t);null!=s&&(e.sceneList.scenes=s,e.sceneList.sceneIdx=0,e.updateSceneListDropdown(),e.populateGUIFromSceneDict(0),e.stackerEditFull())}},this.updateShare=function(){var t=e.getStory().getShareCodes(),i=t[0],s=t[1];if(e.getStory().isSinglePhotoStory()){document.getElementById("singleShare").hidden=!1;var n="https://twitter.com/intent/tweet?text="+encodeURIComponent("Check out my #vrEmbed ")+i,r="https://www.facebook.com/sharer/sharer.php?u="+i,o="https://plus.google.com/share?url="+i,c="http://www.reddit.com/submit?url="+i;document.getElementById("shareURL").href=decodeURIComponent(i),document.getElementById("shareTwitter").href=n,document.getElementById("shareFacebook").href=r,document.getElementById("shareGplus").href=o,document.getElementById("shareReddit").href=c}else document.getElementById("singleShare").hidden=!0;document.getElementById("shareEmbedCode").value=s},this.downloadURI=function(e,t){var i=document.createElement("a");i.download=t,i.href=e,i.click()},this.exportEquirectangular=function(){var t=e.getStory().createImageFromSphereTexture();e.downloadURI(t,"exportEquirectangularTex.png")},this.initObjectPanel=function(){this.imageURL=document.getElementById("imageURL"),this.imagePreviewCanvas=document.getElementById("imagePreviewCanvas");var t=e.imagePreviewCanvas.getContext("2d");t.canvas.width=1024,t.canvas.height=1024,this.imagePreview=new Image,this.imagePreview.crossOrigin="Anonymous",this.imageURL.onchange=this.loadImage,this.imageURL.value="",this.isPlane=document.getElementById("isPlane"),this.isStereo=document.getElementById("isStereo"),this.isPlane.onchange=this.inputStateChange,this.isStereo.onchange=this.inputStateChange,this.U_l_x_slider=new n,this.U_l_x_slider.init(document.getElementById("U_l_x"),document.getElementById("U_l_x_t"),0,this.inputStateChange),this.U_l_y_slider=new n,this.U_l_y_slider.init(document.getElementById("U_l_y"),document.getElementById("U_l_y_t"),0,this.inputStateChange),this.V_l_x_slider=new n,this.V_l_x_slider.init(document.getElementById("V_l_x"),document.getElementById("V_l_x_t"),0,this.inputStateChange),this.V_l_y_slider=new n,this.V_l_y_slider.init(document.getElementById("V_l_y"),document.getElementById("V_l_y_t"),0,this.inputStateChange),this.U_r_x_slider=new n,this.U_r_x_slider.init(document.getElementById("U_r_x"),document.getElementById("U_r_x_t"),0,this.inputStateChange),this.U_r_y_slider=new n,this.U_r_y_slider.init(document.getElementById("U_r_y"),document.getElementById("U_r_y_t"),0,this.inputStateChange),this.V_r_x_slider=new n,this.V_r_x_slider.init(document.getElementById("V_r_x"),document.getElementById("V_r_x_t"),0,this.inputStateChange),this.V_r_y_slider=new n,this.V_r_y_slider.init(document.getElementById("V_r_y"),document.getElementById("V_r_y_t"),0,this.inputStateChange);var i=document.getElementById("loadImage");i.onclick=this.loadImage,this.hfovVRUINumberSlider=new n,this.hfovVRUINumberSlider.init(document.getElementById("hfov"),document.getElementById("hfov_t"),360,this.inputStateChange),this.vfovVRUINumberSlider=new n,this.vfovVRUINumberSlider.init(document.getElementById("vfov"),document.getElementById("vfov_t"),180,this.inputStateChange),this.xposVRUINumberSlider=new n,this.xposVRUINumberSlider.init(document.getElementById("xpos"),document.getElementById("xpos_t"),0,this.inputStateChange),this.yposVRUINumberSlider=new n,this.yposVRUINumberSlider.init(document.getElementById("ypos"),document.getElementById("ypos_t"),0,this.inputStateChange),this.planarOffsetXSlider=new n,this.planarOffsetXSlider.init(document.getElementById("planeOffsetX"),document.getElementById("planeOffsetX_t"),0,this.inputStateChange),this.planarOffsetYSlider=new n,this.planarOffsetYSlider.init(document.getElementById("planeOffsetY"),document.getElementById("planeOffsetY_t"),0,this.inputStateChange),this.textMessage=document.getElementById("textMessage"),this.textMessage.onchange=this.inputStateChange,this.sceneJump=document.getElementById("sceneJump"),this.sceneJump.onchange=this.inputStateChange,this.fontAlign=document.getElementById("fontAlign"),this.fontAlign.onchange=this.inputStateChange,this.fontFace=document.getElementById("fontFace"),this.fontFace.onchange=this.inputStateChange,this.fontSize=document.getElementById("fontSize"),this.fontSize.onchange=this.inputStateChange,this.borderThickness=document.getElementById("borderThickness"),this.borderThickness.onchange=this.inputStateChange,this.borderColor=document.getElementById("borderColor"),this.borderColor.onchange=this.inputStateChange,this.backgroundColor=document.getElementById("backgroundColor"),this.backgroundColor.onchange=this.inputStateChange,this.textColor=document.getElementById("textColor"),this.textColor.onchange=this.inputStateChange},this.init=function(e){this.storyManager=e,this.sceneSelect=document.getElementById("sceneSelect"),this.sceneName=document.getElementById("sceneName"),this.elementSelect=document.getElementById("elementSelect");var t=document.getElementById("addScene");t.onclick=this.addScene;var i=document.getElementById("removeScene");i.onclick=this.removeScene,this.sceneSelect.onchange=this.sceneSelectChange,this.sceneName.onchange=this.pushFromGUIToDict,this.elementSelect.onchange=this.selectElement;var s=document.getElementById("addImage"),n=document.getElementById("addText"),o=document.getElementById("addDecal"),c=document.getElementById("removeElement");s.onclick=this.addImage,n.onclick=this.addText,o.onclick=this.addDecal,c.onclick=this.removeElement,this.oneImage=document.getElementById("oneImage"),this.modeOneImage=document.getElementById("modeOneImage"),this.mode360Image=document.getElementById("mode360Image"),this.modeStereoImage=document.getElementById("modeStereoImage"),this.modeGallery=document.getElementById("modeGallery"),this.modeNewStory=document.getElementById("modeNewStory"),this.existingStory=document.getElementById("existingStory"),this.modeExistingStory=document.getElementById("modeExistingStory"),modeOneImage.onclick=this.tryModeOneImage,mode360Image.onclick=this.tryMode360Image,modeStereoImage.onclick=this.tryModeStereoImage,modeGallery.onclick=this.tryModeGallery,modeNewStory.onclick=this.tryModeNewStory,modeExistingStory.onclick=this.tryModeExistingStory,this.oneImage.value="http://vrembed.org/src/assets/vrEmbedLogo.png",this.exportEquirectangularButton=document.getElementById("exportEquirectangularButton"),this.exportEquirectangularButton.onclick=this.exportEquirectangular,this.initObjectPanel(),this.sceneList.init(),this.updateSceneListDropdown(),this.sceneSelect.value=0,this.sceneSelectChange(),this.setPanelVisibility(),this.accordionStacker=new r,this.accordionStacker.add("mode_pick"),this.accordionStacker.add("manage_scenes"),this.accordionStacker.add("manage_scene_objects"),this.accordionStacker.add("setup_scene_object"),this.accordionStacker.add("preview_dummy"),this.accordionStacker.add("export"),this.accordionStacker.showNamed("mode_pick"),this.stackerInit()}},t.exports=VRCreateUI},{"./VRImageLoader.js":4,"./VRScene.js":7,"./VRSceneDict.js":8,"./VRStoryDict.js":10,"./VRUIAccordionStacker.js":15,"./VRUINumberSlider.js":16,"./VRUISceneList.js":17}],2:[function(e,t,i){var s=e("./VRTextureDescription.js");VRDecal=function(){this.textureDescription=null,this.imgsrc=null,this.init=function(e){this.decal=e,this.textureDescription=new s,this.textureDescription.setSphereParamsFromString(this.decal.getAttribute("sphereParams")),this.textureDescription.plane=this.textureDescription.parseBoolString(this.decal.getAttribute("plane")),this.textureDescription.setPlaneOffsetParamsFromString(this.decal.getAttribute("planeOffset")),this.imgsrc=this.decal.getAttribute("src"),this.jumpTo=this.decal.getAttribute("jumpTo"),void 0==this.jumpTo&&(this.jumpTo="")},this.initDict=function(e){this.textureDescription=new s,this.textureDescription.initDict(e.textureDescription),this.jumpTo=e.jumpTo,this.imgsrc=e.imgsrc},this.getDecalElement=function(){var e=document.createElement("decal");return this.textureDescription.setElement(e),e.setAttribute("src",this.imgsrc),""!=this.jumpTo&&e.setAttribute("jumpTo",this.jumpTo),e}},t.exports=VRDecal},{"./VRTextureDescription.js":13}],3:[function(e,t,i){var s=function(e,t){return"data:"+e+";base64,"+t};VRLogos={logoCardboard:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImNhcmRib2FyZF94NUZfcm91bmRlZCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayINCgkgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTQsNkMzLjQ1LDYsMyw2LjQ1LDMsN3YxMGMwLDAuNTUsMC40NSwxLDEsMWg0YzAuNTUsMCwxLjMxOC0wLjMxOCwxLjcwNy0wLjcwN2wxLjU4Ni0xLjU4Ng0KCQljMC4zODktMC4zODksMS4wMTYtMC4zOCwxLjM5NCwwLjAybDEuNDYxLDEuNTQ3QzE0LjUyNSwxNy42NzMsMTUuMjg0LDE4LDE1LjgzNCwxOEgyMGMwLjU1LDAsMS0wLjQ1LDEtMVY3YzAtMC41NS0wLjQ1LTEtMS0xSDR6DQoJCSBNNy41LDE1Yy0xLjY1NiwwLTMtMS4zNDQtMy0zczEuMzQ0LTMsMy0zczMsMS4zNDQsMywzUzkuMTU2LDE1LDcuNSwxNXogTTE2LjUsMTVjLTEuNjU2LDAtMy0xLjM0NC0zLTNzMS4zNDQtMywzLTNzMywxLjM0NCwzLDMNCgkJUzE4LjE1NiwxNSwxNi41LDE1eiIvPg0KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTQsNkMzLjQ1LDYsMyw2LjQ1LDMsN3YxMGMwLDAuNTUsMC40NSwxLDEsMWg0DQoJCWMwLjU1LDAsMS4zMTgtMC4zMTgsMS43MDctMC43MDdsMS41ODYtMS41ODZjMC4zODktMC4zODksMS4wMTYtMC4zOCwxLjM5NCwwLjAybDEuNDYxLDEuNTQ3QzE0LjUyNSwxNy42NzMsMTUuMjg0LDE4LDE1LjgzNCwxOEgyMA0KCQljMC41NSwwLDEtMC40NSwxLTFWN2MwLTAuNTUtMC40NS0xLTEtMUg0eiBNNy41LDE1Yy0xLjY1NiwwLTMtMS4zNDQtMy0zczEuMzQ0LTMsMy0zczMsMS4zNDQsMywzUzkuMTU2LDE1LDcuNSwxNXogTTE2LjUsMTUNCgkJYy0xLjY1NiwwLTMtMS4zNDQtMy0zczEuMzQ0LTMsMy0zczMsMS4zNDQsMywzUzE4LjE1NiwxNSwxNi41LDE1eiIvPg0KPC9nPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNOSwxMmMwLDAuODI5LTAuNjcxLDEuNS0xLjUsMS41Ii8+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xOCwxMmMwLDAuODI5LTAuNjcxLDEuNS0xLjUsMS41Ii8+DQo8L3N2Zz4NCg=="),logoFullscreen:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImZ1bGxzY3JlZW5fMV8iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzLDMgMyw5IDAsOSAwLDAgOSwwIDksMyAiLz4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzLDIxIDksMjEgOSwyNCAwLDI0IDAsMTUgMywxNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyMSwyMSAyMSwxNSAyNCwxNSAyNCwyNCAxNSwyNCAxNSwyMSANCgkiLz4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyMSwzIDE1LDMgMTUsMCAyNCwwIDI0LDkgMjEsOSAiLz4NCjwvc3ZnPg0K"),logoWindowed:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IndpbmRvd2VkXzFfIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiDQoJIHk9IjBweCIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iNiw2IDYsMCA5LDAgOSw5IDAsOSAwLDYgIi8+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iNiwxOCAwLDE4IDAsMTUgOSwxNSA5LDI0IDYsMjQgIi8+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iMTgsMTggMTgsMjQgMTUsMjQgMTUsMTUgMjQsMTUgMjQsMTggDQoJIi8+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iMTgsNiAyNCw2IDI0LDkgMTUsOSAxNSwwIDE4LDAgIi8+DQo8L3N2Zz4NCg=="),logoAnaglyph:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImFuYWdseXBoX3g1Rl9yb3VuZGVkIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIg0KCSB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cmVjdCB4PSI0LjUiIHk9IjEwLjUiIGZpbGw9IiMzNkE5RTEiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjYiIGhlaWdodD0iMyIvPg0KPHJlY3QgeD0iMTMuNSIgeT0iMTAuNSIgZmlsbD0iI0JFMTYyMiIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iNiIgaGVpZ2h0PSIzIi8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMy41LDcuNUMzLjIyNSw3LjUsMyw3LjcyNSwzLDh2OGMwLDAuMjc1LDAuMjI1LDAuNSwwLjUsMC41SDEwYzAuMjc1LDAsMC42NTktMC4xNTksMC44NTQtMC4zNTQNCgkJbDAuNzkzLTAuNzkzYzAuMTk0LTAuMTk0LDAuNTEzLTAuMTk0LDAuNzA3LDBsMC43OTMsMC43OTNDMTMuMzQxLDE2LjM0MSwxMy43MjUsMTYuNSwxNCwxNi41aDYuNWMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41VjgNCgkJYzAtMC4yNzUtMC4yMjUtMC41LTAuNS0wLjVIMy41eiBNMTAuNSwxM2MwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41SDVjLTAuMjc1LDAtMC41LTAuMjI1LTAuNS0wLjV2LTJjMC0wLjI3NSwwLjIyNS0wLjUsMC41LTAuNWg1DQoJCWMwLjI3NSwwLDAuNSwwLjIyNSwwLjUsMC41VjEzeiBNMTkuNSwxM2MwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41aC01Yy0wLjI3NSwwLTAuNS0wLjIyNS0wLjUtMC41di0yYzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVoNQ0KCQljMC4yNzUsMCwwLjUsMC4yMjUsMC41LDAuNVYxM3oiLz4NCgk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zLjUsNy41QzMuMjI1LDcuNSwzLDcuNzI1LDMsOHY4DQoJCWMwLDAuMjc1LDAuMjI1LDAuNSwwLjUsMC41SDEwYzAuMjc1LDAsMC42NTktMC4xNTksMC44NTQtMC4zNTRsMC43OTMtMC43OTNjMC4xOTQtMC4xOTQsMC41MTMtMC4xOTQsMC43MDcsMGwwLjc5MywwLjc5Mw0KCQlDMTMuMzQxLDE2LjM0MSwxMy43MjUsMTYuNSwxNCwxNi41aDYuNWMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41VjhjMC0wLjI3NS0wLjIyNS0wLjUtMC41LTAuNUgzLjV6IE0xMC41LDEzDQoJCWMwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41SDVjLTAuMjc1LDAtMC41LTAuMjI1LTAuNS0wLjV2LTJjMC0wLjI3NSwwLjIyNS0wLjUsMC41LTAuNWg1YzAuMjc1LDAsMC41LDAuMjI1LDAuNSwwLjVWMTN6IE0xOS41LDEzDQoJCWMwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41aC01Yy0wLjI3NSwwLTAuNS0wLjIyNS0wLjUtMC41di0yYzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVoNWMwLjI3NSwwLDAuNSwwLjIyNSwwLjUsMC41VjEzeiIvPg0KPC9nPg0KPC9zdmc+DQo="),
logoSettings:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9InNldHRpbmdzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTksMTMuNWMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41di0yYzAtMC4yNzUtMC4yMjUtMC41LTAuNS0wLjVoLTAuNjk2Yy0wLjI3NSwwLTAuNTcxLTAuMjEzLTAuNjU5LTAuNDc0DQoJCWwtMC4yNTctMC42MjJjLTAuMTIzLTAuMjQ2LTAuMDY0LTAuNjA2LDAuMTMtMC44MDFsMC40OTMtMC40OTNjMC4xOTQtMC4xOTQsMC4xOTQtMC41MTMsMC0wLjcwN0wxNi41OTcsNS45OQ0KCQljLTAuMTk0LTAuMTk0LTAuNTEzLTAuMTk0LTAuNzA3LDBsLTAuNDkzLDAuNDkzYy0wLjE5NCwwLjE5NC0wLjU1NSwwLjI1My0wLjgwMSwwLjEzbC0wLjYyMi0wLjI1Ng0KCQlDMTMuNzEzLDYuMjY5LDEzLjUsNS45NzIsMTMuNSw1LjY5N1Y1YzAtMC4yNzUtMC4yMjUtMC41LTAuNS0wLjVoLTJjLTAuMjc1LDAtMC41LDAuMjI1LTAuNSwwLjV2MC42OTcNCgkJYzAsMC4yNzUtMC4yMTMsMC41NzEtMC40NzQsMC42NTlMOS40MDQsNi42MTJjLTAuMjQ2LDAuMTIzLTAuNjA2LDAuMDY0LTAuODAxLTAuMTNMOC4xMTEsNS45ODljLTAuMTk0LTAuMTk0LTAuNTEzLTAuMTk0LTAuNzA3LDANCgkJTDUuOTksNy40MDNjLTAuMTk0LDAuMTk0LTAuMTk0LDAuNTEzLDAsMC43MDdsMC40OTMsMC40OTNjMC4xOTQsMC4xOTQsMC4yNTMsMC41NTUsMC4xMywwLjgwMWwtMC4yNTcsMC42MjMNCgkJQzYuMjY4LDEwLjI4Nyw1Ljk3MiwxMC41LDUuNjk3LDEwLjVINWMtMC4yNzUsMC0wLjUsMC4yMjUtMC41LDAuNXYyYzAsMC4yNzUsMC4yMjUsMC41LDAuNSwwLjVoMC42OTcNCgkJYzAuMjc1LDAsMC41NzEsMC4yMTMsMC42NTksMC40NzRsMC4yNTYsMC42MjJjMC4xMjMsMC4yNDYsMC4wNjQsMC42MDYtMC4xMywwLjgwMWwtMC40OTMsMC40OTJjLTAuMTk0LDAuMTk0LTAuMTk0LDAuNTEzLDAsMC43MDcNCgkJbDEuNDE0LDEuNDE0YzAuMTk0LDAuMTk0LDAuNTEzLDAuMTk0LDAuNzA3LDBsMC40OTItMC40OTJjMC4xOTQtMC4xOTQsMC41NTUtMC4yNTMsMC44MDEtMC4xM2wwLjYyMywwLjI1Nw0KCQljMC4yNjEsMC4wODgsMC40NzQsMC4zODQsMC40NzQsMC42NTlWMTljMCwwLjI3NSwwLjIyNSwwLjUsMC41LDAuNWgyYzAuMjc1LDAsMC41LTAuMjI1LDAuNS0wLjV2LTAuNjk2DQoJCWMwLTAuMjc1LDAuMjEzLTAuNTcxLDAuNDc0LTAuNjU5bDAuNjIyLTAuMjU2YzAuMjQ2LTAuMTIzLDAuNjA2LTAuMDY0LDAuODAxLDAuMTNsMC40OTIsMC40OTJjMC4xOTQsMC4xOTQsMC41MTMsMC4xOTQsMC43MDcsMA0KCQlsMS40MTQtMS40MTRjMC4xOTQtMC4xOTQsMC4xOTQtMC41MTMsMC0wLjcwN2wtMC40OTItMC40OTJjLTAuMTk0LTAuMTk0LTAuMjUzLTAuNTU1LTAuMTMtMC44MDFsMC4yNTctMC42MjMNCgkJYzAuMDg4LTAuMjYxLDAuMzg0LTAuNDc0LDAuNjU5LTAuNDc0SDE5eiBNMTIsMTMuNWMtMC44MjksMC0xLjUtMC42NzEtMS41LTEuNWMwLTAuODI4LDAuNjcxLTEuNSwxLjUtMS41czEuNSwwLjY3MSwxLjUsMS41DQoJCUMxMy41LDEyLjgyOSwxMi44MjksMTMuNSwxMiwxMy41eiIvPg0KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE5LDEzLjVjMC4yNzUsMCwwLjUtMC4yMjUsMC41LTAuNXYtMg0KCQljMC0wLjI3NS0wLjIyNS0wLjUtMC41LTAuNWgtMC42OTZjLTAuMjc1LDAtMC41NzEtMC4yMTMtMC42NTktMC40NzRsLTAuMjU3LTAuNjIyYy0wLjEyMy0wLjI0Ni0wLjA2NC0wLjYwNiwwLjEzLTAuODAxDQoJCWwwLjQ5My0wLjQ5M2MwLjE5NC0wLjE5NCwwLjE5NC0wLjUxMywwLTAuNzA3TDE2LjU5Nyw1Ljk5Yy0wLjE5NC0wLjE5NC0wLjUxMy0wLjE5NC0wLjcwNywwbC0wLjQ5MywwLjQ5Mw0KCQljLTAuMTk0LDAuMTk0LTAuNTU1LDAuMjUzLTAuODAxLDAuMTNsLTAuNjIyLTAuMjU2QzEzLjcxMyw2LjI2OSwxMy41LDUuOTcyLDEzLjUsNS42OTdWNWMwLTAuMjc1LTAuMjI1LTAuNS0wLjUtMC41aC0yDQoJCWMtMC4yNzUsMC0wLjUsMC4yMjUtMC41LDAuNXYwLjY5N2MwLDAuMjc1LTAuMjEzLDAuNTcxLTAuNDc0LDAuNjU5TDkuNDA0LDYuNjEyYy0wLjI0NiwwLjEyMy0wLjYwNiwwLjA2NC0wLjgwMS0wLjEzTDguMTExLDUuOTg5DQoJCWMtMC4xOTQtMC4xOTQtMC41MTMtMC4xOTQtMC43MDcsMEw1Ljk5LDcuNDAzYy0wLjE5NCwwLjE5NC0wLjE5NCwwLjUxMywwLDAuNzA3bDAuNDkzLDAuNDkzYzAuMTk0LDAuMTk0LDAuMjUzLDAuNTU1LDAuMTMsMC44MDENCgkJbC0wLjI1NywwLjYyM0M2LjI2OCwxMC4yODcsNS45NzIsMTAuNSw1LjY5NywxMC41SDVjLTAuMjc1LDAtMC41LDAuMjI1LTAuNSwwLjV2MmMwLDAuMjc1LDAuMjI1LDAuNSwwLjUsMC41aDAuNjk3DQoJCWMwLjI3NSwwLDAuNTcxLDAuMjEzLDAuNjU5LDAuNDc0bDAuMjU2LDAuNjIyYzAuMTIzLDAuMjQ2LDAuMDY0LDAuNjA2LTAuMTMsMC44MDFsLTAuNDkzLDAuNDkyYy0wLjE5NCwwLjE5NC0wLjE5NCwwLjUxMywwLDAuNzA3DQoJCWwxLjQxNCwxLjQxNGMwLjE5NCwwLjE5NCwwLjUxMywwLjE5NCwwLjcwNywwbDAuNDkyLTAuNDkyYzAuMTk0LTAuMTk0LDAuNTU1LTAuMjUzLDAuODAxLTAuMTNsMC42MjMsMC4yNTcNCgkJYzAuMjYxLDAuMDg4LDAuNDc0LDAuMzg0LDAuNDc0LDAuNjU5VjE5YzAsMC4yNzUsMC4yMjUsMC41LDAuNSwwLjVoMmMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41di0wLjY5Ng0KCQljMC0wLjI3NSwwLjIxMy0wLjU3MSwwLjQ3NC0wLjY1OWwwLjYyMi0wLjI1NmMwLjI0Ni0wLjEyMywwLjYwNi0wLjA2NCwwLjgwMSwwLjEzbDAuNDkyLDAuNDkyYzAuMTk0LDAuMTk0LDAuNTEzLDAuMTk0LDAuNzA3LDANCgkJbDEuNDE0LTEuNDE0YzAuMTk0LTAuMTk0LDAuMTk0LTAuNTEzLDAtMC43MDdsLTAuNDkyLTAuNDkyYy0wLjE5NC0wLjE5NC0wLjI1My0wLjU1NS0wLjEzLTAuODAxbDAuMjU3LTAuNjIzDQoJCWMwLjA4OC0wLjI2MSwwLjM4NC0wLjQ3NCwwLjY1OS0wLjQ3NEgxOXogTTEyLDEzLjVjLTAuODI5LDAtMS41LTAuNjcxLTEuNS0xLjVjMC0wLjgyOCwwLjY3MS0xLjUsMS41LTEuNXMxLjUsMC42NzEsMS41LDEuNQ0KCQlDMTMuNSwxMi44MjksMTIuODI5LDEzLjUsMTIsMTMuNXoiLz4NCjwvZz4NCjwvc3ZnPg0K"),logoVrEmbed:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMSBUaW55Ly9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLXRpbnkuZHRkIj48c3ZnIHZlcnNpb249IjEuMSIgYmFzZVByb2ZpbGU9InRpbnkiIGlkPSJsb2dvMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgb3ZlcmZsb3c9ImluaGVyaXQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxjaXJjbGUgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSIxMi4wNDIiIGN5PSIxMi4wNDIiIHI9IjExLjI1Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjY2NjY2IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0yMSwxMi4wODNjMC01LjAwOS00LjAyNS05LjA2Mi05LTkuMDYyIi8+PGc+PHBhdGggZmlsbD0iIzFEMUQxQiIgZD0iTTUuMzU3LDguODA3aDAuODk2TDUuMSwxMkg0LjIyTDMuMDc1LDguODA3aDAuOTM4YzAuMjIyLDAuNzg1LDAuNDQzLDEuNTcsMC42NjUsMi4zNTVDNC45MDQsMTAuMzc3LDUuMTMsOS41OTIsNS4zNTcsOC44MDdMNS4zNTcsOC44MDd6Ii8+PHBhdGggZmlsbD0iIzFEMUQxQiIgZD0iTTguMjEyLDguNzMyYzAuMTU3LDAuMDE0LDAuMDcyLDAuNjk0LDAuMDcyLDAuODZDNi45MzEsOS40NDEsNy4yNzEsMTEuMTA1LDcuMjcxLDEySDYuNDNWOC44MDdoMC43OTd2MC41NTdDNy40NSw4Ljk5NCw3Ljc0Myw4LjY4OSw4LjIxMiw4LjczMkM4LjIyMyw4LjczMyw4LjIwMiw4LjczMSw4LjIxMiw4LjczMnoiLz48cGF0aCBmaWxsPSIjRkY5OTAwIiBkPSJNNi42NSwxMy4xNzZINC4zNjV2MC45MTZoMi4wOTh2MC43NUg0LjM2NXYxLjExMWgyLjM5MXYwLjc3NUgzLjQ4M3YtNC4zMThjMC43MjIsMCwxLjQ0MywwLDIuMTY1LDBjMC4zMTMsMCwwLjYyNiwwLDAuOTM5LDBDNi43MjksMTIuNDExLDYuNjUsMTMuMDM1LDYuNjUsMTMuMTc2TDYuNjUsMTMuMTc2eiIvPjxwYXRoIGZpbGw9IiNGRjk5MDAiIGQ9Ik0xMS4wODgsMTMuNTQ3YzAuOTM2LDAuMzc0LDAuNTgsMi4zODksMC41NzcsMy4xODJIMTAuODF2LTIuMDMzYzAtMC40NC0wLjQ5LTAuNzE5LTAuODM0LTAuMzk0Yy0wLjE5OSwwLjE4Ny0wLjE3OSwwLjQ3Ni0wLjE3OSwwLjcyNGMwLDAuNTY4LDAsMS4xMzYsMCwxLjcwM0g4Ljk1NXYtMS45YzAtMC45OTMtMS4wMi0wLjY4OC0xLjAyLDAuMTc5YzAsMC41NzMsMCwxLjE0NywwLDEuNzIySDcuMDg5di0zLjE4OEg3Ljl2MC40NjdjMC4zOTctMC42MzcsMS40NjQtMC44MTMsMS43OSwwLjAwMkM5Ljk3MywxMy41MjYsMTAuNTcyLDEzLjM0MSwxMS4wODgsMTMuNTQ3QzExLjIyNSwxMy42MDIsMTAuOTUxLDEzLjQ5MiwxMS4wODgsMTMuNTQ3eiIvPjxwYXRoIGZpbGw9IiNGRjk5MDAiIGQ9Ik0xNC44NzcsMTMuOTJjMS4wOTQsMS4zODQtMC43LDQuMTIyLTEuOTMzLDIuNDA4YzAsMC4xMy0wLjAxOSwwLjI3MiwwLDAuNGgtMC44MjN2LTQuMzEyaDAuODM1djEuNTM1QzEzLjQxMiwxMy4zMTUsMTQuMzkxLDEzLjMwMiwxNC44NzcsMTMuOTJDMTUuMTE2LDE0LjIyMywxNC42MzksMTMuNjE3LDE0Ljg3NywxMy45MnogTTE0LjE3OSwxNS44NjVjMC41MS0wLjczNy0wLjI5My0yLjQwOC0xLjA1NC0xLjQzOEMxMi41MjEsMTUuMTk2LDEzLjQ5MywxNi44NTYsMTQuMTc5LDE1Ljg2NUMxNC4yOTksMTUuNjkxLDE0LjA1OSwxNi4wMzksMTQuMTc5LDE1Ljg2NXoiLz48cGF0aCBmaWxsPSIjRkY5OTAwIiBkPSJNMTcuNjA4LDEzLjZjMC43MDgsMC4zMTYsMC44NDQsMS4wNzUsMC44MzQsMS43NjhjLTAuNzc1LDAtMS41NTEsMC0yLjMyNiwwYzAuMDI0LDAuNjA2LDAuNzIyLDEuMDg2LDEuMjU4LDAuNjQ2YzAuMzM5LTAuMjc3LDAuNTUtMC4yMTksMS4wMjQtMC4yMTljLTAuMTcsMS40My0yLjU1NywxLjMtMy4wMDEsMC4xMzNDMTQuODQ3LDE0LjQ4MiwxNi4wNjcsMTIuOTEsMTcuNjA4LDEzLjZDMTcuODMxLDEzLjY5OSwxNy4zODYsMTMuNSwxNy42MDgsMTMuNnogTTE2LjM1OSwxNC4zMjJjLTAuMTI3LDAuMTQxLTAuMjAxLDAuMzA1LTAuMjIzLDAuNDk0YzAuNDc5LDAsMC45NTksMCwxLjQzOCwwQzE3LjUzNSwxNC4yNDcsMTYuNzk4LDEzLjg2NSwxNi4zNTksMTQuMzIyQzE2LjI0MSwxNC40NDMsMTYuNDc4LDE0LjE5OSwxNi4zNTksMTQuMzIyeiIvPjxwYXRoIGZpbGw9IiNGRjk5MDAiIGQ9Ik0yMC4yNywxMy41ODdjMC4xNTIsMC4wODYsMC4yNzQsMC4yMDQsMC4zNjYsMC4zNTNjMC0wLjUwOCwwLTEuMDE1LDAtMS41MjNoMC44NDd2NC4zMTJoLTAuODEydi0wLjQ0MWMtMC43MjcsMS4xNTYtMi4xNTYsMC4zMDEtMi4yODQtMC43OTlDMTguMjcxLDE0LjQ5NSwxOS4wMTQsMTIuODc3LDIwLjI3LDEzLjU4N0MyMC40MiwxMy42NzIsMjAuMTE5LDEzLjUwMiwyMC4yNywxMy41ODd6IE0yMC40NzUsMTUuODYxYzAuNTU4LTAuNzk3LTAuNDM0LTIuNDEyLTEuMDcxLTEuMzk2QzE4LjkzOSwxNS4yMjQsMTkuNzUzLDE2Ljg5MywyMC40NzUsMTUuODYxQzIwLjU5OCwxNS42ODYsMjAuMzUyLDE2LjAzNywyMC40NzUsMTUuODYxeiIvPjwvZz48L3N2Zz4="),logoShare:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0ic2hhcmVzaGVldCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE4Ljc1LDE1Yy0wLjk5NCwwLTEuODkzLDAuMzk1LTIuNTYzLDEuMDI2bC03LjMxOC0zLjA5MUM4Ljk0NiwxMi42MzUsOSwxMi4zMjUsOSwxMnMtMC4wNTQtMC42MzUtMC4xMzItMC45MzZsNy4zMTgtMy4wOTFDMTYuODU2LDguNjA1LDE3Ljc1NSw5LDE4Ljc1LDljMi4wNywwLDMuNzUtMS42OCwzLjc1LTMuNzVjMC0yLjA3MS0xLjY4LTMuNzUtMy43NS0zLjc1UzE1LDMuMTc5LDE1LDUuMjVjMCwwLjI1NywwLjAyNiwwLjUwNywwLjA3NSwwLjc0OWwtNy40MywzLjEzOEM2Ljk5NCw4LjU5Miw2LjE2Niw4LjI1LDUuMjUsOC4yNUMzLjE3OSw4LjI1LDEuNSw5LjkyOSwxLjUsMTJjMCwyLjA3LDEuNjc5LDMuNzUsMy43NSwzLjc1YzAuOTE3LDAsMS43NDUtMC4zNDIsMi4zOTYtMC44ODhMMTUuMDc1LDE4QzE1LjAyNiwxOC4yNDMsMTUsMTguNDkzLDE1LDE4Ljc1YzAsMi4wNywxLjY4LDMuNzUsMy43NSwzLjc1czMuNzUtMS42OCwzLjc1LTMuNzVTMjAuODIsMTUsMTguNzUsMTV6Ii8+PC9nPjwvZz48L3N2Zz4=")},t.exports=VRLogos},{}],4:[function(e,t,s){var n=e("./VRSceneDict.js"),r=e("./VRURLParser.js"),o=e("./VRLoaderIcons.js"),c=e("./VRIcons.js"),a=e("./VRMacroStrings.js");String.prototype.padRight=function(e,t){return this+Array(e-this.length+1).join(t||" ")},String.prototype.contains=function(e){return-1!=this.indexOf(e)};var M=function(e,t){var i=t-e.length,s=(" "+e).slice(1);return i>0&&(s=s.padRight(i," ")),s},d={},h={},L={},m=function(e){var t=null,s=e.split("/");for(i=0;l=s.length,i<l;i++)if(s[i].endsWith("imgur.com")&&i<l-1)return t=s[i+1],""==t?null:"a"==t?i<l-2?(t=s[i+2],[t,"album"]):null:"gallery"==t?i<l-2?(t=s[i+2],[t,"gallery"]):null:(partspl=t.split("."),""==partspl[0]?null:[partspl[0],"image"])},p=function(e,t,i,s){var n="";n+=t,n+=e,n+="?client_id=fe596e6329962dd";var r=new XMLHttpRequest;r.open("GET",n,!0),r.setRequestHeader("Authorization","Client-ID fe596e6329962dd"),r.setRequestHeader("Accept","application/json"),r.send(),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var t=JSON.parse(r.responseText);i(e,t,s)}}},j=function(e){var t=e.split("/"),i=t.pop(),s=i.split(".");return t.join("/")+"/"+s[0]+"b."+s[1]},g=function(e){if(null==e)return null;for(var t in a)if(e.contains(t))return t;return null},I=function(e){var t={};return 1==e.animated?null:e.height>4096||e.width>4096?null:(t.src=e.link,t.thumb=j(t.src),t.title=e.title,t.description=e.description,t.width=e.width,t.height=e.height,t.attribution="",t.misc=e.views+" views",t.macro=g(e.description),t)},D=function(e,t,i){d[e]=t;var s=(t.data.link,I(t.data)),n={};if(n.images=[s],n.galleryTitle=null,n.galleryDescription=null,n.galleryAttribution=null,n.galleryMisc=null,null!=i&&null!=n){var r=A(n);i(r)}},w=function(e,t){return e in d?void(null!=t&&D(d[e])):void p(e,"https://api.imgur.com/3/image/",D,t)},N=function(e,t,s){h[e]=t;var n=t.data.images,r=t.data.title,o=t.data.description,c=t.data.account_id,a=t.data.views+" views",u={};for(u.galleryTitle=r,u.galleryDescription=o,u.galleryAttribution=c,u.galleryMisc=a,u.images=[],i=0;l=n.length,i<l;i++){var M=n[i],d=I(M);null!=d&&u.images.push(d)}if(null!=s&&u!=[]){var L=A(u);s(L)}},x=function(e,t){return e in h?void(null!=t&&N(h[e])):void p(e,"https://api.imgur.com/3/album/",N,t)},S=function(e,t,s){L[e]=t;var n=t.data.images,r=t.data.title,o=t.data.description,c=t.data.account_id,a=t.data.views+" views",u={};for(u.galleryTitle=r,u.galleryDescription=o,u.galleryAttribution=c,u.galleryMisc=a,u.images=[],i=0;l=n.length,i<l;i++){var M=n[i],d=I(M);null!=d&&u.images.push(d)}if(null!=s&&u!=[]){var h=A(u);s(h)}},y=function(e,t){return e in L?void(null!=t&&S(L[e])):void p(e,"https://api.imgur.com/3/gallery/album/",S,t)},T=70,C=function(e,t,i){return null==i?[e,t]:("vrEmbed:macro=360"==i?(e.textureDescription.sphereFOV=[360,180],e.textureDescription.plane=!1):"vrEmbed:macro=3dparallel"==i?(t.width=.5*t.width,e.textureDescription.sphereFOV=[T,T*t.height/t.width],e.textureDescription.isStereo=!0,e.textureDescription.U_l=[0,0],e.textureDescription.V_l=[.5,1],e.textureDescription.U_r=[.5,0],e.textureDescription.V_r=[1,1]):"vrEmbed:macro=3dcrosseye"==i?(t.width=.5*t.width,e.textureDescription.sphereFOV=[T,T*t.height/t.width],e.textureDescription.isStereo=!0,e.textureDescription.U_l=[.5,0],e.textureDescription.V_l=[1,1],e.textureDescription.U_r=[0,0],e.textureDescription.V_r=[.5,1]):"vrEmbed:macro=3d360"==i&&(e.textureDescription.sphereFOV=[360,180],e.textureDescription.plane=!1,e.textureDescription.isStereo=!0,e.textureDescription.U_l=[0,0],e.textureDescription.V_l=[1,.5],e.textureDescription.U_r=[0,.5],e.textureDescription.V_r=[1,1]),[e,t])},A=function(e){var t=[],i=16;for(A=0;l=e.images.length,A<l;A++){var s=Math.floor(A/i),r=new n;r.init(),r.dict.name="image_"+A;var a=e.images[A],d=r.initPhoto();d.textureDescription.src=a.src,d.textureDescription.sphereFOV=[T,T*a.height/a.width],d.textureDescription.plane=!0;var h=C(d,a,a.macro),L=h[0],m=h[1];r.dict.photoObjects.push(L);var p="",j=45;null!=m.title&&(p+="Title: "+m.title+" \n"),null!=m.description&&(p+="Description: "+m.description+" \n");var g="";""!=m.misc&&(g+=m.misc),""!=m.attribution&&(g+=" "+m.attribution),p+=M(g,j)+" \n";var I=.2;if(""!=p){var D=r.initText();D.message=p,D.textOptions.borderthickness=0,D.textOptions.align="left",D.textOptions.fontface="Courier",D.textOptions.fontsize=36,D.textureDescription.sphereFOV=[T/1.5,20],D.textureDescription.sphereCentre=[T,0],D.textureDescription.plane=!0,D.textureDescription.planeOffset=[0,0],r.dict.textObjects.push(D)}var w=r.initDecal();w.imgsrc=c.logoVrEmbed,w.textureDescription.sphereFOV=[2*T*I,2*T*I],w.textureDescription.sphereCentre=[0,-90],w.textureDescription.plane=!1,w.textureDescription.planeOffset=[0,0],r.dict.decalObjects.push(w);var N=-(.5+I)*(T*m.height/m.width);if(A>0){var x=r.initDecal(),S=e.images[A-1];x.jumpTo="image_"+(A-1),x.imgsrc=S.thumb,x.textureDescription.sphereFOV=[T*I,I*T*S.height/S.width],x.textureDescription.sphereCentre=[0,0],x.textureDescription.plane=!0,x.textureDescription.planeOffset=[-(.5-.5*I)*T,N],r.dict.decalObjects.push(x)}if(A<e.images.length-1){var x=r.initDecal(),S=e.images[A+1];x.jumpTo="image_"+(A+1),x.imgsrc=S.thumb,x.textureDescription.sphereFOV=[T*I,I*T*S.height/S.width],x.textureDescription.sphereCentre=[0,0],x.textureDescription.plane=!0,x.textureDescription.planeOffset=[(.5-.5*I)*T,N],r.dict.decalObjects.push(x)}var y=r.initDecal();y.jumpTo="index_"+s,y.imgsrc=o.gallery,y.textureDescription.sphereFOV=[T*I,T*I],y.textureDescription.sphereCentre=[0,0],y.textureDescription.plane=!0,y.textureDescription.planeOffset=[0,N],r.dict.decalObjects.push(y),t.push(r)}var A,z,b,O=e.images.length,f=i,E=Math.ceil(O/i),U=0,R=0;for(A=0,z=O;z>A;A+=f){b=e.images.slice(A,A+f);var k=0,r=new n;r.init(),r.dict.name="index_"+U;var V=30;for(v=0;v<4;v++){var Z=-30;for(u=0;u<4&&!(R>=O);u++){var x=r.initDecal(),S=b[k];x.jumpTo="image_"+R,x.imgsrc=S.thumb,x.textureDescription.sphereFOV=[18,18],x.textureDescription.sphereCentre=[0,0],x.textureDescription.plane=!0,x.textureDescription.planeOffset=[Z,V],r.dict.decalObjects.push(x),k+=1,R+=1,Z+=20}V+=-20}if(U>0){var _=r.initDecal();_.jumpTo="index_"+(U-1),_.imgsrc=o.prevArrow,_.textureDescription.sphereFOV=[15,15],_.textureDescription.sphereCentre=[0,0],_.textureDescription.plane=!0,_.textureDescription.planeOffset=[-20,-60],r.dict.decalObjects.push(_)}if(E-1>U){var Y=r.initDecal();Y.jumpTo="index_"+(U+1),Y.imgsrc=o.nextArrow,Y.textureDescription.sphereFOV=[15,15],Y.textureDescription.sphereCentre=[0,0],Y.textureDescription.plane=!0,Y.textureDescription.planeOffset=[20,-60],r.dict.decalObjects.push(Y)}var w=r.initDecal();w.imgsrc=c.logoVrEmbed,w.textureDescription.sphereFOV=[2*T*I,2*T*I],w.textureDescription.sphereCentre=[0,-90],w.textureDescription.plane=!1,w.textureDescription.planeOffset=[0,0],r.dict.decalObjects.push(w),t.push(r),U+=1}return t};VRImageLoader=function(){var e=this;this.sceneList=[],this.storyManager=null,this.vrURLParser=new r,this.vrURLParser.init(),this.init=function(e){this.storyManager=e},this.hasURLParams=function(){return this.vrURLParser.isEditor},this.getURLParameters=function(){return this.vrURLParser.params},this.isGalleryURL=function(){return"gallery"in this.getURLParameters()},this.isImageURL=function(){return"src"in this.getURLParameters()},this.getImages=function(t){e.getImagesCallback(t,this.buildFromImageList)},this.getImagesCallback=function(t,i){null!=e.getStory()&&e.getStory().setGallerySrc(t);var s=m(t);null!=s&&("image"==s[1]?w(s[0],i):"album"==s[1]?x(s[0],i):"gallery"==s[1]&&y(s[0],i))},this.parseBoolString=function(e){return void 0==e?!1:"true"==e.toLowerCase()?!0:!1},this.parsePlaneOffsetParamsFromString=function(e){if(void 0!=e){var t=e.split(",");return[parseFloat(t[0].trim()),parseFloat(t[1].trim())]}},this.getSphereParamsFromString=function(e){var t=e.split(",");return[[parseFloat(t[0].trim()),parseFloat(t[1].trim())],[parseFloat(t[2].trim()),parseFloat(t[3].trim())]]},this.getTexParamsFromString=function(e){var t=e.split(",");return[[parseFloat(t[0].trim()),parseFloat(t[1].trim())],[parseFloat(t[2].trim()),parseFloat(t[3].trim())],[parseFloat(t[4].trim()),parseFloat(t[5].trim())],[parseFloat(t[6].trim()),parseFloat(t[7].trim())]]},this.buildFromImageURLParams=function(e){var t=new Image;t.onload=this.buildSingle,t.src=e.src},this.buildSingle=function(){var t=e.getURLParameters(),i=new n;i.init();var s=i.initPhoto();if(s.name="unit",s.textureDescription.src=t.src,void 0!=t.metaSrc?s.textureDescription.metaSource=t.metaSrc:s.textureDescription.metaSource="",s.textureDescription.isStereo=e.parseBoolString(t.isStereo),s.textureDescription.plane=e.parseBoolString(t.plane),s.textureDescription.planeOffset=e.parsePlaneOffsetParamsFromString(t.planeOffset),void 0!=t.sphereParams){var r=e.getSphereParamsFromString(t.sphereParams);s.textureDescription.sphereFOV=r[0],s.textureDescription.sphereCentre=r[1]}if(void 0!=t.texParams){var o=e.getTexParamsFromString(t.texParams);s.textureDescription.U_l=o[0],s.textureDescription.V_l=o[1],s.textureDescription.U_r=o[2],s.textureDescription.V_r=o[3]}i.dict.photoObjects.push(s);var c=[];c.push(i),console.log(c),e.pushFromDictToRender(c)},this.buildFromImageList=function(t){e.pushFromDictToRender(t)},this.getStory=function(){return null==e.storyManager?null:e.storyManager.storyList!=[]?e.storyManager.storyList[0]:null},this.pushFromDictToRender=function(t){if(null!=e.getStory()){for(e.getStory().sceneList=[],e.getStory().namedSceneMap={},i=0;i<t.length;i++){var s=t[i];s.vrScene.initDict(t[i].dict),e.getStory().sceneList.push(s.vrScene),e.getStory().namedSceneMap[s.vrScene.name]=i}e.getStory().setupScene(0)}}};var z=function(){function e(){var e=new VRImageLoader;return e}var t;return{getInstance:function(){return t||(t=e()),t}}}();t.exports=z.getInstance()},{"./VRIcons.js":3,"./VRLoaderIcons.js":5,"./VRMacroStrings.js":6,"./VRSceneDict.js":8,"./VRURLParser.js":18}],5:[function(e,t,i){var s=function(e,t){return"data:"+e+";base64,"+t};VRLoaderLogos={gallery:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik04LjE3NSw3LjU4MlY2LjI2M2MwLTAuMzUzLTAuMjg1LTAuNjM4LTAuNjM4LTAuNjM4SDYuMjYzYy0wLjM1MywwLTAuNjM4LDAuMjg1LTAuNjM4LDAuNjM4djEuMjc1VjcuNTI5YzAsMC4zNTcsMC4yODUsMC42NDYsMC42MzgsMC42NDZINi4yMThoMS4zMTljMC4zNTMsMCwwLjYzOC0wLjI4NSwwLjYzOC0wLjYzOCIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMy4yNzUsNy41ODJWNi4yNjNjMC0wLjM1My0wLjI4Ni0wLjYzOC0wLjYzOC0wLjYzOGgtMS4yNzVjLTAuMzUzLDAtMC42MzgsMC4yODUtMC42MzgsMC42Mzh2MS4yNzVWNy41MjljMCwwLjM1NywwLjI4NSwwLjY0NiwwLjYzOCwwLjY0NmgtMC4wNDRoMS4zMTljMC4zNTIsMCwwLjYzOC0wLjI4NSwwLjYzOC0wLjYzOCIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik04LjE3NSwxMi42ODJ2LTEuMzE5YzAtMC4zNTMtMC4yODUtMC42MzgtMC42MzgtMC42MzhINi4yNjNjLTAuMzUzLDAtMC42MzgsMC4yODUtMC42MzgsMC42Mzh2MS4yNzV2LTAuMDA5YzAsMC4zNTcsMC4yODUsMC42NDYsMC42MzgsMC42NDZINi4yMThoMS4zMTljMC4zNTMsMCwwLjYzOC0wLjI4NiwwLjYzOC0wLjYzOCIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMy4yNzUsMTIuNjgydi0xLjMxOWMwLTAuMzUzLTAuMjg2LTAuNjM4LTAuNjM4LTAuNjM4aC0xLjI3NWMtMC4zNTIsMC0wLjYzOCwwLjI4NS0wLjYzOCwwLjYzOHYxLjI3NXYtMC4wMDljMCwwLjM1NywwLjI4NiwwLjY0NiwwLjYzOCwwLjY0NmgtMC4wNDVoMS4zMmMwLjM1MiwwLDAuNjM4LTAuMjg2LDAuNjM4LTAuNjM4Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE4LjM3NSwxMi42ODN2LTEuMzJjMC0wLjM1Mi0wLjI4NS0wLjYzOC0wLjYzNy0wLjYzOGgtMS4yNzVjLTAuMzUyLDAtMC42MzgsMC4yODYtMC42MzgsMC42Mzh2MS4yNzV2LTAuMDA4YzAsMC4zNTcsMC4yODYsMC42NDYsMC42MzgsMC42NDZoLTAuMDQ1aDEuMzJjMC4zNTIsMCwwLjYzNy0wLjI4NiwwLjYzNy0wLjYzOCIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xOC4zNzUsNy41ODJWNi4yNjNjMC0wLjM1My0wLjI4NS0wLjYzOC0wLjYzNy0wLjYzOGgtMS4yNzVjLTAuMzUyLDAtMC42MzgsMC4yODUtMC42MzgsMC42Mzh2MS4yNzVWNy41MjljMCwwLjM1NywwLjI4NiwwLjY0NiwwLjYzOCwwLjY0NmgtMC4wNDVoMS4zMmMwLjM1MiwwLDAuNjM3LTAuMjg1LDAuNjM3LTAuNjM4Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTguMTc1LDE3Ljc4MnYtMS4zMTljMC0wLjM1Mi0wLjI4NS0wLjYzOC0wLjYzOC0wLjYzOEg2LjI2M2MtMC4zNTMsMC0wLjYzOCwwLjI4Ni0wLjYzOCwwLjYzOHYxLjI3NXYtMC4wMDljMCwwLjM1NiwwLjI4NSwwLjY0NiwwLjYzOCwwLjY0Nkg2LjIxOGgxLjMxOWMwLjM1MywwLDAuNjM4LTAuMjg1LDAuNjM4LTAuNjM3Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEzLjI3NSwxNy43ODJ2LTEuMzE5YzAtMC4zNTItMC4yODYtMC42MzgtMC42MzgtMC42MzhoLTEuMjc1Yy0wLjM1MiwwLTAuNjM4LDAuMjg2LTAuNjM4LDAuNjM4djEuMjc1di0wLjAwOWMwLDAuMzU2LDAuMjg2LDAuNjQ2LDAuNjM4LDAuNjQ2aC0wLjA0NWgxLjMyYzAuMzUyLDAsMC42MzgtMC4yODUsMC42MzgtMC42MzciLz48cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTguMzc1LDE3Ljc4MnYtMS4zMTljMC0wLjM1Mi0wLjI4NS0wLjYzOC0wLjYzNy0wLjYzOGgtMS4yNzVjLTAuMzUyLDAtMC42MzgsMC4yODYtMC42MzgsMC42Mzh2MS4yNzV2LTAuMDA5YzAsMC4zNTYsMC4yODYsMC42NDYsMC42MzgsMC42NDZoLTAuMDQ1aDEuMzJjMC4zNTIsMCwwLjYzNy0wLjI4NSwwLjYzNy0wLjYzNyIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0yMi4yLDE3LjQ1NVY2LjljMC0yLjgxOS0yLjI4MS01LjEtNS4xMDEtNS4xSDYuOWMtMi44MTksMC01LjEsMi4yODEtNS4xLDUuMXYxMC4ydi0wLjA3YzAsMi44NTgsMi4yODEsNS4xNzEsNS4xLDUuMTcxSDYuNTQ2SDE3LjFjMi44MTksMCw1LjEwMS0yLjI4MSw1LjEwMS01LjEwMSIvPjwvc3ZnPg=="),nextArrow:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjAsNS45NjkgMTIsNiAxMiwwIDI0LDEyIDEyLjAzMSwyNCAxMiwxOCAwLDE4ICIvPjwvc3ZnPg=="),prevArrow:s("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjI0LDE4LjAzMSAxMiwxOCAxMiwyNCAwLDEyIDExLjk2OSwwIDEyLDYgMjQsNiAiLz48L3N2Zz4=")},t.exports=VRLoaderLogos},{}],6:[function(e,t,i){VRMacroStrings={"vrEmbed:macro=360":0,"vrEmbed:macro=3dparallel":1,"vrEmbed:macro=3dcrosseye":2,"vrEmbed:macro=3d360":3},t.exports=VRMacroStrings},{}],7:[function(e,t,s){var n=e("./VRScenePhoto.js"),r=e("./VRText.js"),o=e("./VRDecal.js");VRScene=function(){this.sceneElement=null,this.photoObjects=[],this.textObjects=[],this.decalObjects=[],this.oldScroll=null,this.isStereo=!1,this.name="",this.parseChildNode=function(e){if("PHOTO"==e.nodeName){var t=new n;t.init(e),1==t.isStereo()&&(this.isStereo=!0),this.photoObjects.push(t)}else if("TEXT"==e.nodeName){var i=new r;i.init(e),this.textObjects.push(i)}else if("DECAL"==e.nodeName){var s=new o;s.init(e),this.decalObjects.push(s)}for(var c=e.childNodes,a=0,l=c.length;l>a;++a){var u=c[a];1===u.nodeType&&this.parseChildNode(u)}},this.init=function(e){this.sceneElement=e;var t=e.getAttribute("name");null!=t&&(this.name=t);for(var i=e.childNodes,s=0,n=i.length;n>s;++s){var r=i[s];1===r.nodeType&&this.parseChildNode(r)}},this.initDict=function(e){this.photoObjects=[],this.textObjects=[],this.decalObjects=[];for(var t=0,i=e.photoObjects.length;i>t;++t){var s=new n;s.initDict(e.photoObjects[t]),this.photoObjects.push(s)}for(var t=0,i=e.textObjects.length;i>t;++t){var c=new r;c.initDict(e.textObjects[t]),this.textObjects.push(c)}for(var t=0,i=e.decalObjects.length;i>t;++t){var a=new o;a.initDict(e.decalObjects[t]),this.decalObjects.push(a)}this.name=e.name},this.initVrEmbedPhoto=function(e){var t=new n;t.init(e),1==t.isStereo()&&(this.isStereo=!0),this.photoObjects.push(t)},this.getSceneElement=function(){var e=document.createElement("scene");for(""!=this.name&&e.setAttribute("name",this.name),i=0;i<this.photoObjects.length;i++)e.appendChild(this.photoObjects[i].getPhotoElement());for(j=0;j<this.textObjects.length;j++)e.appendChild(this.textObjects[j].getTextElement());for(k=0;k<this.decalObjects.length;k++)e.appendChild(this.decalObjects[k].getDecalElement());return e},this.hasJumpNav=function(){for(j=0;j<this.textObjects.length;j++)if(""!=this.textObjects[j].jumpTo)return!0;for(j=0;j<this.decalObjects.length;j++)if(""!=this.decalObjects[j].jumpTo)return!0;return!1}},t.exports=VRScene},{"./VRDecal.js":2,"./VRScenePhoto.js":9,"./VRText.js":11}],8:[function(e,t,s){VRSceneDict=function(){this.dict=null,this.vrScene=null,this.init=function(){this.vrScene=new VRScene,this.dict={},this.dict.photoObjects=[],this.dict.textObjects=[],this.dict.decalObjects=[],this.dict.name=""},this.initFromVrScene=function(e){for(this.vrScene=e,this.dict={},this.dict.name=e.name,this.dict.photoObjects=[],this.dict.textObjects=[],this.dict.decalObjects=[],i=0;i<e.photoObjects.length;i++)this.dict.photoObjects.push(this.initFromScenePhoto(e.photoObjects[i]));for(i=0;i<e.textObjects.length;i++)this.dict.textObjects.push(this.initFromText(e.textObjects[i]));for(i=0;i<e.decalObjects.length;i++)this.dict.decalObjects.push(this.initFromDecal(e.decalObjects[i]))},this.initFromTextureDescription=function(e){var t={};return t.src=e.textureSource,t.metaSource=e.metaSource,t.isStereo=e.isStereo,t.sphereFOV=e.sphereFOV,t.sphereCentre=e.sphereCentre,t.planeOffset=e.planeOffset,t.U_l=e.U_l,t.V_l=e.V_l,t.U_r=e.U_r,t.V_r=e.V_r,t.plane=e.plane,t},this.initFromTextOptions=function(e){var t={};return t.align=e.align,t.fontface=e.fontface,t.fontsize=e.fontsize,t.borderThickness=e.borderthickness,t.borderColor=e.bordercolor,t.backgroundColor=e.backgroundcolor,t.textColor=e.textcolor,t},this.initFromScenePhoto=function(e){var t={};return t.textureDescription=this.initFromTextureDescription(e.textureDescription),t},this.initPhoto=function(){var e={};return e.textureDescription={},e.textureDescription.src="http://vrembed.org/src/assets/vrEmbedLogo.png",e.textureDescription.isStereo=!1,e.textureDescription.plane=!1,e.textureDescription.sphereFOV=[60,60],e.textureDescription.sphereCentre=[0,0],e.textureDescription.planeOffset=[0,0],e.textureDescription.U_l=[0,0],e.textureDescription.V_l=[.5,1],e.textureDescription.U_r=[.5,0],e.textureDescription.V_r=[1,1],e},this.initFromText=function(e){var t={};return t.textureDescription=this.initFromTextureDescription(e.textureDescription),t.textOptions=this.initFromTextOptions(e.textOptions),t.message=e.message,t.jumpTo=e.jumpTo,t},this.initText=function(){var e={};return e.message="Placeholder text",e.jumpTo="",e.textureDescription={},e.textureDescription.src="",e.textureDescription.isStereo=!1,e.textureDescription.plane=!1,e.textureDescription.sphereFOV=[60,40],e.textureDescription.sphereCentre=[0,0],e.textureDescription.planeOffset=[0,0],e.textOptions={},e.textOptions.align="center",e.textOptions.fontface="Arial",e.textOptions.fontsize="72",e.textOptions.borderthickness="12",e.textOptions.bordercolor="#FFFFFF",e.textOptions.backgroundcolor="#000000",e.textOptions.textcolor="#FFFFFF",e},this.initFromDecal=function(e){var t={};return t.textureDescription=this.initFromTextureDescription(e.textureDescription),e.imgsrc=e.imgsrc,e.jumpTo=e.jumpTo,text},this.initDecal=function(){var e={};return e.imgsrc="http://vrembed.org/src/assets/vrEmbedLogo.png",e.jumpTo="",e.textureDescription={},e.textureDescription.src="",e.textureDescription.isStereo=!1,e.textureDescription.plane=!0,e.textureDescription.sphereFOV=[30,30],e.textureDescription.sphereCentre=[0,0],e.textureDescription.planeOffset=[0,0],e},this.addDecal=function(){var e=this.initDecal();this.dict.decalObjects.push(e)},this.removeDecal=function(e){this.dict.decalObjects.splice(e,1)},this.addPhoto=function(){var e=this.initPhoto();this.dict.photoObjects.push(e)},this.removePhoto=function(e){this.dict.photoObjects.splice(e,1)},this.addText=function(){var e=this.initText();this.dict.textObjects.push(e)},this.removeText=function(e){this.dict.textObjects.splice(e,1)}},t.exports=VRSceneDict},{}],9:[function(e,t,i){var s=e("./VRTextureDescription.js");VRScenePhoto=function(){this.scenePhoto=null,this.textureDescription=null,this.init=function(e){this.scenePhoto=e,this.textureDescription=new s,this.textureDescription.init(e)},this.initDict=function(e){this.textureDescription=new s,this.textureDescription.initDict(e.textureDescription)},this.populateElementCommon=function(e){this.textureDescription.setElement(e)},this.isStereo=function(){return this.textureDescription.isStereo},this.getPhotoElement=function(){var e=document.createElement("photo");return this.populateElementCommon(e),e},this.getSinglePhotoVrEmbedElement=function(){var e=document.createElement("a");return e.setAttribute("class","vrEmbedPhoto"),this.populateElementCommon(e),e},this.getSinglePhotoURLParams=function(){var e="?";return e+="src="+this.textureDescription.getAbsoluteTexturePath(),e+="&sphereParams="+this.textureDescription.getSphereParamsString(),0==this.isStereo()?e+="&isStereo=false":(e+="&isStereo=true",e+="&texParams="+this.textureDescription.getTexParamsString()),
0==this.textureDescription.plane?e+="&plane=false":(e+="&plane=true",e+="&planeOffset="+this.textureDescription.getPlaneOffsetParamsString()),e}},t.exports=VRScenePhoto},{"./VRTextureDescription.js":13}],10:[function(e,t,i){var s=e("./VRSceneDict.js");e("./VRUISceneList.js");VRStoryDict=function(){this.init=function(e){var t=document.createElement("div");t.innerHTML=e;var i=t.getElementsByTagName("story");if(0==i.length)return null;var n=[];for(storyit=0;storyit<i.length;storyit++)for(var r=i[storyit],o=r.childNodes,c=0,a=o.length;a>c;++c){var l=o[c];if(1===l.nodeType&&"SCENE"==l.nodeName){var u=new VRScene;u.init(l);var M=new s;M.initFromVrScene(u),n.push(M)}}return t.remove(),n}},t.exports=VRStoryDict},{"./VRSceneDict.js":8,"./VRUISceneList.js":17}],11:[function(e,t,i){var s=e("./VRTextureDescription.js"),n=e("./VRTextOptions.js");VRText=function(){this.sceneText=null,this.textureDescription=null,this.textOptions=null,this.message="",this.jumpTo="",this.parseMessage=function(e){this.message=e},this.parseBoolString=function(e){return void 0==e?!1:"true"==e.toLowerCase()?!0:!1},this.init=function(e){this.sceneText=e,this.sceneText.setAttribute("hidden",!0),this.parseMessage(this.sceneText.innerHTML),this.jumpTo=this.sceneText.getAttribute("jumpTo"),void 0==this.jumpTo&&(this.jumpTo=""),this.textureDescription=new s,this.textureDescription.init(this.sceneText),this.textOptions=new n,this.textOptions.init(this.sceneText)},this.initDict=function(e){this.textureDescription=new s,this.textureDescription.initDict(e.textureDescription),this.parseMessage(e.message),this.jumpTo=e.jumpTo,this.textOptions=new n,this.textOptions.initDict(e.textOptions)},this.getTextElement=function(){var e=document.createElement("text");return this.textureDescription.setElement(e),e.innerHTML=this.message,""!=this.jumpTo&&e.setAttribute("jumpTo",this.jumpTo),this.textOptions.setElement(e),e}},t.exports=VRText},{"./VRTextOptions.js":12,"./VRTextureDescription.js":13}],12:[function(e,t,i){VRTextOptions=function(){this.align=null,this.fontface=null,this.fontsize=null,this.borderThickness=null,this.borderColor=null,this.backgroundColor=null,this.textColor=null,this.init=function(e){this.align=e.getAttribute("align"),this.fontface=e.getAttribute("fontface"),this.fontsize=e.getAttribute("fontsize"),this.borderThickness=e.getAttribute("borderthickness"),this.borderColor=e.getAttribute("bordercolor"),this.backgroundColor=e.getAttribute("backgroundcolor"),this.textColor=e.getAttribute("textcolor")},this.initDict=function(e){this.align=e.align,this.fontface=e.fontface,this.fontsize=e.fontsize,this.borderThickness=e.borderthickness,this.borderColor=e.bordercolor,this.backgroundColor=e.backgroundcolor,this.textColor=e.textcolor},this.setElement=function(e){null!=this.align&&e.setAttribute("align",this.align),null!=this.fontface&&e.setAttribute("fontface",this.fontface),null!=this.fontsize&&e.setAttribute("fontsize",this.fontsize),null!=this.borderThickness&&e.setAttribute("borderthickness",this.borderThickness),null!=this.borderColor&&e.setAttribute("bordercolor",this.borderColor),null!=this.backgroundColor&&e.setAttribute("backgroundcolor",this.backgroundColor),null!=this.textColor&&e.setAttribute("textcolor",this.textColor)}},t.exports=VRTextOptions},{}],13:[function(e,t,i){VRTextureDescription=function(){this.textureSource="",this.metaSource="",this.isStereo=!1,this.sphereFOV=[360,180],this.sphereCentre=[0,0],this.U_l=[0,0],this.V_l=[1,1],this.U_r=[0,0],this.V_r=[1,1],this.plane=!1,this.planeOffset=[0,0],this.parseBoolString=function(e){return void 0==e?!1:"true"==e.toLowerCase()?!0:!1},this.setPlaneOffsetParamsFromString=function(e){if(void 0!=e){var t=e.split(",");this.planeOffset=[parseFloat(t[0].trim()),parseFloat(t[1].trim())]}},this.setSphereParamsFromString=function(e){var t=e.split(",");this.sphereFOV=[parseFloat(t[0].trim()),parseFloat(t[1].trim())],this.sphereCentre=[parseFloat(t[2].trim()),parseFloat(t[3].trim())]},this.setTexParamsFromString=function(e){var t=e.split(",");this.U_l=[parseFloat(t[0].trim()),parseFloat(t[1].trim())],this.V_l=[parseFloat(t[2].trim()),parseFloat(t[3].trim())],this.U_r=[parseFloat(t[4].trim()),parseFloat(t[5].trim())],this.V_r=[parseFloat(t[6].trim()),parseFloat(t[7].trim())]},this.getPlaneOffsetParamsString=function(){return this.planeOffset[0]+","+this.planeOffset[1]},this.getSphereParamsString=function(){return this.sphereFOV[0]+","+this.sphereFOV[1]+","+this.sphereCentre[0]+","+this.sphereCentre[1]},this.getTexParamsString=function(){return this.U_l[0]+","+this.U_l[1]+","+this.V_l[0]+","+this.V_l[1]+","+this.U_r[0]+","+this.U_r[1]+","+this.V_r[0]+","+this.V_r[1]},this.getAbsoluteTexturePath=function(){var e=document.createElement("a");return e.href=this.textureSource,e.protocol+"//"+e.host+e.pathname+e.search+e.hash},this.init=function(e){this.setSphereParamsFromString(e.getAttribute("sphereParams")),this.plane=this.parseBoolString(e.getAttribute("plane")),this.setPlaneOffsetParamsFromString(e.getAttribute("planeOffset")),this.textureSource=e.getAttribute("src"),void 0==this.textureSource&&(this.textureSource=""),this.metaSource="",this.isStereo=this.parseBoolString(e.getAttribute("isStereo")),void 0==this.isStereo&&(this.isStereo=!1),1==this.isStereo&&this.setTexParamsFromString(e.getAttribute("texParams"))},this.initDict=function(e){return this.textureSource=e.src,null==this.textureSource?void(this.textureSource=null):(this.metaSource="",this.isStereo=e.isStereo,this.plane=e.plane,this.sphereFOV=e.sphereFOV,this.sphereCentre=e.sphereCentre,this.planeOffset=e.planeOffset,void(this.isStereo&&(this.U_l=e.U_l,this.V_l=e.V_l,this.U_r=e.U_r,this.V_r=e.V_r)))},this.setElement=function(e){""!=this.textureSource&&e.setAttribute("src",this.getAbsoluteTexturePath()),e.setAttribute("sphereParams",this.getSphereParamsString()),0==this.plane?e.setAttribute("plane","false"):(e.setAttribute("plane","true"),e.setAttribute("planeOffset",this.getPlaneOffsetParamsString())),0==this.isStereo?e.setAttribute("isStereo","false"):(e.setAttribute("isStereo","true"),e.setAttribute("texParams",this.getTexParamsString()))}},t.exports=VRTextureDescription},{}],14:[function(e,t,i){VRUIAccordion=function(){var e=this;this.bar=null,this.button=null,this.container=null,this.shown=!1,this.accordionManager=!1,this.name=null,this.totalHide=function(t){e.container.hidden=t,e.bar.hidden=t},this.show=function(t){e.shown=t,0==t?(e.container.hidden=!0,e.button.innerHTML="+"):(e.container.hidden=!1,e.button.innerHTML="-")},this.toggle=function(){e.accordionManager.toggle(e.name)},this.init=function(e,t){this.name=t,this.accordionManager=e,this.container=document.getElementById(t),this.button=document.getElementById(t+"_button"),this.bar=document.getElementById(t+"_bar"),this.button.onclick=this.toggle,this.show(!1)}},t.exports=VRUIAccordion},{}],15:[function(e,t,s){var n=e("./VRUIAccordion.js");VRUIAccordionStacker=function(){var e=this;this.accordions=[],this.active=null,this.add=function(t){var i=new n;i.init(e,t),e.accordions.push([t,i])},this.showNamed=function(t){for(i=0;i<e.accordions.length;i++)t==e.accordions[i][0]?(e.active=t,e.accordions[i][1].show(!0)):e.accordions[i][1].show(!1)},this.toggle=function(t){e.active!=t&&e.showNamed(t)},this.totalHide=function(t,s){for(i=0;i<e.accordions.length;i++)if(t==e.accordions[i][0])return void e.accordions[i][1].totalHide(s)}},t.exports=VRUIAccordionStacker},{"./VRUIAccordion.js":14}],16:[function(e,t,i){var s=function(){var e=this;this.sliderElement=null,this.textElement=null,this.callback=null,this.sliderMove=function(){e.textElement.value=e.sliderElement.value},this.inputStateChange=function(){e.textElement.value=e.sliderElement.value,e.callback()},this.textChange=function(){return parseFloat(e.textElement.value)<parseFloat(e.sliderElement.min)||parseFloat(e.textElement.value)>parseFloat(e.sliderElement.max)?void(e.textElement.value=e.sliderElement.value):(e.sliderElement.value=e.textElement.value,void e.callback())},this.set=function(t){e.sliderElement.value=t,e.textElement.value=t},this.get=function(){return e.sliderElement.value},this.init=function(e,t,i,s){this.sliderElement=e,this.textElement=t,this.set(i),this.callback=s,this.sliderElement.oninput=this.sliderMove,this.sliderElement.onchange=this.inputStateChange,this.textElement.onchange=this.textChange}};t.exports=s},{}],17:[function(e,t,i){VRUISceneList=function(){this.scenes=[],this.sceneIdx=-1,this.init=function(){this.addScene(),this.sceneIdx=0},this.addScene=function(){var e=new VRSceneDict;e.init(),this.scenes.push(e)},this.getScene=function(e){return this.scenes[e]},this.removeScene=function(e){this.scenes.length>1&&this.scenes.splice(e,1)}},t.exports=VRUISceneList},{}],18:[function(e,t,i){function s(){var e=window.location.search.substr(1);return null!=e&&""!=e?n(e):{}}function n(e){for(var t={},i=e.split("&"),s=0;s<i.length;s++){var n=i[s].split("=");t[n[0]]=decodeURIComponent(n[1])}return t}VRURLParser=function(){this.isEditor=!1,this.params=[],this.scenePhoto=null,this.parseURL=function(){this.params=s()},this.init=function(){var e=document.getElementsByTagName("vrEditor");this.parseURL();var t=0;for(var i in this.params)t+=1;0!=e.length&&0!=t&&(this.isEditor=!0)}},t.exports=VRURLParser},{}],19:[function(e,t,i){var s=e("./VRCreateUI.js");new s},{"./VRCreateUI.js":1}]},{},[19]);
