!function t(e,i,n){function r(A,s){if(!i[A]){if(!e[A]){var a="function"==typeof require&&require;if(!s&&a)return a(A,!0);if(o)return o(A,!0);var u=new Error("Cannot find module '"+A+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[A]={exports:{}};e[A][0].call(c.exports,function(t){var i=e[A][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[A].exports}for(var o="function"==typeof require&&require,A=0;A<n.length;A++)r(n[A]);return r}({1:[function(t,e,i){var n=function(){function t(){n?document.removeEventListener("DOMContentLoaded",t,!0):"complete"===document.readyState&&document.detachEvent("onreadystatechange",t),i()}function e(){if(!r){try{document.documentElement.doScroll("left")}catch(t){return void window.setTimeout(arguments.callee,15)}i()}}function i(){if(!r){r=!0;for(var t=A.length,e=0;t>e;e++)A[e].call(document)}}var n=!!document.addEventListener,r=!1,o=!1,A=[];if(n)document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",i,!1);else{document.attachEvent("onreadystatechange",t),window.attachEvent("onload",i);try{o=null===window.frameElement}catch(s){}document.documentElement.doScroll&&o&&e()}return function(t){return r?t.call(document):A.push(t)}}();e.exports=n},{}],2:[function(t,e,i){function n(){this.callbacks={}}n.prototype.emit=function(t){var e=this.callbacks[t];if(!e)return void console.log("No valid callback specified.");var i=[].slice.call(arguments);i.shift();for(var n=0;n<e.length;n++)e[n].apply(this,i)},n.prototype.on=function(t,e){t in this.callbacks?this.callbacks[t].push(e):this.callbacks[t]=[e]},e.exports=n},{}],3:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd&&define([],i),"undefined"!=typeof e&&e.exports?e.exports=i():t.twgl=i()}(this,function(){var t,e,i;return function(n){function r(t,e){return p.call(t,e)}function o(t,e){var i,n,r,o,A,s,a,u,c,l,h,f=e&&e.split("/"),d=w.map,g=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),A=t.length-1,w.nodeIdCompat&&L.test(t[A])&&(t[A]=t[A].replace(L,"")),t=f.slice(0,f.length-1).concat(t),c=0;c<t.length;c+=1)if(h=t[c],"."===h)t.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||g)&&d){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(r=d[f.slice(0,l).join("/")],r&&(r=r[n])){o=r,s=c;break}if(o)break;!a&&g&&g[n]&&(a=g[n],u=c)}!o&&a&&(o=a,s=u),o&&(i.splice(0,s,o),t=i.join("/"))}return t}function A(t,e){return function(){var i=I.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(n,i.concat([t,e]))}}function s(t){return function(e){return o(e,t)}}function a(t){return function(e){M[t]=e}}function u(t){if(r(v,t)){var e=v[t];delete v[t],m[t]=!0,h.apply(n,e)}if(!r(M,t)&&!r(m,t))throw new Error("No "+t);return M[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return w&&w.config&&w.config[t]||{}}}var h,f,d,g,M={},v={},w={},m={},p=Object.prototype.hasOwnProperty,I=[].slice,L=/\.js$/;d=function(t,e){var i,n=c(t),r=n[0];return t=n[1],r&&(r=o(r,e),i=u(r)),r?t=i&&i.normalize?i.normalize(t,s(e)):o(t,e):(t=o(t,e),n=c(t),r=n[0],t=n[1],r&&(i=u(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},g={notrequirebecasebrowserifymessesup:function(t){return A(t)},exports:function(t){var e=M[t];return"undefined"!=typeof e?e:M[t]={}},module:function(t){return{id:t,uri:"",exports:M[t],config:l(t)}}},h=function(t,e,i,o){var s,c,l,h,f,w,p=[],I=typeof i;if(o=o||t,"undefined"===I||"function"===I){for(e=!e.length&&i.length?["notrequirebecasebrowserifymessesup","exports","module"]:e,f=0;f<e.length;f+=1)if(h=d(e[f],o),c=h.f,"notrequirebecasebrowserifymessesup"===c)p[f]=g.notrequirebecasebrowserifymessesup(t);else if("exports"===c)p[f]=g.exports(t),w=!0;else if("module"===c)s=p[f]=g.module(t);else if(r(M,c)||r(v,c)||r(m,c))p[f]=u(c);else{if(!h.p)throw new Error(t+" missing "+c);h.p.load(h.n,A(o,!0),a(c),{}),p[f]=M[c]}l=i?i.apply(M[t],p):void 0,t&&(s&&s.exports!==n&&s.exports!==M[t]?M[t]=s.exports:l===n&&w||(M[t]=l))}else t&&(M[t]=i)},t=e=f=function(t,e,i,r,o){if("string"==typeof t)return g[t]?g[t](e):u(d(t,e).f);if(!t.splice){if(w=t,w.deps&&f(w.deps,w.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=r,r=o),r?h(n,t,e,i):setTimeout(function(){h(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=M,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),r(M,t)||r(v,t)||(v[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("node_modules/almond/almond.js",function(){}),i("twgl/typedarrays",[],function(){function t(t){if(t instanceof Int8Array)return n;if(t instanceof Uint8Array)return r;if(t instanceof Int16Array)return o;if(t instanceof Uint16Array)return A;if(t instanceof Int32Array)return s;if(t instanceof Uint32Array)return a;if(t instanceof Float32Array)return u;throw"unsupported typed array type"}function e(t){switch(t){case n:return Int8Array;case r:return Uint8Array;case o:return Int16Array;case A:return Uint16Array;case s:return Int32Array;case a:return Uint32Array;case u:return Float32Array;default:throw"unknown gl type"}}function i(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer}var n=5120,r=5121,o=5122,A=5123,s=5124,a=5125,u=5126;return{getGLTypeForTypedArray:t,getTypedArrayTypeForGLType:e,isArrayBuffer:i}}),i("twgl/attributes",["./typedarrays"],function(t){function e(t){d.attribPrefix=t}function i(t){Object.keys(t).forEach(function(e){d[e]=t[e]})}function n(t,e,i,n,r){t.bindBuffer(e,i),t.bufferData(e,n,r||t.STATIC_DRAW)}function r(t,e,i,r){if(e instanceof WebGLBuffer)return e;i=i||t.ARRAY_BUFFER;var o=t.createBuffer();return n(t,i,o,e,r),o}function o(t){return"indices"===t}function A(t){return t instanceof Int8Array?!0:t instanceof Uint8Array?!0:!1}function s(t,e){var i;if(i=t.indexOf("coord")>=0?2:t.indexOf("color")>=0?4:3,e%i>0)throw"can not guess numComponents. You should specify it.";return i}function a(e,i){if(t.isArrayBuffer(e))return e;if(t.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var n=e.type;return n||(n="indices"===i?Uint16Array:Float32Array),new n(e.data)}function u(e,i){var n={};return Object.keys(i).forEach(function(u){if(!o(u)){var c=i[u],l=c.attrib||c.name||c.attribName||d.attribPrefix+u,h=a(c,u);n[l]={buffer:r(e,h,void 0,c.drawType),numComponents:c.numComponents||c.size||s(u),type:t.getGLTypeForTypedArray(h),normalize:void 0!==c.normalize?c.normalize:A(h),stride:c.stride||0,offset:c.offset||0,drawType:c.drawType}}}),n}function c(t,e,i,r){i=a(i),r?(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.bufferSubData(t.ARRAY_BUFFER,r,i)):n(t,t.ARRAY_BUFFER,e.buffer,i,e.drawType)}function l(t,e){var i={attribs:u(t,e)},n=e.indices;return n?(n=a(n,"indices"),i.indices=r(t,n,t.ELEMENT_ARRAY_BUFFER),i.numElements=n.length,i.elementType=n instanceof Uint32Array?t.UNSIGNED_INT:t.UNSIGNED_SHORT):i.numElements=g(e),i}function h(t,e,i){var n="indices"===i?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER,o=a(e,i);return r(t,o,n)}function f(t,e){var i={};return Object.keys(e).forEach(function(n){i[n]=h(t,e[n],n)}),i}var d={attribPrefix:""},g=function(){var t=["position","positions","a_position"];return function(e){for(var i,n=0;n<t.length&&(i=t[n],!(i in e));++n);n===t.length&&(i=Object.keys(e)[0]);var r=e[i],o=r.length||r.data.length,A=r.numComponents||s(i,o),a=o/A;if(o%A>0)throw"numComponents "+A+" not correct for length "+o;return a}}();return{createAttribsFromArrays:u,createBuffersFromArrays:f,createBufferFromArray:h,createBufferFromTypedArray:r,createBufferInfoFromArrays:l,setAttribInfoBufferFromArray:c,setAttributePrefix:e,setDefaults_:i}}),i("twgl/programs",[],function(){function t(t){return t.split("\n").map(function(t,e){return e+1+": "+t}).join("\n")}function e(e,i,n,r){var o=r||d,A=e.createShader(n);e.shaderSource(A,i),e.compileShader(A);var s=e.getShaderParameter(A,e.COMPILE_STATUS);if(!s){var a=e.getShaderInfoLog(A);return o(t(i)+"\n*** Error compiling shader: "+a),e.deleteShader(A),null}return A}function i(t,e,i,n,r){var o=r||d,A=t.createProgram();e.forEach(function(e){t.attachShader(A,e)}),i&&i.forEach(function(e,i){t.bindAttribLocation(A,n?n[i]:i,e)}),t.linkProgram(A);var s=t.getProgramParameter(A,t.LINK_STATUS);if(!s){var a=t.getProgramInfoLog(A);return o("Error in program linking:"+a),t.deleteProgram(A),null}return A}function n(t,i,n,r){var o,A="",s=document.getElementById(i);if(!s)throw"*** Error: unknown script element"+i;if(A=s.text,!n)if("x-shader/x-vertex"===s.type)o=t.VERTEX_SHADER;else if("x-shader/x-fragment"===s.type)o=t.FRAGMENT_SHADER;else if(o!==t.VERTEX_SHADER&&o!==t.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return e(t,A,n?n:o,r)}function r(t,e,r,o,A){for(var s=[],a=0;a<e.length;++a){var u=n(t,e[a],t[g[a]],A);if(!u)return null;s.push(u)}return i(t,s,r,o,A)}function o(t,n,r,o,A){for(var s=[],a=0;a<n.length;++a){var u=e(t,n[a],t[g[a]],A);if(!u)return null;s.push(u)}return i(t,s,r,o,A)}function A(t,e){return e===t.SAMPLER_2D?t.TEXTURE_2D:e===t.SAMPLER_CUBE?t.TEXTURE_CUBE_MAP:void 0}function s(t,e){function i(e,i){var r=t.getUniformLocation(e,i.name),o=i.type,s=i.size>1&&"[0]"===i.name.substr(-3);if(o===t.FLOAT&&s)return function(e){t.uniform1fv(r,e)};if(o===t.FLOAT)return function(e){t.uniform1f(r,e)};if(o===t.FLOAT_VEC2)return function(e){t.uniform2fv(r,e)};if(o===t.FLOAT_VEC3)return function(e){t.uniform3fv(r,e)};if(o===t.FLOAT_VEC4)return function(e){t.uniform4fv(r,e)};if(o===t.INT&&s)return function(e){t.uniform1iv(r,e)};if(o===t.INT)return function(e){t.uniform1i(r,e)};if(o===t.INT_VEC2)return function(e){t.uniform2iv(r,e)};if(o===t.INT_VEC3)return function(e){t.uniform3iv(r,e)};if(o===t.INT_VEC4)return function(e){t.uniform4iv(r,e)};if(o===t.BOOL&&s)return function(e){t.uniform1iv(r,e)};if(o===t.BOOL)return function(e){t.uniform1i(r,e)};if(o===t.BOOL_VEC2)return function(e){t.uniform2iv(r,e)};if(o===t.BOOL_VEC3)return function(e){t.uniform3iv(r,e)};if(o===t.BOOL_VEC4)return function(e){t.uniform4iv(r,e)};if(o===t.FLOAT_MAT2)return function(e){t.uniformMatrix2fv(r,!1,e)};if(o===t.FLOAT_MAT3)return function(e){t.uniformMatrix3fv(r,!1,e)};if(o===t.FLOAT_MAT4)return function(e){t.uniformMatrix4fv(r,!1,e)};if((o===t.SAMPLER_2D||o===t.SAMPLER_CUBE)&&s){for(var a=[],u=0;u<i.size;++u)a.push(n++);return function(e,i){return function(n){t.uniform1iv(r,i),n.forEach(function(n,r){t.activeTexture(t.TEXTURE0+i[r]),t.bindTexture(e,n)})}}(A(t,o),a)}if(o===t.SAMPLER_2D||o===t.SAMPLER_CUBE)return function(e,i){return function(n){t.uniform1i(r,i),t.activeTexture(t.TEXTURE0+i),t.bindTexture(e,n)}}(A(t,o),n++);throw"unknown type: 0x"+o.toString(16)}for(var n=0,r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;o>s;++s){var a=t.getActiveUniform(e,s);if(!a)break;var u=a.name;"[0]"===u.substr(-3)&&(u=u.substr(0,u.length-3));var c=i(e,a);r[u]=c}return r}function a(t,e){for(var i=t.uniformSetters||t,n=arguments.length,r=1;n>r;++r){var o=arguments[r];if(Array.isArray(o))for(var A=o.length,s=0;A>s;++s)a(i,o[s]);else for(var u in o){var c=i[u];c&&c(o[u])}}}function u(t,e){function i(e){return function(i){t.bindBuffer(t.ARRAY_BUFFER,i.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,i.numComponents||i.size,i.type||t.FLOAT,i.normalize||!1,i.stride||0,i.offset||0)}}for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;r>o;++o){var A=t.getActiveAttrib(e,o);if(!A)break;var s=t.getAttribLocation(e,A.name);n[A.name]=i(s)}return n}function c(t,e){for(var i in e){var n=t[i];n&&n(e[i])}}function l(t,e,i){c(e.attribSetters||e,i.attribs),i.indices&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indices)}function h(t,e){var i=s(t,e),n=u(t,e);return{program:e,uniformSetters:i,attribSetters:n}}function f(t,e,i,n,r){e=e.map(function(t){var e=document.getElementById(t);return e?e.text:t});var A=o(t,e,i,n,r);return A?h(t,A):null}var d=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},g=["VERTEX_SHADER","FRAGMENT_SHADER"];return{createAttributeSetters:u,createProgram:i,createProgramFromScripts:r,createProgramFromSources:o,createProgramInfo:f,createProgramInfoFromProgram:h,createUniformSetters:s,setAttributes:c,setBuffersAndAttributes:l,setUniforms:a}}),i("twgl/draw",["./programs"],function(t){function e(t,e,i,n,r){var o=i.indices,A=void 0===n?i.numElements:n;r=void 0===r?0:r,o?t.drawElements(e,A,void 0===i.elementType?t.UNSIGNED_SHORT:i.elementType,r):t.drawArrays(e,r,A)}function i(i,n){var r=null,o=null;n.forEach(function(n){if(n.active!==!1){var A=n.programInfo,s=n.bufferInfo,a=!1;A!==r&&(r=A,i.useProgram(A.program),a=!0),(a||s!==o)&&(o=s,t.setBuffersAndAttributes(i,A,s)),t.setUniforms(A,n.uniforms),e(i,n.type||i.TRIANGLES,s,n.count,n.offset)}})}return{drawBufferInfo:e,drawObjectList:i}}),i("twgl/utils",[],function(){function t(t){var e={};return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}return{shallowCopy:t}}),i("twgl/textures",["./typedarrays","./utils"],function(t,e){function i(t){C.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function n(t){return!b.test(t)}function r(t){t.textureColor&&i(t.textureColor),Object.keys(t).filter(n).forEach(function(e){C[e]=t[e]})}function o(t,e){void 0!==e.colorspaceConversion&&(k.colorSpaceConversion=t.getParameter(t.UNPACK_COLORSPACE_CONVERSION_WEBGL)),void 0!==e.premultiplyAlpha&&(k.premultiplyAlpha=t.getParameter(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL)),void 0!==e.flipY&&(k.flipY=t.getParameter(t.UNPACK_FLIP_Y_WEBGL))}function A(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,k.colorSpaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY)}function s(t,e,i){var n=i.target||t.TEXTURE_2D;t.bindTexture(n,e),i.min&&t.texParameteri(n,t.TEXTURE_MIN_FILTER,i.min),i.mag&&t.texParameteri(n,t.TEXTURE_MAG_FILTER,i.mag),i.wrap&&(t.texParameteri(n,t.TEXTURE_WRAP_S,i.wrap),t.texParameteri(n,t.TEXTURE_WRAP_T,i.wrap)),i.wrapS&&t.texParameteri(n,t.TEXTURE_WRAP_S,i.wrapS),i.wrapT&&t.texParameteri(n,t.TEXTURE_WRAP_T,i.wrapT)}function a(t){return t=t||C.textureColor,T(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function u(t){return 0===(t&t-1)}function c(t,e,i,n,r){i=i||C.textureOptions;var o=i.target||t.TEXTURE_2D;n=n||i.width,r=r||i.height,t.bindTexture(o,e),u(n)&&u(r)?t.generateMipmap(o):(t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))}function l(t,e){return e=e||{},e.cubeFaceOrder||[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function h(t,e){var i=l(t,e),n=i.map(function(t,e){return{face:t,ndx:e}});return n.sort(function(t,e){return t.face-e.face}),n}function f(){}function d(t,e,i){i=i||f;var n=new Image;return e=void 0!==e?e:C.crossOrigin,void 0!==e&&(n.crossOrigin=e),n.onerror=function(){var e="couldn't load image: "+t;error(e),i(e,n)},n.onload=function(){i(null,n)},n.src=t,n}function g(t,e,i){i=i||C.textureOptions;var n=i.target||t.TEXTURE_2D;if(t.bindTexture(n,e),i.color!==!1){var r=a(i.color);if(n===t.TEXTURE_CUBE_MAP)for(var o=0;6>o;++o)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);else t.texImage2D(n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r)}}function M(t,i,n,r){r=r||f,n=n||C.textureOptions,g(t,i,n),n=e.shallowCopy(n);var o=d(n.src,n.crossOrigin,function(e,o){e?r(e,i,o):(U(t,i,o,n),r(null,i,o))});return o}function v(t,i,n,r){function s(e){return function(s,a){--v,s?w.push(s):a.width!==a.height?w.push("cubemap face img is not a square: "+a.src):(o(t,n),t.bindTexture(h,i),5===v?l(t).forEach(function(e){t.texImage2D(e,0,u,u,c,a)}):t.texImage2D(e,0,u,u,c,a),A(t,n),t.generateMipmap(h)),0===v&&r(w.length?w:void 0,M,i)}}r=r||f;var a=n.src;if(6!==a.length)throw"there must be 6 urls for a cubemap";var u=n.format||t.RGBA,c=n.type||t.UNSIGNED_BYTE,h=n.target||t.TEXTURE_2D;if(h!==t.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";g(t,i,n),n=e.shallowCopy(n);var M,v=6,w=[],m=l(t,n);M=a.map(function(t,e){return d(t,n.crossOrigin,s(m[e]))})}function w(t){switch(t){case y:case j:return 1;case R:return 2;case N:return 3;case S:return 4;default:throw"unknown type: "+t}}function m(e,i){return T(i)?t.getGLTypeForTypedArray(i):e.UNSIGNED_BYTE}function p(e,i,n,r){r=r||C.textureOptions;var s=r.target||e.TEXTURE_2D;e.bindTexture(s,i);var a=r.width,u=r.height,c=r.format||e.RGBA,l=r.type||m(e,n),f=w(c),d=n.length/f;if(d%1)throw"length wrong size for format: "+B(e,c);if(a||u){if(u){if(!a&&(a=d/u,a%1))throw"can't guess width"}else if(u=d/a,u%1)throw"can't guess height"}else{var g=Math.sqrt(d/(s===e.TEXTURE_CUBE_MAP?6:1));g%1===0?(a=g,u=g):(a=d,u=1)}if(!T(n)){var M=t.getTypedArrayTypeForGLType(l);n=new M(n)}if(e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment||1),o(e,r),s===e.TEXTURE_CUBE_MAP){var v=d/6*f;h(e,r).forEach(function(t){var i=v*t.ndx,r=n.subarray(i,i+v);e.texImage2D(t.face,0,c,a,u,0,c,l,r)})}else e.texImage2D(s,0,c,a,u,0,c,l,n);return A(e,r),{width:a,height:u}}function I(t,e,i){var n=i.target||t.TEXTURE_2D;t.bindTexture(n,e);var r=i.format||t.RGBA,A=i.type||t.UNSIGNED_BYTE;if(o(t,i),n===t.TEXTURE_CUBE_MAP)for(var s=0;6>s;++s)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,r,i.width,i.height,0,r,A,null);else t.texImage2D(n,0,r,i.width,i.height,0,r,A,null)}function L(t,e,i){i=i||f,e=e||C.textureOptions;var n=t.createTexture(),r=e.target||t.TEXTURE_2D,o=e.width||1,A=e.height||1;t.bindTexture(r,n),r===t.TEXTURE_CUBE_MAP&&(t.texParameteri(r,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(r,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));var a=e.src;if(a)if("function"==typeof a&&(a=a(t,e)),"string"==typeof a)M(t,n,e,i);else if(T(a)||Array.isArray(a)&&("number"==typeof a[0]||Array.isArray(a[0])||T(a[0]))){var u=p(t,n,a,e);o=u.width,A=u.height}else if(Array.isArray(a)&&"string"==typeof a[0])v(t,n,e,i);else{if(!(a instanceof HTMLElement))throw"unsupported src type";U(t,n,a,e),o=a.width,A=a.height}else I(t,n,e);return e.auto!==!1&&c(t,n,e,o,A),s(t,n,e),n}function x(t,e,i,n,r){n=n||i.width,r=r||i.height;var o=i.target||t.TEXTURE_2D;t.bindTexture(o,e);var A,s=i.format||t.RGBA,a=i.src;if(A=a&&(T(a)||Array.isArray(a)&&"number"==typeof a[0])?i.type||m(t,a):i.type||t.UNSIGNED_BYTE,o===t.TEXTURE_CUBE_MAP)for(var u=0;6>u;++u)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,s,n,r,0,s,A,null);else t.texImage2D(o,0,s,n,r,0,s,A,null)}function D(t){return"string"==typeof t||Array.isArray(t)&&"string"==typeof t[0]}function E(t,e,i){function n(){0===r&&setTimeout(function(){i(o.length?o:void 0,A,s)},0)}i=i||f;var r=0,o=[],A={},s={};return Object.keys(e).forEach(function(i){var a=e[i],u=void 0;D(a.src)&&(u=function(t,e,A){s[i]=A,--r,t&&o.push(t),n()},++r),A[i]=L(t,a,u)}),n(),A}var C={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{}},T=t.isArrayBuffer,y=6406,N=6407,S=6408,j=6409,R=6410,b=/^textureColor$/,B=function(){function t(t){e||(e={},Object.keys(t).forEach(function(i){"number"==typeof t[i]&&(e[t[i]]=i)}))}var e;return function(i,n){return t(),e[n]||"0x"+n.toString(16)}}(),k={},U=function(){var t=document.createElement("canvas").getContext("2d");return function(e,i,n,r){r=r||C.textureOptions;var a=r.target||e.TEXTURE_2D,u=n.width,l=n.height,f=r.format||e.RGBA,d=r.type||e.UNSIGNED_BYTE;if(o(e,r),e.bindTexture(a,i),a===e.TEXTURE_CUBE_MAP){var g,M,v=n.width,w=n.height;if(v/6===w)g=w,M=[0,0,1,0,2,0,3,0,4,0,5,0];else if(w/6===v)g=v,M=[0,0,0,1,0,2,0,3,0,4,0,5];else if(v/3===w/2)g=v/3,M=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(v/2!==w/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);g=v/2,M=[0,0,1,0,0,1,1,1,0,2,1,2]}t.canvas.width=g,t.canvas.height=g,u=g,l=g,h(e,r).forEach(function(i){var r=M[2*i.ndx+0]*g,o=M[2*i.ndx+1]*g;t.drawImage(n,r,o,g,g,0,0,g,g),e.texImage2D(i.face,0,f,f,d,t.canvas)}),t.canvas.width=1,t.canvas.height=1}else e.texImage2D(a,0,f,f,d,n);A(e,r),r.auto!==!1&&c(e,i,r,u,l),s(e,i,r)}}();return{setDefaults_:r,createTexture:L,setEmptyTexture:I,setTextureFromArray:p,loadTextureFromUrl:M,setTextureFromElement:U,setTextureFilteringForSize:c,setTextureParameters:s,setDefaultTextureColor:i,createTextures:E,resizeTexture:x,getNumComponentsForFormat:w}}),i("twgl/framebuffers",["./textures","./utils"],function(t,e){function i(t){return D[t]}function n(t){return E[t]}function r(r,o,A,s){var a=r.FRAMEBUFFER,u=r.createFramebuffer();r.bindFramebuffer(a,u),A=A||r.drawingBufferWidth,s=s||r.drawingBufferHeight,o=o||x;var c=0,l={framebuffer:u,attachments:[],width:A,height:s};return o.forEach(function(o){var u=o.attachment,h=o.format,f=i(h);if(f||(f=v+c++),!u)if(n(h))u=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,u),r.renderbufferStorage(r.RENDERBUFFER,h,A,s);else{var d=e.shallowCopy(o);d.width=A,d.height=s,d.auto=void 0===o.auto?!1:o.auto,u=t.createTexture(r,d)}if(u instanceof WebGLRenderbuffer)r.framebufferRenderbuffer(a,f,r.RENDERBUFFER,u);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";r.framebufferTexture2D(a,f,o.texTarget||r.TEXTURE_2D,u,o.level||0)}l.attachments.push(u)}),l}function o(e,i,n,r,o){r=r||e.drawingBufferWidth,o=o||e.drawingBufferHeight,i.width=r,i.height=o,n=n||x,n.forEach(function(n,A){var s=i.attachments[A],a=n.format;if(s instanceof WebGLRenderbuffer)e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,a,r,o);else{if(!(s instanceof WebGLTexture))throw"unknown attachment type";t.resizeTexture(e,s,n,r,o)}})}function A(t,e,i){i=i||t.FRAMEBUFFER,e?(t.bindFramebuffer(i,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(i,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}var s=5121,a=6402,u=6408,c=32854,l=32855,h=36194,f=33189,d=6401,g=36168,M=34041,v=36064,w=36096,m=36128,p=33306,I=33071,L=9729,x=[{format:u,type:s,min:L,wrap:I},{format:M}],D={};D[M]=p,D[d]=m,D[g]=m,D[a]=w,D[f]=w;var E={};return E[c]=!0,E[l]=!0,E[h]=!0,E[M]=!0,E[f]=!0,E[d]=!0,E[g]=!0,{bindFramebufferInfo:A,createFramebufferInfo:r,resizeFramebufferInfo:o}}),i("twgl/twgl",["./attributes","./draw","./framebuffers","./programs","./textures","./typedarrays"],function(t,e,i,n,r,o){function A(e){t.setDefaults_(e),r.setDefaults_(e)}function s(t,e){for(var i=["webgl","experimental-webgl"],n=null,r=0;r<i.length;++r){try{n=t.getContext(i[r],e)}catch(o){}if(n)break}return n}function a(t,e){var i=s(t,e);return i}function u(t,e){e=e||1,e=Math.max(1,e);var i=t.clientWidth*e|0,n=t.clientHeight*e|0;return t.width!==i||t.height!==n?(t.width=i,t.height=n,!0):!1}function c(t){return"_"!==t[t.length-1]}function l(t,e){Object.keys(t).filter(c).forEach(function(i){e[i]=t[i]})}var h={getWebGLContext:a,resizeCanvasToDisplaySize:u,setDefaults:A};return[t,e,i,n,r,o].forEach(function(t){l(t,h)}),h}),i("twgl/v3",[],function(){function t(t){M=t}function e(t,e,i){var n=new M(3);return t&&(n[0]=t),e&&(n[1]=e),i&&(n[2]=i),n}function i(t,e,i){return i=i||new M(3),i[0]=t[0]+e[0],i[1]=t[1]+e[1],i[2]=t[2]+e[2],i}function n(t,e,i){return i=i||new M(3),i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2],i}function r(t,e,i,n){return n=n||new M(3),n[0]=(1-i)*t[0]+i*e[0],n[1]=(1-i)*t[1]+i*e[1],n[2]=(1-i)*t[2]+i*e[2],n}function o(t,e,i){return i=i||new M(3),i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e,i}function A(t,e,i){return i=i||new M(3),i[0]=t[0]/e,i[1]=t[1]/e,i[2]=t[2]/e,i}function s(t,e,i){return i=i||new M(3),i[0]=t[1]*e[2]-t[2]*e[1],i[1]=t[2]*e[0]-t[0]*e[2],i[2]=t[0]*e[1]-t[1]*e[0],i}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function u(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function c(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function l(t,e){e=e||new M(3);var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=Math.sqrt(i);return n>1e-5?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=0,e[1]=0,e[2]=0),e}function h(t,e){return e=e||new M(3),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function f(t,e){return e=e||new M(3),e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function d(t,e,i){return i=i||new M(3),i[0]=t[0]*e[0],i[1]=t[1]*e[1],i[2]=t[2]*e[2],i}function g(t,e,i){return i=i||new M(3),i[0]=t[0]/e[0],i[1]=t[1]/e[1],i[2]=t[2]/e[2],i}var M=Float32Array;return{add:i,copy:f,create:e,cross:s,divide:g,divScalar:A,dot:a,lerp:r,length:u,lengthSq:c,mulScalar:o,multiply:d,negate:h,normalize:l,setDefaultType:t,subtract:n}}),i("twgl/m4",["./v3"],function(t){function e(t){VecType=t}function i(t,e){return e=e||new S(16),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e}function n(t,e){return e=e||new S(16),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function r(t){return t=t||new S(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,e){if(e=e||new S(16),e===t){var i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,e}var n=t[0],r=t[1],o=t[2],A=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],g=t[12],M=t[13],v=t[14],w=t[15];return e[0]=n,e[1]=s,e[2]=l,e[3]=g,e[4]=r,e[5]=a,e[6]=h,e[7]=M,e[8]=o,e[9]=u,e[10]=f,e[11]=v,e[12]=A,e[13]=c,e[14]=d,e[15]=w,e}function A(t,e){e=e||new S(16);var i=t[0],n=t[1],r=t[2],o=t[3],A=t[4],s=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],g=t[13],M=t[14],v=t[15],w=h*v,m=M*f,p=a*v,I=M*u,L=a*f,x=h*u,D=r*v,E=M*o,C=r*f,T=h*o,y=r*u,N=a*o,j=c*g,R=d*l,b=A*g,B=d*s,k=A*l,U=c*s,z=i*g,P=d*n,Q=i*l,V=c*n,G=i*s,F=A*n,O=w*s+I*l+L*g-(m*s+p*l+x*g),Z=m*n+D*l+T*g-(w*n+E*l+C*g),W=p*n+E*s+y*g-(I*n+D*s+N*g),_=x*n+C*s+N*l-(L*n+T*s+y*l),Y=1/(i*O+A*Z+c*W+d*_);return e[0]=Y*O,e[1]=Y*Z,e[2]=Y*W,e[3]=Y*_,e[4]=Y*(m*A+p*c+x*d-(w*A+I*c+L*d)),e[5]=Y*(w*i+E*c+C*d-(m*i+D*c+T*d)),e[6]=Y*(I*i+D*A+N*d-(p*i+E*A+y*d)),e[7]=Y*(L*i+T*A+y*c-(x*i+C*A+N*c)),e[8]=Y*(j*u+B*f+k*v-(R*u+b*f+U*v)),e[9]=Y*(R*o+z*f+V*v-(j*o+P*f+Q*v)),e[10]=Y*(b*o+P*u+G*v-(B*o+z*u+F*v)),e[11]=Y*(U*o+Q*u+F*f-(k*o+V*u+G*f)),e[12]=Y*(b*h+U*M+R*a-(k*M+j*a+B*h)),e[13]=Y*(Q*M+j*r+P*h-(z*h+V*M+R*r)),e[14]=Y*(z*a+F*M+B*r-(G*M+b*r+P*a)),e[15]=Y*(G*h+k*r+V*a-(Q*a+F*h+U*r)),e}function s(t,e,i){i=i||new S(16);var n=t[0],r=t[1],o=t[2],A=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],g=t[12],M=t[13],v=t[14],w=t[15],m=e[0],p=e[1],I=e[2],L=e[3],x=e[4],D=e[5],E=e[6],C=e[7],T=e[8],y=e[9],N=e[10],j=e[11],R=e[12],b=e[13],B=e[14],k=e[15];return i[0]=n*m+r*x+o*T+A*R,i[1]=n*p+r*D+o*y+A*b,i[2]=n*I+r*E+o*N+A*B,i[3]=n*L+r*C+o*j+A*k,i[4]=s*m+a*x+u*T+c*R,i[5]=s*p+a*D+u*y+c*b,i[6]=s*I+a*E+u*N+c*B,i[7]=s*L+a*C+u*j+c*k,i[8]=l*m+h*x+f*T+d*R,i[9]=l*p+h*D+f*y+d*b,i[10]=l*I+h*E+f*N+d*B,i[11]=l*L+h*C+f*j+d*k,i[12]=g*m+M*x+v*T+w*R,i[13]=g*p+M*D+v*y+w*b,i[14]=g*I+M*E+v*N+w*B,i[15]=g*L+M*C+v*j+w*k,i}function a(t,e,i){return i=i||r(),t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11]),i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}function u(e,i){return i=i||t.create(),i[0]=e[12],i[1]=e[13],i[2]=e[14],i}function c(e,i,n){n=n||t.create();var r=4*i;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n}function l(t,e,i,n,r){r=r||new S(16);var o=Math.tan(.5*Math.PI-.5*t),A=1/(i-n);return r[0]=o/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(i+n)*A,r[11]=-1,r[12]=0,r[13]=0,r[14]=i*n*A*2,r[15]=0,r}function h(t,e,i,n,r,o,A){return A=A||new S(16),A[0]=2/(e-t),A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=2/(n-i),A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=-1/(o-r),A[11]=0,A[12]=(e+t)/(t-e),A[13]=(n+i)/(i-n),A[14]=-r/(r-o),A[15]=1,A}function f(t,e,i,n,r,o,A){A=A||new S(16);var s=e-t,a=n-i,u=r-o;return A[0]=2*r/s,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=2*r/a,A[6]=0,A[7]=0,A[8]=(t+e)/s,A[9]=(n+i)/a,A[10]=o/u,A[11]=-1,A[12]=0,A[13]=0,A[14]=r*o/u,A[15]=0,A}function d(e,i,n,r){r=r||new S(16);var o=j,A=R,s=b;return t.normalize(t.subtract(e,i,s),s),t.normalize(t.cross(n,s,o),o),t.normalize(t.cross(s,o,A),A),r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=0,r[4]=A[0],r[5]=A[1],r[6]=A[2],r[7]=0,r[8]=s[0],r[9]=s[1],r[10]=s[2],r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function g(t,e){return e=e||new S(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function M(t,e,i){i=i||new S(16);var n=e[0],r=e[1],o=e[2],A=t[0],s=t[1],a=t[2],u=t[3],c=t[4],l=t[5],h=t[6],f=t[7],d=t[8],g=t[9],M=t[10],v=t[11],w=t[12],m=t[13],p=t[14],I=t[15];return t!==i&&(i[0]=A,i[1]=s,i[2]=a,i[3]=u,i[4]=c,i[5]=l,i[6]=h,i[7]=f,i[8]=d,i[9]=g,i[10]=M,i[11]=v),i[12]=A*n+c*r+d*o+w,i[13]=s*n+l*r+g*o+m,i[14]=a*n+h*r+M*o+p,i[15]=u*n+f*r+v*o+I,i}function v(t,e){e=e||new S(16);var i=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(t,e,i){i=i||new S(16);var n=t[4],r=t[5],o=t[6],A=t[7],s=t[8],a=t[9],u=t[10],c=t[11],l=Math.cos(e),h=Math.sin(e);return i[4]=l*n+h*s,i[5]=l*r+h*a,i[6]=l*o+h*u,i[7]=l*A+h*c,i[8]=l*s-h*n,i[9]=l*a-h*r,i[10]=l*u-h*o,i[11]=l*c-h*A,t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}function m(t,e){e=e||new S(16);var i=Math.cos(t),n=Math.sin(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(t,e,i){i=i||new S(16);var n=t[0],r=t[1],o=t[2],A=t[3],s=t[8],a=t[9],u=t[10],c=t[11],l=Math.cos(e),h=Math.sin(e);return i[0]=l*n-h*s,i[1]=l*r-h*a,i[2]=l*o-h*u,i[3]=l*A-h*c,i[8]=l*s+h*n,i[9]=l*a+h*r,i[10]=l*u+h*o,i[11]=l*c+h*A,t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}function I(t,e){e=e||new S(16);var i=Math.cos(t),n=Math.sin(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(t,e,i){i=i||new S(16);var n=t[0],r=t[1],o=t[2],A=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=Math.cos(e),h=Math.sin(e);return i[0]=l*n+h*s,i[1]=l*r+h*a,i[2]=l*o+h*u,i[3]=l*A+h*c,i[4]=l*s-h*n,i[5]=l*a-h*r,i[6]=l*u-h*o,i[7]=l*c-h*A,t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}function x(t,e,i){i=i||new S(16);var n=t[0],r=t[1],o=t[2],A=Math.sqrt(n*n+r*r+o*o);n/=A,r/=A,o/=A;var s=n*n,a=r*r,u=o*o,c=Math.cos(e),l=Math.sin(e),h=1-c;return i[0]=s+(1-s)*c,i[1]=n*r*h+o*l,i[2]=n*o*h-r*l,i[3]=0,i[4]=n*r*h-o*l,i[5]=a+(1-a)*c,i[6]=r*o*h+n*l,i[7]=0,i[8]=n*o*h+r*l,i[9]=r*o*h-n*l,i[10]=u+(1-u)*c,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function D(t,e,i,n){n=n||new S(16);var r=e[0],o=e[1],A=e[2],s=Math.sqrt(r*r+o*o+A*A);r/=s,o/=s,A/=s;var a=r*r,u=o*o,c=A*A,l=Math.cos(i),h=Math.sin(i),f=1-l,d=a+(1-a)*l,g=r*o*f+A*h,M=r*A*f-o*h,v=r*o*f-A*h,w=u+(1-u)*l,m=o*A*f+r*h,p=r*A*f+o*h,I=o*A*f-r*h,L=c+(1-c)*l,x=t[0],D=t[1],E=t[2],C=t[3],T=t[4],y=t[5],N=t[6],j=t[7],R=t[8],b=t[9],B=t[10],k=t[11];return n[0]=d*x+g*T+M*R,n[1]=d*D+g*y+M*b,n[2]=d*E+g*N+M*B,n[3]=d*C+g*j+M*k,n[4]=v*x+w*T+m*R,n[5]=v*D+w*y+m*b,n[6]=v*E+w*N+m*B,n[7]=v*C+w*j+m*k,n[8]=p*x+I*T+L*R,n[9]=p*D+I*y+L*b,n[10]=p*E+I*N+L*B,n[11]=p*C+I*j+L*k,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n}function E(t,e){return e=e||new S(16),e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function C(t,e,i){i=i||new S(16);var n=e[0],r=e[1],o=e[2];return i[0]=n*t[0],i[1]=n*t[1],i[2]=n*t[2],i[3]=n*t[3],i[4]=r*t[4],i[5]=r*t[5],i[6]=r*t[6],i[7]=r*t[7],i[8]=o*t[8],i[9]=o*t[9],i[10]=o*t[10],i[11]=o*t[11],t!==i&&(i[12]=t[12],
i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}function T(e,i,n){n=n||t.create();var r=i[0],o=i[1],A=i[2],s=r*e[3]+o*e[7]+A*e[11]+e[15];return n[0]=(r*e[0]+o*e[4]+A*e[8]+e[12])/s,n[1]=(r*e[1]+o*e[5]+A*e[9]+e[13])/s,n[2]=(r*e[2]+o*e[6]+A*e[10]+e[14])/s,n}function y(e,i,n){n=n||t.create();var r=i[0],o=i[1],A=i[2];return n[0]=r*e[0]+o*e[4]+A*e[8],n[1]=r*e[1]+o*e[5]+A*e[9],n[2]=r*e[2]+o*e[6]+A*e[10],n}function N(e,i,n){n=n||t.create();var r=A(e),o=i[0],s=i[1],a=i[2];return n[0]=o*r[0]+s*r[1]+a*r[2],n[1]=o*r[4]+s*r[5]+a*r[6],n[2]=o*r[8]+s*r[9]+a*r[10],n}var S=Float32Array,j=t.create(),R=t.create(),b=t.create();return{axisRotate:D,axisRotation:x,create:r,copy:n,frustum:f,getAxis:c,getTranslation:u,identity:r,inverse:A,lookAt:d,multiply:s,negate:i,ortho:h,perspective:l,rotateX:w,rotateY:p,rotateZ:L,rotateAxis:D,rotationX:v,rotationY:m,rotationZ:I,scale:C,scaling:E,setDefaultType:e,setTranslation:a,transformDirection:y,transformNormal:N,transformPoint:T,translate:M,translation:g,transpose:o}}),i("twgl/primitives",["./twgl","./m4","./v3"],function(t,e,i){function n(t,e){var i=0;return t.push=function(){for(var e=0;e<arguments.length;++e){var n=arguments[e];if(n instanceof Array||n.buffer&&n.buffer instanceof ArrayBuffer)for(var r=0;r<n.length;++r)t[i++]=n[r];else t[i++]=n}},t.reset=function(t){i=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function r(t,e,i){var r=i||Float32Array;return n(new r(t*e),t)}function o(t){return"indices"!==t}function A(t){function e(e){for(var o=t[e],s=o.numComponents,a=r(s,A,o.constructor),u=0;A>u;++u)for(var c=i[u],l=c*s,h=0;s>h;++h)a.push(o[l+h]);n[e]=a}var i=t.indices,n={},A=i.length;return Object.keys(t).filter(o).forEach(e),n}function s(t){if(t.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var e=t.normal,i=e.length,n=0;i>n;n+=9){var r=e[n+0],o=e[n+1],A=e[n+2],s=e[n+3],a=e[n+4],u=e[n+5],c=e[n+6],l=e[n+7],h=e[n+8],f=r+s+c,d=o+a+l,g=A+u+h,M=Math.sqrt(f*f+d*d+g*g);f/=M,d/=M,g/=M,e[n+0]=f,e[n+1]=d,e[n+2]=g,e[n+3]=f,e[n+4]=d,e[n+5]=g,e[n+6]=f,e[n+7]=d,e[n+8]=g}return t}function a(t,e,i){for(var n=t.length,r=new Float32Array(3),o=0;n>o;o+=3)i(e,[t[o],t[o+1],t[o+2]],r),t[o]=r[0],t[o+1]=r[1],t[o+2]=r[2]}function u(t,e,n){n=n||i.create();var r=e[0],o=e[1],A=e[2];return n[0]=r*t[0]+o*t[1]+A*t[2],n[1]=r*t[4]+o*t[5]+A*t[6],n[2]=r*t[8]+o*t[9]+A*t[10],n}function c(t,i){return a(t,i,e.transformDirection),t}function l(t,i){return a(t,e.inverse(i),u),t}function h(t,i){return a(t,i,e.transformPoint),t}function f(t,e){return Object.keys(t).forEach(function(i){var n=t[i];i.indexOf("pos")>=0?h(n,e):i.indexOf("tan")>=0||i.indexOf("binorm")>=0?c(n,e):i.indexOf("norm")>=0&&l(n,e)}),t}function d(t,e,i){return t=t||2,e=e||0,i=i||0,t*=.5,{position:{numComponents:2,data:[e+-1*t,i+-1*t,e+1*t,i+-1*t,e+-1*t,i+1*t,e+1*t,i+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function g(t,i,n,o,A){t=t||1,i=i||1,n=n||1,o=o||1,A=A||e.identity();for(var s=(n+1)*(o+1),a=r(3,s),u=r(3,s),c=r(2,s),l=0;o>=l;l++)for(var h=0;n>=h;h++){var d=h/n,g=l/o;a.push(t*d-.5*t,0,i*g-.5*i),u.push(0,1,0),c.push(d,g)}for(var M=n+1,v=r(3,n*o*2,Uint16Array),l=0;o>l;l++)for(var h=0;n>h;h++)v.push((l+0)*M+h,(l+1)*M+h,(l+0)*M+h+1),v.push((l+1)*M+h,(l+1)*M+h+1,(l+0)*M+h+1);var w=f({position:a,normal:u,texcoord:c,indices:v},A);return w}function M(t,e,i,n,o,A,s){if(0>=e||0>=i)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||Math.PI,A=A||0,s=s||2*Math.PI;for(var a=o-n,u=s-A,c=(e+1)*(i+1),l=r(3,c),h=r(3,c),f=r(2,c),d=0;i>=d;d++)for(var g=0;e>=g;g++){var M=g/e,v=d/i,w=u*M,m=a*v,p=Math.sin(w),I=Math.cos(w),L=Math.sin(m),x=Math.cos(m),D=I*L,E=x,C=p*L;l.push(t*D,t*E,t*C),h.push(D,E,C),f.push(1-M,v)}for(var T=e+1,y=r(3,e*i*2,Uint16Array),g=0;e>g;g++)for(var d=0;i>d;d++)y.push((d+0)*T+g,(d+0)*T+g+1,(d+1)*T+g),y.push((d+1)*T+g,(d+0)*T+g+1,(d+1)*T+g+1);return{position:l,normal:h,texcoord:f,indices:y}}function v(t){t=t||1;for(var e=t/2,i=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],A=24,s=r(3,A),a=r(3,A),u=r(2,A),c=r(3,12,Uint16Array),l=0;6>l;++l){for(var h=N[l],f=0;4>f;++f){var d=i[h[f]],g=n[l],M=o[f];s.push(d),a.push(g),u.push(M)}var v=4*l;c.push(v+0,v+1,v+2),c.push(v+0,v+2,v+3)}return{position:s,normal:a,texcoord:u,indices:c}}function w(t,e,i,n,o,A,s){if(3>n)throw Error("radialSubdivisions must be 3 or greater");if(1>o)throw Error("verticalSubdivisions must be 1 or greater");for(var a=void 0===A?!0:A,u=void 0===s?!0:s,c=(a?2:0)+(u?2:0),l=(n+1)*(o+1+c),h=r(3,l),f=r(3,l),d=r(2,l),g=r(3,n*(o+c)*2,Uint16Array),M=n+1,v=Math.atan2(t-e,i),w=Math.cos(v),m=Math.sin(v),p=a?-2:0,I=o+(u?2:0),L=p;I>=L;++L){var x,D=L/o,E=i*D;0>L?(E=0,D=1,x=t):L>o?(E=i,D=1,x=e):x=t+(e-t)*(L/o),(-2===L||L===o+2)&&(x=0,D=0),E-=i/2;for(var C=0;M>C;++C){var T=Math.sin(C*Math.PI*2/n),y=Math.cos(C*Math.PI*2/n);h.push(T*x,E,y*x),f.push(0>L||L>o?0:T*w,0>L?-1:L>o?1:m,0>L||L>o?0:y*w),d.push(C/n,1-D)}}for(var L=0;o+c>L;++L)for(var C=0;n>C;++C)g.push(M*(L+0)+0+C,M*(L+0)+1+C,M*(L+1)+1+C),g.push(M*(L+0)+0+C,M*(L+1)+1+C,M*(L+1)+0+C);return{position:h,normal:f,texcoord:d,indices:g}}function m(t,e){e=e||[];for(var i=[],n=0;n<t.length;n+=4){var r=t[n],o=t.slice(n+1,n+4);o.push.apply(o,e);for(var A=0;r>A;++A)i.push.apply(i,o)}return i}function p(){var t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],i=m([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=m([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),o=t.length/3,A={position:r(3,o),texcoord:r(2,o),normal:r(3,o),color:r(4,o,Uint8Array),indices:r(3,o/3,Uint16Array)};A.position.push(t),A.texcoord.push(e),A.normal.push(i),A.color.push(n);for(var s=0;o>s;++s)A.indices.push(s);return A}function I(t,e,n,o,A,s,a){function u(t,e,i){return t+(e-t)*i}function c(e,n,r,a,c,l){for(var d=0;A>=d;d++){var w=n/(h-1),m=d/A,p=2*(w-.5),I=(s+m*f)*Math.PI,L=Math.sin(I),x=Math.cos(I),D=u(t,e,L),E=p*o,C=x*t,T=L*D;g.push(E,C,T);var y=i.add(i.multiply([0,L,x],r),a);M.push(y),v.push(w*c+l,m)}}function l(t,e){for(var i=0;A>i;++i)p.push(t+i+0,t+i+1,e+i+0),p.push(t+i+1,e+i+1,e+i+0)}if(0>=A)throw Error("subdivisionDown must be > 0");s=s||0,a=a||1;for(var h=2,f=a-s,d=2*(A+1)*(2+h),g=r(3,d),M=r(3,d),v=r(2,d),w=0;h>w;w++){var m=2*(w/(h-1)-.5);c(e,w,[1,1,1],[0,0,0],1,0),c(e,w,[0,0,0],[m,0,0],0,0),c(n,w,[1,1,1],[0,0,0],1,0),c(n,w,[0,0,0],[m,0,0],0,1)}var p=r(3,2*A*(2+h),Uint16Array),I=A+1;return l(0*I,4*I),l(5*I,7*I),l(6*I,2*I),l(3*I,1*I),{position:g,normal:M,texcoord:v,indices:p}}function L(t,e,i,n,r,o){return w(t,t,e,i,n,r,o)}function x(t,e,i,n,o,A){if(3>i)throw Error("radialSubdivisions must be 3 or greater");if(3>n)throw Error("verticalSubdivisions must be 3 or greater");o=o||0,A=A||2*Math.PI,range=A-o;for(var s=i+1,a=n+1,u=s*a,c=r(3,u),l=r(3,u),h=r(2,u),f=r(3,i*n*2,Uint16Array),d=0;a>d;++d)for(var g=d/n,M=g*Math.PI*2,v=Math.sin(M),w=t+v*e,m=Math.cos(M),p=m*e,I=0;s>I;++I){var L=I/i,x=o+L*range,D=Math.sin(x),E=Math.cos(x),C=D*w,T=E*w,y=D*v,N=E*v;c.push(C,p,T),l.push(y,m,N),h.push(L,1-g)}for(var d=0;n>d;++d)for(var I=0;i>I;++I){var S=1+I,j=1+d;f.push(s*d+I,s*j+I,s*d+S),f.push(s*j+I,s*j+S,s*d+S)}return{position:c,normal:l,texcoord:h,indices:f}}function D(t,e,i,n,o){if(3>e)throw Error("divisions must be at least 3");i=i?i:1,o=o?o:1,n=n?n:0;for(var A=(e+1)*(i+1),s=r(3,A),a=r(3,A),u=r(2,A),c=r(3,i*e*2,Uint16Array),l=0,h=t-n,f=0;i>=f;++f){for(var d=n+h*Math.pow(f/i,o),g=0;e>=g;++g){var M=2*Math.PI*g/e,v=d*Math.cos(M),w=d*Math.sin(M);if(s.push(v,0,w),a.push(0,1,0),u.push(1-g/e,f/i),f>0&&g!==e){var m=l+(g+1),p=l+g,I=l+g-e,L=l+(g+1)-e;c.push(m,p,I),c.push(m,I,L)}}l+=e+1}return{position:s,normal:a,texcoord:u,indices:c}}function E(t){return Math.random()*t|0}function C(t,e){e=e||{};var i=t.position.numElements,n=r(4,i,Uint8Array),o=e.rand||function(t,e){return 3>e?E(256):255};if(t.color=n,t.indices)for(var A=0;i>A;++A)n.push(o(A,0),o(A,1),o(A,2),o(A,3));else for(var s=e.vertsPerColor||3,a=i/s,A=0;a>A;++A)for(var u=[o(A,0),o(A,1),o(A,2),o(A,3)],c=0;s>c;++c)n.push(u);return t}function T(e){return function(i){var n=e.apply(this,Array.prototype.slice.call(arguments,1));return t.createBuffersFromArrays(i,n)}}function y(e){return function(i){var n=e.apply(null,Array.prototype.slice.call(arguments,1));return t.createBufferInfoFromArrays(i,n)}}var N=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];return{create3DFBufferInfo:y(p),create3DFBuffers:T(p),create3DFVertices:p,createAugmentedTypedArray:r,createCubeBufferInfo:y(v),createCubeBuffers:T(v),createCubeVertices:v,createPlaneBufferInfo:y(g),createPlaneBuffers:T(g),createPlaneVertices:g,createSphereBufferInfo:y(M),createSphereBuffers:T(M),createSphereVertices:M,createTruncatedConeBufferInfo:y(w),createTruncatedConeBuffers:T(w),createTruncatedConeVertices:w,createXYQuadBufferInfo:y(d),createXYQuadBuffers:T(d),createXYQuadVertices:d,createCresentBufferInfo:y(I),createCresentBuffers:T(I),createCresentVertices:I,createCylinderBufferInfo:y(L),createCylinderBuffers:T(L),createCylinderVertices:L,createTorusBufferInfo:y(x),createTorusBuffers:T(x),createTorusVertices:x,createDiscBufferInfo:y(D),createDiscBuffers:T(D),createDiscVertices:D,deindexVertices:A,flattenNormals:s,makeRandomVertexColors:C,reorientDirections:c,reorientNormals:l,reorientPositions:h,reorientVertices:f}}),i("main",["twgl/twgl","twgl/m4","twgl/v3","twgl/primitives"],function(t,e,i,n){return t.m4=e,t.v3=i,t.primitives=n,t}),e(["main"],function(t){return t},void 0,!0),i("build/js/twgl-includer-full",function(){}),e("main")})},{}],4:[function(t,e,i){function n(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=A("video/mp4","AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B"),t.play())},this.release=function(){t.pause(),t.src=""}}function r(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}function o(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?r:n}var A=function(t,e){return"data:"+t+";base64,"+e};e.exports=o()},{}],5:[function(t,e,i){function n(t,e,i,n,r,o){t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+r-o),t.quadraticCurveTo(e+n,i+r,e+n-o,i+r),t.lineTo(e+o,i+r),t.quadraticCurveTo(e,i+r,e,i+r-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath(),t.fill(),t.stroke()}function r(){this.gl=null,this.glTex=null,this.backupTex=null,this.vrTextureDescription=null,this.canvas=null,this.ctx=null}VRTextureDescription=t("./VRTextureDescription.js");var o=t("../js-ext/twgl-full.js");r.prototype.initBase=function(t){this.vrTextureDescription=new VRTextureDescription,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.canvas.width=2048,this.ctx.canvas.height=2048,this.gl=t},r.prototype.teardown=function(){},r.prototype.updateBase=function(){null!=this.gl&&(null!=this.glTex&&this.gl.deleteTexture(this.glTex),this.glTex=o.createTexture(this.gl,{min:this.gl.LINEAR,mag:this.gl.LINEAR,src:this.ctx.canvas}))},VRCanvasSpinner=function(){},VRCanvasSpinner.prototype=new r,VRCanvasSpinner.prototype.init=function(t){this.initBase(t)},VRCanvasSpinner.prototype.update=function(t){this.ctx.fillStyle="#00f",this.ctx.strokeStyle="#ff0",this.ctx.lineWidth="10",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.beginPath(),this.ctx.arc(this.ctx.canvas.width/2,this.ctx.canvas.height/2,this.ctx.canvas.width/2.2*Math.abs(Math.cos(t)),0,2*Math.PI),this.ctx.stroke(),this.updateBase()},VRCanvasTextBox=function(){},VRCanvasTextBox.prototype=new r,VRCanvasTextBox.prototype.init=function(t,e,i,r){this.initBase(t);var o=r.hasOwnProperty("fontface")?r.fontface:"Arial",A=r.hasOwnProperty("fontsize")?r.fontsize:12,s=r.hasOwnProperty("borderThickness")?r.borderThickness:4,a=r.hasOwnProperty("borderColor")?r.borderColor:{r:0,g:0,b:0,a:.7},u=r.hasOwnProperty("backgroundColor")?r.backgroundColor:{r:255,g:255,b:255,a:.7};this.ctx.font="Bold "+A+"px "+o;var c=1.4,l=this.ctx.measureText(e),h=l.width;this.ctx.canvas.width=h+2*s,this.ctx.canvas.height=A*c+2*s,this.ctx.fillStyle="rgba("+u.r+","+u.g+","+u.b+","+u.a+")",this.ctx.strokeStyle="rgba("+a.r+","+a.g+","+a.b+","+a.a+")",this.ctx.lineWidth=s,n(this.ctx,s/2,s/2,h+s,A*c+s,6),this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.font="Bold "+A+"px "+o,this.ctx.textAlign="start",this.ctx.fillText(e,s,A+s);var f=this.ctx.canvas.width,d=this.ctx.canvas.height;this.vrTextureDescription.sphereFOV=[i,d*i/f]},VRCanvasTextBox.prototype.update=function(t){this.updateBase()},VRCanvasFactoryCore=function(){this.createCanvasSpinner=function(){return new VRCanvasSpinner},this.createCanvasTextBox=function(){return new VRCanvasTextBox}};var A=function(){function t(){var t=new VRCanvasFactoryCore;return t}var e;return{getInstance:function(){return e||(e=t()),e}}}();e.exports=A.getInstance()},{"../js-ext/twgl-full.js":3,"./VRTextureDescription.js":22}],6:[function(t,e,i){function n(){this.eulerX=0,this.eulerY=0,this.eulerZ=0,this.baseMat=twgl.m4.identity()}twgl=t("../js-ext/twgl-full.js");var r=t("./VRUtil.js"),o=new r,A=t("./VRRotMath.js"),s=new A;n.prototype.updateBase=function(t){var e=twgl.m4.identity();twgl.m4.copy(e,t),twgl.m4.rotateX(t,Math.PI/2,t),twgl.m4.rotateZ(t,Math.PI/2,t),twgl.m4.rotateX(t,Math.PI,t),twgl.m4.rotateX(t,this.eulerX,t),twgl.m4.rotateY(t,this.eulerY,t),twgl.m4.rotateZ(t,this.eulerZ,t)},n.prototype.setEuler=function(t,e,i){this.eulerX=t,this.eulerY=e,this.eulerZ=i},n.prototype.getEuler=function(){return[this.eulerX,this.eulerY,this.eulerZ]},VRIdleSpinner=function(){},VRIdleSpinner.prototype=new n,VRIdleSpinner.prototype.update=function(t){this.setEuler(0,this.eulerZ-.01,0),this.updateBase(t)};var a=function(){function t(){var t=new VRIdleSpinner;return t}var e;return{getInstance:function(){return e||(e=t()),e}}}();VRMouseSpinner=function(){},VRMouseSpinner.prototype=new n,VRMouseSpinner.prototype.mouseMove=function(t,e){this.eulerY=this.eulerY+.01*e,this.eulerZ=this.eulerZ-.01*t},VRMouseSpinner.prototype.update=function(t){this.updateBase(t)},VRGyroSpinner=function(){this.deviceOrientation=null,this.screenOrientation=window.orientation,window.addEventListener("deviceorientation",this.onDeviceOrientationChange_.bind(this)),window.addEventListener("orientationchange",this.onScreenOrientationChange_.bind(this)),this.baseRotation=twgl.m4.identity(),this.screenTransform=twgl.m4.identity(),this.yawOffset=0,this.init=!1},VRGyroSpinner.prototype=new n,VRGyroSpinner.prototype.onDeviceOrientationChange_=function(t){this.deviceOrientation=t},VRGyroSpinner.prototype.onScreenOrientationChange_=function(t){this.screenOrientation=window.orientation},VRGyroSpinner.prototype.setYawOffset=function(t){this.yawOffset=t},VRGyroSpinner.prototype.update=function(t){if(null!=this.deviceOrientation){var e=s.gyroToMat(this.deviceOrientation.alpha,this.deviceOrientation.beta,this.deviceOrientation.gamma,this.screenOrientation,this.yawOffset);twgl.m4.copy(e,t);var i=s.matToEuler(e);this.eulerX=i[0],this.eulerY=i[1],this.eulerZ=i[2]}},VRGyroSpinner.prototype.isMobile=function(){return o.isMobile()},mobileAndTabletcheck=function(){};var u=function(){function t(){var t=new VRGyroSpinner;return t}var e;return{getInstance:function(){return e||(e=t()),e}}}();VRLookMode={MOUSE:0,IDLESPINNER:1,GYRO:2},VRLookController=function(){var t=this;this.angle=0,this.vrMouseSpinner=new VRMouseSpinner,this.vrIdleSpinner=a.getInstance(),this.vrGyroSpinner=u.getInstance(),this.camera=null,this.mode=VRLookMode.MOUSE,this.euler=[0,0,0],this.setCamera=function(e){t.camera=e},this.mouseMove=function(e,i){t.vrMouseSpinner.mouseMove(e,i)},this.checkModes=function(){this.vrGyroSpinner.isMobile()?this.mode=VRLookMode.GYRO:this.mode=VRLookMode.MOUSE},this.update=function(){switch(this.checkModes(),this.mode){case VRLookMode.MOUSE:this.vrMouseSpinner.update(this.camera),this.euler=this.vrMouseSpinner.getEuler();break;case VRLookMode.IDLESPINNER:this.vrIdleSpinner.update(this.camera),this.euler=this.vrIdleSpinner.getEuler();break;case VRLookMode.GYRO:this.vrGyroSpinner.update(this.camera),this.euler=this.vrGyroSpinner.getEuler()}},this.getHeading=function(){return this.mode==VRLookMode.GYRO?[(180*this.euler[0]/Math.PI+270)%360-180,180*this.euler[2]/Math.PI,-180*this.euler[1]/Math.PI+90]:[180*this.euler[2]/Math.PI,-180*this.euler[1]/Math.PI,180*this.euler[0]/Math.PI]},this.resetHeading=function(){if(this.mode==VRLookMode.GYRO){var t=(180*this.euler[0]/Math.PI+270)%360-180;this.vrGyroSpinner.setYawOffset(-1*Math.PI*t/180)}}},e.exports=VRLookController},{"../js-ext/twgl-full.js":3,"./VRRotMath.js":13,"./VRUtil.js":24}],7:[function(t,e,i){var n=t("./VRRenderModes.js"),r=t("./VRIcons.js");VRScreenWidths={Nexus5:110,Nexus6:133,GalaxyS6:114,GalaxyNote4:125,LGG3:121,iPhone4:75,iPhone5:89,iPhone6:104,iPhone6p:112};var o=function(t,e){return.05*(.5*e-.25*t)/(.25*t)};VRDevices={FULLSCREEN:{name:"Fullscreen",renderMode:n.MONOCULAR,icon:r.logoFullscreen,hfov:60,ipdAdjust:0,k:[0,0]},ANAGLYPH:{name:"Red-blue glasses",renderMode:n.STEREOANAGLYPH,icon:r.logoAnaglyph,hfov:60,ipdAdjust:0,k:[0,0]},CARDBOARDV1:{name:"Google Cardboard v1 (2014)",renderMode:n.STEREOSIDEBYSIDE,icon:r.logoCardboard,hfov:40,ipdAdjust:o(VRScreenWidths.iPhone5,64),k:[.441,.156]},CARDBOARDV2:{name:"Google Cardboard v2 (2015)",renderMode:n.STEREOSIDEBYSIDE,icon:r.logoCardboard,hfov:60,ipdAdjust:o(VRScreenWidths.iPhone6p,64),k:[.34,.55]},GEARVR2015:{name:"Samsung Gear VR",renderMode:n.STEREOSIDEBYSIDE,icon:r.logoCardboard,hfov:90,ipdAdjust:o(VRScreenWidths.GalaxyS6,60),k:[.215,.215]},ZEISSVRONE:{name:"Zeiss VR ONE",renderMode:n.STEREOSIDEBYSIDE,icon:r.logoCardboard,hfov:90,ipdAdjust:o(VRScreenWidths.iPhone6,60),k:[.093,.018]}},VRDeviceManager=function(){this.version="0.1",this.currentDeviceName="ANAGLYPH",this.currentDevice=VRDevices[this.currentDeviceName],this.windowedDevice=VRDevices.FULLSCREEN,this.init=function(){var t=this.version+"_VRDEVICEMANAGER",e=this.getCookie(t);""!=e?(this.currentDeviceName=e,this.currentDevice=VRDevices[this.currentDeviceName]):this.flushToCookie()},this.flushToCookie=function(){var t=this.version+"_VRDEVICEMANAGER";this.setCookie(t,this.currentDeviceName)},this.setCookie=function(t,e,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=t+"="+e+"; "+r},this.getCookie=function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},this.getDeviceList=function(){var t=[];for(var e in VRDevices)"length"!==e&&VRDevices.hasOwnProperty(e)&&t.push(e);return t},this.getDevice=function(t){return VRDevices[t]},this.setCurrentDevice=function(t){this.currentDeviceName=t,this.currentDevice=VRDevices[t],this.flushToCookie()},this.getCurrentDevice=function(){return this.currentDevice},this.getWindowedDevice=function(){return this.windowedDevice}};var A=function(){function t(){var t=new VRDeviceManager;return t.init(),t}var e;return{getInstance:function(){return e||(e=t()),e}}}();e.exports=A.getInstance()},{"./VRIcons.js":9,"./VRRenderModes.js":12}],8:[function(t,e,i){function n(t,e,i,n,r){var o=(t-e+i)%i,A=(n-e+i)%i,s=o-A;return s>0&&r>s?!0:!1}VRGuiTimer=function(){this.canvas=null,this.callback=null,this["in"]=!1,this.startTime=Number.MAX_VALUE,this.callbackFired=!1,this.timeout=1e3,this.init=function(t,e){this.canvas=t,this.callback=e},this.isInBoundingBox=function(t,e){var i=e.sphereCentre[0]-.5*e.sphereFOV[0];if(!n(t[0],-180,360,i,e.sphereFOV[0]))return!1;var r=e.sphereCentre[1]-.5*e.sphereFOV[1];return n(t[1],-90,180,r,e.sphereFOV[1])?!0:!1},this.update=function(t,e){if(null==this.callback)return 0;if(this.isInBoundingBox(t,this.canvas.vrTextureDescription)){if(0==this["in"])return this["in"]=!0,this.startTime=e,this.callbackFired=!1,0;var i=e-this.startTime;return i>this.timeout?(this.callbackFired||this.fireCallback(),0):i/this.timeout}return 1==this["in"],this["in"]=!1,this.startTime=Number.MAX_VALUE,this.callbackFired=!1,0},this.fireCallback=function(){this.callbackFired=!0,console.log("FIRING CALLBACK!"),this.callback()}},VRGui=function(){this.canvasSet=[],this.gl=null,this.init=function(t){this.gl=t},this.teardown=function(){for(texIt=0;texIt<this.canvasSet.length;texIt++)this.canvasSet[texIt][0].teardown();this.canvasSet=[]},this.update=function(t,e){var i=[t[0],1.2*t[1]],n=0;for(texIt=0;texIt<this.canvasSet.length;texIt++){var r=this.canvasSet[texIt][1].update(i,e);r>n&&(n=r)}return n},this.createTextBox=function(t,e,i,n,r,o){var A=VRCanvasFactory.createCanvasTextBox();A.init(this.gl,r,t,o),A.vrTextureDescription.sphereCentre=[e,i],A.update(self.tick);var s=new VRGuiTimer;s.init(A,n),this.canvasSet.push([A,s])}},e.exports=VRGui},{}],9:[function(t,e,i){var n=function(t,e){return"data:"+t+";base64,"+e};VRLogos={logoCardboard:n("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImNhcmRib2FyZF94NUZfcm91bmRlZCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayINCgkgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTQsNkMzLjQ1LDYsMyw2LjQ1LDMsN3YxMGMwLDAuNTUsMC40NSwxLDEsMWg0YzAuNTUsMCwxLjMxOC0wLjMxOCwxLjcwNy0wLjcwN2wxLjU4Ni0xLjU4Ng0KCQljMC4zODktMC4zODksMS4wMTYtMC4zOCwxLjM5NCwwLjAybDEuNDYxLDEuNTQ3QzE0LjUyNSwxNy42NzMsMTUuMjg0LDE4LDE1LjgzNCwxOEgyMGMwLjU1LDAsMS0wLjQ1LDEtMVY3YzAtMC41NS0wLjQ1LTEtMS0xSDR6DQoJCSBNNy41LDE1Yy0xLjY1NiwwLTMtMS4zNDQtMy0zczEuMzQ0LTMsMy0zczMsMS4zNDQsMywzUzkuMTU2LDE1LDcuNSwxNXogTTE2LjUsMTVjLTEuNjU2LDAtMy0xLjM0NC0zLTNzMS4zNDQtMywzLTNzMywxLjM0NCwzLDMNCgkJUzE4LjE1NiwxNSwxNi41LDE1eiIvPg0KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTQsNkMzLjQ1LDYsMyw2LjQ1LDMsN3YxMGMwLDAuNTUsMC40NSwxLDEsMWg0DQoJCWMwLjU1LDAsMS4zMTgtMC4zMTgsMS43MDctMC43MDdsMS41ODYtMS41ODZjMC4zODktMC4zODksMS4wMTYtMC4zOCwxLjM5NCwwLjAybDEuNDYxLDEuNTQ3QzE0LjUyNSwxNy42NzMsMTUuMjg0LDE4LDE1LjgzNCwxOEgyMA0KCQljMC41NSwwLDEtMC40NSwxLTFWN2MwLTAuNTUtMC40NS0xLTEtMUg0eiBNNy41LDE1Yy0xLjY1NiwwLTMtMS4zNDQtMy0zczEuMzQ0LTMsMy0zczMsMS4zNDQsMywzUzkuMTU2LDE1LDcuNSwxNXogTTE2LjUsMTUNCgkJYy0xLjY1NiwwLTMtMS4zNDQtMy0zczEuMzQ0LTMsMy0zczMsMS4zNDQsMywzUzE4LjE1NiwxNSwxNi41LDE1eiIvPg0KPC9nPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNOSwxMmMwLDAuODI5LTAuNjcxLDEuNS0xLjUsMS41Ii8+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xOCwxMmMwLDAuODI5LTAuNjcxLDEuNS0xLjUsMS41Ii8+DQo8L3N2Zz4NCg=="),logoFullscreen:n("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImZ1bGxzY3JlZW5fMV8iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzLDMgMyw5IDAsOSAwLDAgOSwwIDksMyAiLz4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzLDIxIDksMjEgOSwyNCAwLDI0IDAsMTUgMywxNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyMSwyMSAyMSwxNSAyNCwxNSAyNCwyNCAxNSwyNCAxNSwyMSANCgkiLz4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyMSwzIDE1LDMgMTUsMCAyNCwwIDI0LDkgMjEsOSAiLz4NCjwvc3ZnPg0K"),logoWindowed:n("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IndpbmRvd2VkXzFfIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiDQoJIHk9IjBweCIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iNiw2IDYsMCA5LDAgOSw5IDAsOSAwLDYgIi8+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iNiwxOCAwLDE4IDAsMTUgOSwxNSA5LDI0IDYsMjQgIi8+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iMTgsMTggMTgsMjQgMTUsMjQgMTUsMTUgMjQsMTUgMjQsMTggDQoJIi8+DQo8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC4yIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iMTgsNiAyNCw2IDI0LDkgMTUsOSAxNSwwIDE4LDAgIi8+DQo8L3N2Zz4NCg=="),
logoAnaglyph:n("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImFuYWdseXBoX3g1Rl9yb3VuZGVkIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIg0KCSB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cmVjdCB4PSI0LjUiIHk9IjEwLjUiIGZpbGw9IiMzNkE5RTEiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjYiIGhlaWdodD0iMyIvPg0KPHJlY3QgeD0iMTMuNSIgeT0iMTAuNSIgZmlsbD0iI0JFMTYyMiIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iNiIgaGVpZ2h0PSIzIi8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMy41LDcuNUMzLjIyNSw3LjUsMyw3LjcyNSwzLDh2OGMwLDAuMjc1LDAuMjI1LDAuNSwwLjUsMC41SDEwYzAuMjc1LDAsMC42NTktMC4xNTksMC44NTQtMC4zNTQNCgkJbDAuNzkzLTAuNzkzYzAuMTk0LTAuMTk0LDAuNTEzLTAuMTk0LDAuNzA3LDBsMC43OTMsMC43OTNDMTMuMzQxLDE2LjM0MSwxMy43MjUsMTYuNSwxNCwxNi41aDYuNWMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41VjgNCgkJYzAtMC4yNzUtMC4yMjUtMC41LTAuNS0wLjVIMy41eiBNMTAuNSwxM2MwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41SDVjLTAuMjc1LDAtMC41LTAuMjI1LTAuNS0wLjV2LTJjMC0wLjI3NSwwLjIyNS0wLjUsMC41LTAuNWg1DQoJCWMwLjI3NSwwLDAuNSwwLjIyNSwwLjUsMC41VjEzeiBNMTkuNSwxM2MwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41aC01Yy0wLjI3NSwwLTAuNS0wLjIyNS0wLjUtMC41di0yYzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVoNQ0KCQljMC4yNzUsMCwwLjUsMC4yMjUsMC41LDAuNVYxM3oiLz4NCgk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMxRDFEMUIiIHN0cm9rZS13aWR0aD0iMC41IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zLjUsNy41QzMuMjI1LDcuNSwzLDcuNzI1LDMsOHY4DQoJCWMwLDAuMjc1LDAuMjI1LDAuNSwwLjUsMC41SDEwYzAuMjc1LDAsMC42NTktMC4xNTksMC44NTQtMC4zNTRsMC43OTMtMC43OTNjMC4xOTQtMC4xOTQsMC41MTMtMC4xOTQsMC43MDcsMGwwLjc5MywwLjc5Mw0KCQlDMTMuMzQxLDE2LjM0MSwxMy43MjUsMTYuNSwxNCwxNi41aDYuNWMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41VjhjMC0wLjI3NS0wLjIyNS0wLjUtMC41LTAuNUgzLjV6IE0xMC41LDEzDQoJCWMwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41SDVjLTAuMjc1LDAtMC41LTAuMjI1LTAuNS0wLjV2LTJjMC0wLjI3NSwwLjIyNS0wLjUsMC41LTAuNWg1YzAuMjc1LDAsMC41LDAuMjI1LDAuNSwwLjVWMTN6IE0xOS41LDEzDQoJCWMwLDAuMjc1LTAuMjI1LDAuNS0wLjUsMC41aC01Yy0wLjI3NSwwLTAuNS0wLjIyNS0wLjUtMC41di0yYzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVoNWMwLjI3NSwwLDAuNSwwLjIyNSwwLjUsMC41VjEzeiIvPg0KPC9nPg0KPC9zdmc+DQo="),logoSettings:n("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9InNldHRpbmdzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTksMTMuNWMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41di0yYzAtMC4yNzUtMC4yMjUtMC41LTAuNS0wLjVoLTAuNjk2Yy0wLjI3NSwwLTAuNTcxLTAuMjEzLTAuNjU5LTAuNDc0DQoJCWwtMC4yNTctMC42MjJjLTAuMTIzLTAuMjQ2LTAuMDY0LTAuNjA2LDAuMTMtMC44MDFsMC40OTMtMC40OTNjMC4xOTQtMC4xOTQsMC4xOTQtMC41MTMsMC0wLjcwN0wxNi41OTcsNS45OQ0KCQljLTAuMTk0LTAuMTk0LTAuNTEzLTAuMTk0LTAuNzA3LDBsLTAuNDkzLDAuNDkzYy0wLjE5NCwwLjE5NC0wLjU1NSwwLjI1My0wLjgwMSwwLjEzbC0wLjYyMi0wLjI1Ng0KCQlDMTMuNzEzLDYuMjY5LDEzLjUsNS45NzIsMTMuNSw1LjY5N1Y1YzAtMC4yNzUtMC4yMjUtMC41LTAuNS0wLjVoLTJjLTAuMjc1LDAtMC41LDAuMjI1LTAuNSwwLjV2MC42OTcNCgkJYzAsMC4yNzUtMC4yMTMsMC41NzEtMC40NzQsMC42NTlMOS40MDQsNi42MTJjLTAuMjQ2LDAuMTIzLTAuNjA2LDAuMDY0LTAuODAxLTAuMTNMOC4xMTEsNS45ODljLTAuMTk0LTAuMTk0LTAuNTEzLTAuMTk0LTAuNzA3LDANCgkJTDUuOTksNy40MDNjLTAuMTk0LDAuMTk0LTAuMTk0LDAuNTEzLDAsMC43MDdsMC40OTMsMC40OTNjMC4xOTQsMC4xOTQsMC4yNTMsMC41NTUsMC4xMywwLjgwMWwtMC4yNTcsMC42MjMNCgkJQzYuMjY4LDEwLjI4Nyw1Ljk3MiwxMC41LDUuNjk3LDEwLjVINWMtMC4yNzUsMC0wLjUsMC4yMjUtMC41LDAuNXYyYzAsMC4yNzUsMC4yMjUsMC41LDAuNSwwLjVoMC42OTcNCgkJYzAuMjc1LDAsMC41NzEsMC4yMTMsMC42NTksMC40NzRsMC4yNTYsMC42MjJjMC4xMjMsMC4yNDYsMC4wNjQsMC42MDYtMC4xMywwLjgwMWwtMC40OTMsMC40OTJjLTAuMTk0LDAuMTk0LTAuMTk0LDAuNTEzLDAsMC43MDcNCgkJbDEuNDE0LDEuNDE0YzAuMTk0LDAuMTk0LDAuNTEzLDAuMTk0LDAuNzA3LDBsMC40OTItMC40OTJjMC4xOTQtMC4xOTQsMC41NTUtMC4yNTMsMC44MDEtMC4xM2wwLjYyMywwLjI1Nw0KCQljMC4yNjEsMC4wODgsMC40NzQsMC4zODQsMC40NzQsMC42NTlWMTljMCwwLjI3NSwwLjIyNSwwLjUsMC41LDAuNWgyYzAuMjc1LDAsMC41LTAuMjI1LDAuNS0wLjV2LTAuNjk2DQoJCWMwLTAuMjc1LDAuMjEzLTAuNTcxLDAuNDc0LTAuNjU5bDAuNjIyLTAuMjU2YzAuMjQ2LTAuMTIzLDAuNjA2LTAuMDY0LDAuODAxLDAuMTNsMC40OTIsMC40OTJjMC4xOTQsMC4xOTQsMC41MTMsMC4xOTQsMC43MDcsMA0KCQlsMS40MTQtMS40MTRjMC4xOTQtMC4xOTQsMC4xOTQtMC41MTMsMC0wLjcwN2wtMC40OTItMC40OTJjLTAuMTk0LTAuMTk0LTAuMjUzLTAuNTU1LTAuMTMtMC44MDFsMC4yNTctMC42MjMNCgkJYzAuMDg4LTAuMjYxLDAuMzg0LTAuNDc0LDAuNjU5LTAuNDc0SDE5eiBNMTIsMTMuNWMtMC44MjksMC0xLjUtMC42NzEtMS41LTEuNWMwLTAuODI4LDAuNjcxLTEuNSwxLjUtMS41czEuNSwwLjY3MSwxLjUsMS41DQoJCUMxMy41LDEyLjgyOSwxMi44MjksMTMuNSwxMiwxMy41eiIvPg0KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE5LDEzLjVjMC4yNzUsMCwwLjUtMC4yMjUsMC41LTAuNXYtMg0KCQljMC0wLjI3NS0wLjIyNS0wLjUtMC41LTAuNWgtMC42OTZjLTAuMjc1LDAtMC41NzEtMC4yMTMtMC42NTktMC40NzRsLTAuMjU3LTAuNjIyYy0wLjEyMy0wLjI0Ni0wLjA2NC0wLjYwNiwwLjEzLTAuODAxDQoJCWwwLjQ5My0wLjQ5M2MwLjE5NC0wLjE5NCwwLjE5NC0wLjUxMywwLTAuNzA3TDE2LjU5Nyw1Ljk5Yy0wLjE5NC0wLjE5NC0wLjUxMy0wLjE5NC0wLjcwNywwbC0wLjQ5MywwLjQ5Mw0KCQljLTAuMTk0LDAuMTk0LTAuNTU1LDAuMjUzLTAuODAxLDAuMTNsLTAuNjIyLTAuMjU2QzEzLjcxMyw2LjI2OSwxMy41LDUuOTcyLDEzLjUsNS42OTdWNWMwLTAuMjc1LTAuMjI1LTAuNS0wLjUtMC41aC0yDQoJCWMtMC4yNzUsMC0wLjUsMC4yMjUtMC41LDAuNXYwLjY5N2MwLDAuMjc1LTAuMjEzLDAuNTcxLTAuNDc0LDAuNjU5TDkuNDA0LDYuNjEyYy0wLjI0NiwwLjEyMy0wLjYwNiwwLjA2NC0wLjgwMS0wLjEzTDguMTExLDUuOTg5DQoJCWMtMC4xOTQtMC4xOTQtMC41MTMtMC4xOTQtMC43MDcsMEw1Ljk5LDcuNDAzYy0wLjE5NCwwLjE5NC0wLjE5NCwwLjUxMywwLDAuNzA3bDAuNDkzLDAuNDkzYzAuMTk0LDAuMTk0LDAuMjUzLDAuNTU1LDAuMTMsMC44MDENCgkJbC0wLjI1NywwLjYyM0M2LjI2OCwxMC4yODcsNS45NzIsMTAuNSw1LjY5NywxMC41SDVjLTAuMjc1LDAtMC41LDAuMjI1LTAuNSwwLjV2MmMwLDAuMjc1LDAuMjI1LDAuNSwwLjUsMC41aDAuNjk3DQoJCWMwLjI3NSwwLDAuNTcxLDAuMjEzLDAuNjU5LDAuNDc0bDAuMjU2LDAuNjIyYzAuMTIzLDAuMjQ2LDAuMDY0LDAuNjA2LTAuMTMsMC44MDFsLTAuNDkzLDAuNDkyYy0wLjE5NCwwLjE5NC0wLjE5NCwwLjUxMywwLDAuNzA3DQoJCWwxLjQxNCwxLjQxNGMwLjE5NCwwLjE5NCwwLjUxMywwLjE5NCwwLjcwNywwbDAuNDkyLTAuNDkyYzAuMTk0LTAuMTk0LDAuNTU1LTAuMjUzLDAuODAxLTAuMTNsMC42MjMsMC4yNTcNCgkJYzAuMjYxLDAuMDg4LDAuNDc0LDAuMzg0LDAuNDc0LDAuNjU5VjE5YzAsMC4yNzUsMC4yMjUsMC41LDAuNSwwLjVoMmMwLjI3NSwwLDAuNS0wLjIyNSwwLjUtMC41di0wLjY5Ng0KCQljMC0wLjI3NSwwLjIxMy0wLjU3MSwwLjQ3NC0wLjY1OWwwLjYyMi0wLjI1NmMwLjI0Ni0wLjEyMywwLjYwNi0wLjA2NCwwLjgwMSwwLjEzbDAuNDkyLDAuNDkyYzAuMTk0LDAuMTk0LDAuNTEzLDAuMTk0LDAuNzA3LDANCgkJbDEuNDE0LTEuNDE0YzAuMTk0LTAuMTk0LDAuMTk0LTAuNTEzLDAtMC43MDdsLTAuNDkyLTAuNDkyYy0wLjE5NC0wLjE5NC0wLjI1My0wLjU1NS0wLjEzLTAuODAxbDAuMjU3LTAuNjIzDQoJCWMwLjA4OC0wLjI2MSwwLjM4NC0wLjQ3NCwwLjY1OS0wLjQ3NEgxOXogTTEyLDEzLjVjLTAuODI5LDAtMS41LTAuNjcxLTEuNS0xLjVjMC0wLjgyOCwwLjY3MS0xLjUsMS41LTEuNXMxLjUsMC42NzEsMS41LDEuNQ0KCQlDMTMuNSwxMi44MjksMTIuODI5LDEzLjUsMTIsMTMuNXoiLz4NCjwvZz4NCjwvc3ZnPg0K"),logoVrEmbed:n("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImxvZ28iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzFEMUQxQiIgc3Ryb2tlLXdpZHRoPSIwLjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzLjc1LDUuMjUgMy43NSwxMS4yNSAwLjc1LDExLjI1IA0KCTAuNzUsMi4yNSA5Ljc1LDIuMjUgOS43NSw1LjI1ICIvPg0KPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjMuNzUsMTguNzUgOS43NSwxOC43NSA5Ljc1LDIxLjc1IA0KCTAuNzUsMjEuNzUgMC43NSwxMi43NSAzLjc1LDEyLjc1ICIvPg0KPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjIwLjI1LDE4Ljc1IDIwLjI1LDEyLjc1IDIzLjI1LDEyLjc1IA0KCTIzLjI1LDIxLjc1IDE0LjI1LDIxLjc1IDE0LjI1LDE4Ljc1ICIvPg0KPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMUQxRDFCIiBzdHJva2Utd2lkdGg9IjAuNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjIwLjI1LDUuMjUgMTQuMjUsNS4yNSAxNC4yNSwyLjI1IA0KCTIzLjI1LDIuMjUgMjMuMjUsMTEuMjUgMjAuMjUsMTEuMjUgIi8+DQo8Zz4NCjwvZz4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI0LjUiIHkxPSI5IiB4Mj0iNC41IiB5Mj0iMTgiLz4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI3LjUiIHkxPSIxOCIgeDI9IjEyIiB5Mj0iMTAuNSIvPg0KPGc+DQoJPHBhdGggZmlsbD0iIzFEMUQxQiIgZD0iTTQuNzA5LDEzLjk0MWg2LjE2MXYtMS4xNTVoMS4wM1Y2SDQuNzA5VjEzLjk0MXoiLz4NCgk8ZyBpZD0iWE1MSURfMV8iPg0KCQk8Zz4NCgkJCTxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iOS45NDksMTEuNzcxIDkuOTQ5LDEyLjkyIDUuNjI3LDEyLjkyIDUuNjI3LDcuMDEgNy44NDIsNy4wMSA3Ljg0MiwxMS42MjEgOC43NTksMTEuNjIxIA0KCQkJCTguNzU5LDcuMDEgMTAuOTg0LDcuMDEgMTAuOTg0LDExLjc3MSAJCQkiLz4NCgkJPC9nPg0KCQk8Zz4NCgkJPC9nPg0KCTwvZz4NCgk8cGF0aCBmaWxsPSIjMUQxRDFCIiBkPSJNMTIuMzA5LDZ2Ny45NDFIMTkuNVY2SDEyLjMwOXoiLz4NCgk8ZyBpZD0iWE1MSURfMl8iPg0KCQk8Zz4NCgkJCTxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMTUuNDQxLDEwLjYyMSAxNS40NDEsMTIuOTIgMTMuMjI3LDEyLjkyIDEzLjIyNyw3LjAxIDE4LjU4Myw3LjAxIDE4LjU4Myw5LjQ2IDE3LjUzLDkuNDYgDQoJCQkJMTcuNTMsMTAuNDggMTguNTgzLDEwLjQ4IDE4LjU4MywxMi45MiAxNi4zNjgsMTIuOTIgMTYuMzY4LDEwLjYyMSAJCQkiLz4NCgkJPC9nPg0KCQk8Zz4NCgkJPC9nPg0KCTwvZz4NCgk8cmVjdCB4PSIxNS40NDQiIHk9IjguMzIxIiBmaWxsPSIjMUQxRDFCIiB3aWR0aD0iMC45MiIgaGVpZ2h0PSIxLjAxMiIvPg0KPC9nPg0KPGc+DQoJPHBhdGggZD0iTTE5LjE5MSwxNC43NTFoLTEuNTg0djAuNDY5aC0xLjIyNlYxOGgyLjgxVjE0Ljc1MXogTTE2LjIyMSwxNC43NTFoLTIuODA5VjE4aDIuODA5VjE0Ljc1MXogTTEzLjI1MywxNS4yMmgtMS4yMjV2LTAuNDY5DQoJCWgtMS41ODRWMThoMi44MVYxNS4yMnogTTEwLjI4MywxNC43NTFoLTIuODFWMThoMi44MVYxNC43NTF6IE03LjMxNywxNC43NTFINC41VjE4aDIuODE3VjE0Ljc1MXoiLz4NCgk8ZyBpZD0iWE1MSURfN18iPg0KCQk8Zz4NCgkJCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xNy42MDQsMTYuMTcxdjAuODhoMC4zNjR2LTAuODhIMTcuNjA0eiBNMTYuNzM2LDE3LjU4MXYtMS45NGgxLjIzMXYtMC40NzloMC44Njd2Mi40MkgxNi43MzZ6Ii8+DQoJCTwvZz4NCgkJPGc+DQoJCTwvZz4NCgk8L2c+DQoJPGcgaWQ9IlhNTElEXzZfIj4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTQuNjM4LDE2LjExMWgwLjM1NXYtMC40MWgtMC4zNTVWMTYuMTExeiBNMTUuODYsMTUuMTYxdjEuNDc5aC0xLjIyM3YwLjQxaDEuMjIzdjAuNTNoLTIuMDl2LTIuNDINCgkJCQlIMTUuODZ6Ii8+DQoJCTwvZz4NCgkJPGc+DQoJCTwvZz4NCgk8L2c+DQoJPGcgaWQ9IlhNTElEXzVfIj4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTIuMDI3LDE3LjA1MXYtMC44OGgtMC4zNTV2MC44OEgxMi4wMjd6IE0xMi44OTUsMTUuNjQxdjEuOTRoLTIuMDl2LTIuNDJoMC44Njd2MC40NzlIMTIuODk1eiIvPg0KCQk8L2c+DQoJCTxnPg0KCQk8L2c+DQoJPC9nPg0KCTxnIGlkPSJYTUxJRF80XyI+DQoJCTxnPg0KCQkJPHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIgcG9pbnRzPSI5LjkyLDE1LjE2MSA5LjkyLDE3LjU4MSA5LjQ2LDE3LjU4MSA5LjQ2LDE2LjY0MSA5LjEwNSwxNi42NDEgOS4xMDUsMTcuNTgxIDguNjU0LDE3LjU4MSANCgkJCQk4LjY1NCwxNi42NDEgOC4yOSwxNi42NDEgOC4yOSwxNy41ODEgNy44MzEsMTcuNTgxIDcuODMxLDE1LjE2MSA4LjY5OCwxNS4xNjEgOC42OTgsMTYuMTExIDkuMDYyLDE2LjExMSA5LjA2MiwxNS4xNjEgCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCTwvZz4NCgk8L2c+DQoJPGcgaWQ9IlhNTElEXzNfIj4NCgkJPGc+DQoJCQk8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjYuOTU1LDE2LjExMSA2Ljk1NSwxNi42NDEgNS43MzIsMTYuNjQxIDUuNzMyLDE3LjA1MSA2Ljk1NSwxNy4wNTEgNi45NTUsMTcuNTgxIDQuODU2LDE3LjU4MSANCgkJCQk0Ljg1NiwxNS4xNjEgNi45NTUsMTUuMTYxIDYuOTU1LDE1LjY5MSA1LjczMiwxNS42OTEgNS43MzIsMTYuMTExIAkJCSIvPg0KCQk8L2c+DQoJCTxnPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=")},e.exports=VRLogos},{}],10:[function(t,e,i){Wakelock=t("../js-ext/wakelock.js"),VRManager=function(t){this.quad=t,this.fallbackFullscreen=!1,this.oldScroll=null,this.fallbackWidth=null,this.fallbackHeight=null,this.wakelock=new Wakelock,this.isLandscape=function(){return window.innerWidth>window.innerHeight?!0:!1},this.render=function(t){this.quad.render()},this.exitVR=function(){if(1==this.fallbackFullscreen){var t=this.quad.getContainer();window.onscroll=this.oldScroll,this.fallbackFullscreen=!1,t.style.width=this.fallbackWidth,t.style.height=this.fallbackHeight}document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.wakelock.release(),this.quad.vrtwglQuad.setCanvasWindowed()},this.enterFullscreen=function(){var t=this.quad.getContainer();if(t.requestFullscreen)this.fallbackFullscreen=!1,t.requestFullscreen();else if(t.mozRequestFullScreen)this.fallbackFullscreen=!1,t.mozRequestFullScreen();else if(t.webkitRequestFullscreen)this.fallbackFullscreen=!1,t.webkitRequestFullscreen();else{if(0==this.isLandscape())return alert("Please rotate device to landscape mode before activating"),!1;this.fallbackFullscreen=!0,t.style.zDepth=900,this.fallbackHeight=t.style.height,this.fallbackWidth=t.style.width,t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.scrollIntoView(!0),this.oldScroll=window.onscroll,window.onscroll=function(){t.scrollIntoView(!0)}}return this.quad.vrtwglQuad.setCanvasFullscreen(),this.wakelock.request(),!0}},e.exports=VRManager},{"../js-ext/wakelock.js":4}],11:[function(t,e,i){function n(){var t=this;this.vrDeviceManager=o,this.deviceButtons=[],this.init=function(){this.dialog=document.createElement("div");var t=this.dialog.style;t.position="fixed",t.top="0",t.right="0",t.bottom="0",t.left="0",t.background="rgba(0,0,0,0.8)",t.zIndex="99999",t.opacity="1",t.pointerEvents="auto",t.color="#000",t.fontFamily='"Lucida Console",Monaco,monospace',this.dialogText=document.createElement("div");var e=this.dialogText.style;A(e),e.minHeight="100px",this.dialogDevices=document.createElement("div");var i=this.dialogDevices.style;A(i),i.maxHeight="100px",i.overflow="scroll",this.dialog.appendChild(this.dialogText),this.dialog.appendChild(this.dialogDevices),this.dialog.addEventListener("click",this.onClickLeft_.bind(this)),this.dialog.addEventListener("touchstart",this.onClickLeft_.bind(this)),this.setupDialogOptions(),this.setupDialogDevices()},this.setupDialogOptions=function(){var t="";t+='<a href="http://vrEmbed.org" target="_blank" style="color: inherit; text-decoration: none;">',t+="<img src="+r.logoVrEmbed+' width=100px style="float: right; margin: 0 0 2px 2px;"/>',t+='<br/>vrEmbed<br/> (c) Bhautik Joshi 2015-16</a><div style="clear:left;">',this.dialogText.innerHTML=t},this.createRadio=function(t){var e=this.vrDeviceManager.getDeviceList();for(deviceit=0;deviceit<e.length;deviceit++){var i=e[deviceit],n=this.vrDeviceManager.getDevice(i),r=document.createElement("input");r.type="radio",r.name="deviceSelector",r.id="device"+deviceit,r.value=i,r.addEventListener("click",this.radioClick);var o=document.createElement("img");o.setAttribute("src",n.icon),o.setAttribute("height","25px");var A=document.createTextNode(n.name),s=document.createElement("label");s.htmlFor=r.id,s.appendChild(r),s.appendChild(o),s.appendChild(A),s.appendChild(document.createElement("br")),this.deviceButtons[i]=[r,s],t.appendChild(s)}},this.radioClick=function(){t.syncManagerToDeviceButtons()},this.syncDeviceButtonsToManager=function(){var t=this.vrDeviceManager.currentDeviceName;for(var e in this.deviceButtons)"length"!==e&&this.deviceButtons.hasOwnProperty(e)&&(e==t?this.deviceButtons[e][0].checked=!0:this.deviceButtons[e][0].checked=!1)},this.syncManagerToDeviceButtons=function(){for(var t in this.deviceButtons)if("length"!==t&&this.deviceButtons.hasOwnProperty(t)&&1==this.deviceButtons[t][0].checked){this.vrDeviceManager.setCurrentDevice(t);break}},this.setupDialogDevices=function(){var t="";t+="Choose device:<br/>",this.dialogDevices.innerHTML=t,this.createRadio(this.dialogDevices),this.syncDeviceButtonsToManager()},this.showDialog=function(){document.body.appendChild(this.dialog),this.syncDeviceButtonsToManager()},this.hideDialog=function(){document.body.removeChild(this.dialog),this.syncManagerToDeviceButtons()},this.onClickLeft_=function(t){var e=!1;t.target==this.dialog&&(e=!0),t.target==this.dialogText&&(e=!0),0!=e&&(t.stopPropagation(),t.preventDefault(),this.hideDialog())}}var r=t("./VRIcons.js"),o=t("./VRDeviceManager.js"),A=function(t){t.width="300px",t.position="relative",t.margin="10px auto",t.padding="5px 20px 10px 20px",t.borderRadius="5px",t.background="#fff"},s=function(){function t(){var t=new n;return t.init(),t}var e;return{getInstance:function(){return e||(e=t()),e}}}();VROptions=function(){this.options=s.getInstance()},e.exports=VROptions},{"./VRDeviceManager.js":7,"./VRIcons.js":9}],12:[function(t,e,i){VRRenderModes={MONOCULAR:0,STEREOSIDEBYSIDE:1,STEREOANAGLYPH:2},e.exports=VRRenderModes},{}],13:[function(t,e,i){function n(t){var e=Math.PI/180,i=t?t*e:0,n=Math.cos(i),r=Math.sin(i),o=[n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1];return o}twgl=t("../js-ext/twgl-full.js");var r=function(t,e,i){var n=Math.PI/180,r=e?e*n:0,o=i?i*n:0,A=t?t*n:0,s=Math.cos(r),a=Math.cos(o),u=Math.cos(A),c=Math.sin(r),l=Math.sin(o),h=Math.sin(A),f=u*a-h*c*l,d=-s*h,g=a*h*c+u*l,M=a*h+u*c*l,v=u*s,w=h*l-u*a*c,m=-s*l,p=c,I=s*a;return[f,d,g,0,M,v,w,0,m,p,I,0,0,0,0,1]},o=function(t){var e=Math.atan2(-t[2],t[0]),i=Math.atan2(-t[9],t[5]),n=Math.asin(t[1]);return[e,i,n]};VRRotMath=function(){this.timer=0,this.gyroToMat=function(t,e,i,o,A){var s=r(t,e,i),a=n(-o),u=twgl.m4.multiply(s,a);return twgl.m4.rotateZ(u,-Math.PI/2+A,u),u},this.matToEuler=function(t){return o(t)}},e.exports=VRRotMath},{"../js-ext/twgl-full.js":3}],14:[function(t,e,i){var n=t("./VRSceneImg.js");VRScene=function(){this.sceneElement=null,this.renderObjects=[],this.oldScroll=null,this.isStereo=!1,this.parseChildNode=function(t){if("PHOTO"==t.nodeName){var e=new VRScenePhoto;e.init(t),1==e.isStereo&&(this.isStereo=!0),this.renderObjects.push(e)}var i=t.children;for(elementit=0;elementit<i.length;elementit++){var t=i[elementit];this.parseChildNode(t)}},this.init=function(t){this.sceneElement=t;var e=t.children;for(elementit=0;elementit<e.length;elementit++){var i=e[elementit];this.parseChildNode(i)}},this.initVrEmbedPhoto=function(t){var e=new n;e.init(t),1==e.isStereo&&(this.isStereo=!0),this.renderObjects.push(e)},this.initFromURLSource=function(t){1==t.isStereo&&(this.isStereo=!0),this.renderObjects.push(t)}},e.exports=VRScene},{"./VRSceneImg.js":15}],15:[function(t,e,i){var n=t("./VRTextureDescription.js");VRSceneImg=function(){this.sceneImg=null,this.textureDescription=null,this.isStereo=!1,this.parseSphereParams=function(t){var e=t.split(",");this.textureDescription.sphereFOV=[e[0].trim(),e[1].trim()],this.textureDescription.sphereCentre=[e[2].trim(),e[3].trim()]},this.parseTexParams=function(t){var e=t.split(",");this.textureDescription.U_l=[e[0].trim(),e[1].trim()],this.textureDescription.V_l=[e[2].trim(),e[3].trim()],this.textureDescription.U_r=[e[4].trim(),e[5].trim()],this.textureDescription.V_r=[e[6].trim(),e[7].trim()]},this.init=function(t){return this.sceneImg=t,this.textureDescription=new n,this.textureDescription.textureSource=this.sceneImg.getAttribute("src"),null==this.textureDescription.textureSource?void(this.textureDescription=null):(this.textureDescription.metaSource="",this.parseSphereParams(this.sceneImg.getAttribute("sphereParams")),this.textureDescription.isStereo=this.sceneImg.getAttribute("isStereo"),"true"==this.textureDescription.isStereo.toLowerCase()&&(this.isStereo=!0),void("true"==this.textureDescription.isStereo&&this.parseTexParams(this.sceneImg.getAttribute("texParams"))))}},e.exports=VRSceneImg},{"./VRTextureDescription.js":22}],16:[function(t,e,i){var n=t("./VRTextureDescription.js");VRScenePhoto=function(){this.scenePhoto=null,this.textureDescription=null,this.isStereo=!1,this.parseSphereParams=function(t){var e=t.split(",");this.textureDescription.sphereFOV=[e[0].trim(),e[1].trim()],this.textureDescription.sphereCentre=[e[2].trim(),e[3].trim()]},this.parseTexParams=function(t){var e=t.split(",");this.textureDescription.U_l=[e[0].trim(),e[1].trim()],this.textureDescription.V_l=[e[2].trim(),e[3].trim()],this.textureDescription.U_r=[e[4].trim(),e[5].trim()],this.textureDescription.V_r=[e[6].trim(),e[7].trim()]},this.init=function(t){return this.scenePhoto=t,this.textureDescription=new n,this.textureDescription.textureSource=this.scenePhoto.getAttribute("src"),null==this.textureDescription.textureSource?void(this.textureDescription=null):(this.textureDescription.metaSource="",this.textureDescription.isStereo=this.scenePhoto.getAttribute("isStereo"),"true"==this.textureDescription.isStereo.toLowerCase()&&(this.isStereo=!0),this.parseSphereParams(this.scenePhoto.getAttribute("sphereParams")),void("true"==this.textureDescription.isStereo.toLowerCase()&&this.parseTexParams(this.scenePhoto.getAttribute("texParams"))))},this.initFromURL=function(t){return this.textureDescription=new n,this.textureDescription.textureSource=t.src,void 0==this.textureDescription.textureSource?void(this.textureDescription=null):(void 0!=t.metaSrc?this.textureDescription.metaSource=t.metaSrc:this.textureDescription.metaSource="",void 0!=t.isStereo?this.textureDescription.isStereo=t.isStereo:this.textureDescription.isStereo="false","true"==this.textureDescription.isStereo.toLowerCase()&&(this.isStereo=!0),void 0!=t.sphereParams?this.parseSphereParams(t.sphereParams):this.parseSphereParams("360,180,0,0"),void(void 0!=t.texParams?this.parseTexParams(t.texParams):this.parseTexParams("0,0,1,1,0,0,1,1")))}},e.exports=VRScenePhoto},{"./VRTextureDescription.js":22}],17:[function(t,e,i){var n=t("./VRStates.js"),r=t("./VRIcons.js"),o=t("../js-ext/emitter.js");VRStateToggler=function(){this.vrStory=null,this.createButtons(),this.buttonMiddle.addEventListener("click",this.onClickMiddle_.bind(this)),this.buttonOptions.addEventListener("click",this.onClickOptions_.bind(this)),this.buttonMiddleClick.prototype=new function(){},this.buttonOptionsClick.prototype=new function(){},this.logoCardboard=r.logoCardboard,this.logoFullscreen=r.logoFullscreen,this.logoWindowed=r.logoWindowed,this.logoSettings=r.logoSettings,this.logoVrEmbed=r.logoVrEmbed},VRStateToggler.prototype=new o,VRStateToggler.prototype.setVRStory=function(t){this.vrStory=t,this.isStereo=!1};var A=function(t){t.position="absolute",t.marginLeft="auto",t.marginRight="auto",t.width="56px",t.height="56px",t.backgroundSize="cover",t.backgroundColor="transparent",t.border=0,t.userSelect="none",t.webkitUserSelect="none",t.MozUserSelect="none",t.cursor="pointer",t.opacity="0.8"};VRStateToggler.prototype.createMiddleButton=function(){this.buttonMiddle=document.createElement("img");var t=this.buttonMiddle.style;A(t),t.left=0,t.right=0,t.bottom="5px",this.buttonMiddle.draggable=!1,this.buttonMiddle.addEventListener("dragstart",function(t){t.preventDefault()})},VRStateToggler.prototype.createOptionsButton=function(){this.buttonOptions=document.createElement("img");var t=this.buttonOptions.style;A(t),t.left=0,t.right=5,t.top="5px",this.buttonOptions.draggable=!1,this.buttonOptions.addEventListener("dragstart",function(t){t.preventDefault()})},VRStateToggler.prototype.createButtons=function(){this.createMiddleButton(),this.createOptionsButton()},VRStateToggler.prototype.onClickMiddle_=function(t){t.stopPropagation(),t.preventDefault(),this.buttonMiddleClick()},VRStateToggler.prototype.onClickOptions_=function(t){t.stopPropagation(),t.preventDefault(),this.buttonOptionsClick()},VRStateToggler.prototype.setupButton=function(t,e,i,n){t.style.display="inline-block",t.offsetHeight,t.style.display="block",t.src=e,t.title=i,t.style.display=n?"inline-block":"none"},VRStateToggler.prototype.configureStereo=function(t){this.isStereo=t},VRStateToggler.prototype.setButtonState=function(t){switch(t){case n.FULLSCREEN:this.setupButton(this.buttonOptions,"","",!1),this.setupButton(this.buttonMiddle,this.logoWindowed,"Windowed mode",!0);break;case n.WINDOWED:this.setupButton(this.buttonOptions,this.logoSettings,"settings",!0),this.setupButton(this.buttonMiddle,this.logoCardboard,"Fullscreen mode",!0)}},VRStateToggler.prototype.setState=function(t){if(null!=this.vrStory){var e=this.vrStory.setState(t);if(0==e)return void console.log("STATE CHANGE FAIL")}else this.emit(t);this.setButtonState(t)},VRStateToggler.prototype.stateChange=function(t){switch(t){case this.logoCardboard:this.setState(n.FULLSCREEN);break;case this.logoWindowed:this.setState(n.WINDOWED)}},VRStateToggler.prototype.buttonMiddleClick=function(){this.stateChange(this.buttonMiddle.src)},VRStateToggler.prototype.buttonOptionsClick=function(){this.vrStory.showOptions()},e.exports=VRStateToggler},{"../js-ext/emitter.js":2,"./VRIcons.js":9,"./VRStates.js":18}],18:[function(t,e,i){VRStates={INACTIVE:0,WINDOWED:1,FULLSCREEN:2},e.exports=VRStates},{}],19:[function(t,e,i){var n=t("./VRStates.js"),r=t("./VRStateToggler.js"),o=t("./VRScene.js"),A=t("./VRManager.js"),s=t("./VRRenderModes.js"),a=t("./VRDeviceManager.js"),u=t("./VRGui.js");VRStory=function(){var e=this;this.storyElement=null,this.parentElement=null,this.vrDeviceManager=a,this.vrGui=null,this.quad=null,this.manager=null,this.storyManager=null,this.stateToggler=new r,this.stateToggler.setVRStory(this),this.state=n.INACTIVE,this.lastVisibleCheck=0,this.isVisible=!0,this.isStereo=!1,this.currentSceneIndex=0,this.isFullScreen=!1,this.sceneList=[],this.enterFullscreen=function(){return 0==e.manager.enterFullscreen()?!1:(this.isFullScreen=!0,void(1==e.manager.fallbackFullscreen&&e.onResize()))},this.exitFullscreen=function(){this.isFullScreen&&null!=e.manager&&(e.manager.exitVR(),this.isFullScreen=!1)},this.windowedCallback=function(){return null==e.quad?!1:(e.quad.setupFromDevice(this.vrDeviceManager.getWindowedDevice()),e.exitFullscreen(),console.log("WINDOWED CALLBACK"),!0)},this.fullscreenCallback=function(){return 0==e.enterFullscreen()?!1:(e.quad.setupFromDevice(this.vrDeviceManager.getCurrentDevice()),console.log("FULLSCREEN CALLBACK"),!0)},this.onResize=function(){this.parentElement.clientWidth,this.parentElement.clientHeight;if(null!=this.quad){if(1==this.manager.fallbackFullscreen&&0==this.manager.isLandscape())return void this.stateToggler.setState(n.WINDOWED);if(this.isFullScreen){if(this.quad.resize(),1==this.manager.fallbackFullscreen){var t=this.quad.getContainer();t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px"}}else this.quad.resize()}else console.log("SHOULD NEVER BE HERE")},this.setState=function(t){var i=e.state;e.state=t;var r=!1;switch(t){case n.FULLSCREEN:r=e.fullscreenCallback();break;case n.WINDOWED:r=e.windowedCallback()}return 1==r?(e.state=t,this.onResize()):e.state=i,r},this.setupSceneRenderer=function(){this.parentElement.clientWidth,this.parentElement.clientHeight;VRtwglQuadStereoProjection=t("./VRtwglQuadStereoProjection.js"),this.quad=new VRtwglQuadStereoProjection,this.quad.init(this.parentElement),this.quad.resize()},this.isInViewport=function(){var t=this.quad.getContainer(),e=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,r=e.top<=i&&e.top+e.height>=0,o=e.left<=n&&e.left+e.width>=0;return r&&o},this.checkVisible=function(){var t=Date.now();t-this.lastVisibleCheck<100||(this.isVisible=this.isInViewport())},this.animate=function(t){if(this.checkVisible(),0!=this.isVisible){e.manager.render(t);var i=Date.now(),n=e.quad.controller.getHeading();if(null!=e.vrGui){var r=e.vrGui.update([n[0],n[1]],i);e.drawReticle(r)}}},this.drawReticle=function(t){var e=this.quad.vrtwglQuad.get2dContext();if(null!=e){var i=e[0],n=e[1],r=e[2];i.clearRect(0,0,n,r);var o=[],A=this.quad.getRenderMode();if(A!=s.STEREOSIDEBYSIDE)o.push([n/2,r/2]);else{var a=this.quad.getIPDAdjust();o.push([n/4-a*n/2,r/2]),o.push([3*n/4+a*n/2,r/2])}for(objit=0;objit<o.length;objit++){var u=o[objit];i.beginPath(),i.lineWidth=6,i.strokeStyle="rgba(255,255,255,0.8)",i.arc(u[0],u[1],15,0,2*Math.PI),i.stroke(),i.beginPath(),i.strokeStyle="rgba(0,0,0,1.0)",i.lineWidth=5,i.arc(u[0],u[1],15,-.5*Math.PI,-.5*Math.PI+2*t*Math.PI),i.stroke()}}},this.setupScene=function(t){this.vrGui.teardown(),this.quad.teardown();var e=this.sceneList[t],i=[];for(objit=0;objit<e.renderObjects.length;objit++){var n=e.renderObjects[objit];null!=n.textureDescription&&i.push(n.textureDescription)}this.quad.loadTextures(i),this.stateToggler.configureStereo(this.isStereo),this.currentSceneIndex=t,this.guiGen()},this.nextScene=function(){var t=e.sceneList.length,i=(e.currentSceneIndex+1)%t;i!=e.currentSceneIndex&&(e.setupScene(i),e.currentSceneIndex=i)},this.prevScene=function(){var t=e.sceneList.length,i=(e.currentSceneIndex-1)%t;i!=e.currentSceneIndex&&e.setupScene(i)},this.guiGen=function(){var t=e.sceneList.length;e.currentSceneIndex>0&&this.vrGui.createTextBox(15,-30,-30,this.prevScene,"prev",{fontsize:72,borderThickness:10}),e.currentSceneIndex<t-1&&this.vrGui.createTextBox(15,30,-30,this.nextScene,"next",{fontsize:72,borderThickness:10}),this.quad.renderGui()},this.init=function(t,i){this.storyElement=t,this.storyManager=i,this.parentElement=this.storyElement.parentNode,this.setupSceneRenderer(),this.vrGui=new u,this.vrGui.init(this.quad.getContext()),this.quad.setVrGui(this.vrGui),this.setupScene(this.currentSceneIndex),this.mouseMove=function(t){var i=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.quad.controller.mouseMove(i,n)},this.parentElement.addEventListener("mousedown",function(t){this.parentElement.addEventListener("mousemove",e.mouseMove,!1)},!1),this.parentElement.addEventListener("mouseup",function(t){this.parentElement.removeEventListener("mousemove",e.mouseMove,!1)},!1),this.quad.getContainer().appendChild(this.stateToggler.buttonMiddle),this.quad.getContainer().appendChild(this.stateToggler.buttonOptions),this.manager=new A(this.quad),this.onResize(),this.animate(),this.stateToggler.setState(n.WINDOWED)},this.getSizeStyle=function(t,e){var i=t.getAttribute("width"),n=t.getAttribute("height");return null==i&&null==n?(e.width="100%",void(e.paddingBottom="56.25%")):null!=n&&null!=i?(e.height=n,void(e.width=i)):void 0},this.initVrEmbedPhoto=function(t,e){var i=document.createElement("div"),n=i.style;n.position="relative",this.getSizeStyle(t,n);var r=document.createElement("div"),A=r.style;A.position="absolute",A.top="0",A.bottom="0",A.left="0",A.right="0",A.color="white",A.fontSize="24px",A.textAlign="center";var s=document.createElement("a");r.appendChild(s),i.appendChild(r),t.appendChild(i);var a=new o;a.initVrEmbedPhoto(t),a.isStereo&&(this.isStereo=!0),this.sceneList.push(a),this.init(s,e)},this.initFromURLSource=function(t,e){var i=document.createElement("div"),n=i.style;n.width="100%",n.paddingBottom="100%";var r=document.createElement("div"),A=r.style;A.position="absolute",A.top="0",A.bottom="0",A.left="0",A.right="0",A.color="white",A.fontSize="24px",A.textAlign="center";var s=document.createElement("a");r.appendChild(s),i.appendChild(r),document.body.appendChild(i);var a=new o;a.initFromURLSource(t),a.isStereo&&(this.isStereo=!0),this.sceneList.push(a),this.init(s,e)},this.initStory=function(t,e){var i=t.children;for(sceneit=0;sceneit<i.length;sceneit++){var n=i[sceneit];if("SCENE"==n.nodeName){var r=new o;r.init(n),r.isStereo&&(this.isStereo=!0),this.sceneList.push(r)}}this.init(t,e)},this.showOptions=function(){this.storyManager.showOptions()},this.hideOptions=function(){this.storyManager.hideOptions()}},e.exports=VRStory},{"./VRDeviceManager.js":7,"./VRGui.js":8,"./VRManager.js":10,"./VRRenderModes.js":12,"./VRScene.js":14,"./VRStateToggler.js":17,"./VRStates.js":18,"./VRtwglQuadStereoProjection.js":26}],20:[function(t,e,i){var n=t("./VROptions.js");VRStoryManager=function(){var t=this;this.storyList=[],
this.activeStory=-1,this.vrOptions=new n;var t=this;this.onFullscreenChange_=function(e){if(null===document.webkitFullscreenElement||null===document.mozFullScreenElement)for(storyit=0;storyit<t.storyList.length;storyit++)t.storyList[storyit].stateToggler.setState(VRStates.WINDOWED)},document.addEventListener("webkitfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange_.bind(this)),this.addStory=function(t){this.storyList.push(t)},this.onResize=function(){for(storyit=0;storyit<t.storyList.length;storyit++)t.storyList[storyit].onResize()},this.animate=function(){for(requestAnimationFrame(t.animate),storyit=0;storyit<t.storyList.length;storyit++)t.storyList[storyit].animate()},this.findStoryIndex=function(e){var i=-1;for(storyit=0;storyit<t.storyList.length;storyit++)t.storyList[storyit]==e&&(i=storyit);return i},this.init=function(){},this.showOptions=function(){this.vrOptions.options.showDialog()},this.hideOptions=function(){this.vrOptions.options.hideDialog()},this.animate()},e.exports=VRStoryManager},{"./VROptions.js":11}],21:[function(t,e,i){var n=t("./VRStoryManager.js"),r=t("./VRStory.js");StoryParser=function(){this.storyManager=new n,this.storyManager.init(),this.parseDocXML=function(t){var e=t.getElementsByTagName("story");for(storyit=0;storyit<e.length;storyit++){var i=e[storyit],n=new r;n.initStory(i,this.storyManager),this.storyManager.addStory(n)}var o=t.getElementsByClassName("vrEmbedPhoto");for(vrEmbedPhotosIt=0;vrEmbedPhotosIt<o.length;vrEmbedPhotosIt++){var A=o[vrEmbedPhotosIt],n=new r;n.initVrEmbedPhoto(A,this.storyManager),this.storyManager.addStory(n)}},this.initFromURLSource=function(t){var e=new r;e.initFromURLSource(t,this.storyManager),this.storyManager.addStory(e)},this.onResize=function(){this.storyManager.onResize()}},e.exports=StoryParser},{"./VRStory.js":19,"./VRStoryManager.js":20}],22:[function(t,e,i){VRTextureDescription=function(){this.textureSource="",this.metaSource="",this.isStereo=!1,this.sphereFOV=[360,180],this.sphereCentre=[0,0],this.U_r=[0,0],this.V_r=[1,1],this.U_l=[0,0],this.V_l=[1,1]},e.exports=VRTextureDescription},{}],23:[function(t,e,i){function n(){var t=window.location.search.substr(1);return null!=t&&""!=t?r(t):{}}function r(t){for(var e={},i=t.split("&"),n=0;n<i.length;n++){var r=i[n].split("=");e[r[0]]=decodeURIComponent(r[1])}return e}var o=t("./VRScenePhoto.js");VRURLParser=function(){this.isEditor=!1,this.params=[],this.scenePhoto=null,this.parseURL=function(){this.params=n()},this.init=function(){var t=document.getElementsByTagName("vrEditor");this.parseURL();var e=0;for(var i in this.params)e+=1;return 0!=t.length&&0!=e&&(this.scenePhoto=new o,this.scenePhoto.initFromURL(this.params),null!=this.scenePhoto.textureDescription)?(this.isEditor=!0,this.scenePhoto):null}},e.exports=VRURLParser},{"./VRScenePhoto.js":16}],24:[function(t,e,i){function n(){this.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}}e.exports=n},{}],25:[function(t,e,i){var n=t("../js-ext/twgl-full.js");VRtwglQuad=function(){var t=this;this.container=null,this.canvas=null,this.canvas2d=null,this.glContext=null,this.programInfo=null,this.bufferInfo=null,this.parentElement=null,this.uniforms=null,this.fbSize=2048,this.canvas2dWidth=2048,this.canvas2dHeight=2048,this.viewportDims=[0,0],this.initCore=function(t,e){this.programInfo=n.createProgramInfo(this.glContext,[t,e]);var i={position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]};this.bufferInfo=n.createBufferInfoFromArrays(this.glContext,i)},this.init=function(t,e,i){this.parentElement=t.parentNode,this.container=document.createElement("div"),this.canvas=document.createElement("canvas"),this.canvas2d=document.createElement("canvas");var r=this.canvas.style;r.display="block",r.position="absolute";var o=this.canvas2d.style;o.position="absolute",o.marginLeft="auto",o.marginRight="auto",o.backgroundSize="cover",o.backgroundColor="transparent",o.border=0,o.userSelect="none",o.webkitUserSelect="none",o.MozUserSelect="none",o.opacity="1.0",o.left=0,o.right=0,o.top="0px",o.height="100%",o.width="100%",this.container.appendChild(this.canvas),this.container.appendChild(this.canvas2d),t.appendChild(this.container),this.canvas.width=this.fbSize,this.canvas.height=this.fbSize,this.canvas.style.width=this.fbSize+"px",this.canvas.style.height=this.fbSize+"px",this.glContext=n.getWebGLContext(this.canvas),this.initCore(e,i)},this.setCanvasFullscreen=function(){var t=this.canvas.style;t.position="relative";var e=this.canvas2d.style;e.height="100vh",e.width="100vw"},this.setCanvasWindowed=function(){var t=this.canvas.style;t.position="absolute";var e=this.canvas2d.style;e.height="100%",e.width="100%"},this.initFramebuffer=function(t,e,i,r){this.glContext=e,this.fbSize=t,this.initCore(i,r);var o=[{format:this.glContext.RGBA,type:this.glContext.UNSIGNED_BYTE,min:this.glContext.LINEAR,mag:this.glContext.LINEAR,wrap:this.glContext.CLAMP_TO_EDGE}];this.framebufferInfo=n.createFramebufferInfo(this.glContext,o,this.fbSize,this.fbSize)},this.getFramebufferTexture=function(){return this.framebufferInfo.attachments[0]},this.getFramebufferSize=function(){return this.fbSize},this.getDevicePixelRatio=function(){return window.devicePixelRatio||1},this.fixViewportSize=function(){var e=t.glContext.canvas,i=t.parentElement.clientWidth,n=t.parentElement.clientHeight,r=this.getDevicePixelRatio();e.width=Math.floor(i*r),e.height=Math.floor(n*r),e.style.width=i+"px",e.style.height=n+"px",t.glContext.viewport(0,0,Math.floor(i*r),Math.floor(n*r))},this.resize=function(){this.fixViewportSize();var e=t.parentElement.clientWidth,i=t.parentElement.clientHeight,n=this.canvas2d.getContext("2d");this.canvas2dHeight=Math.floor(this.canvas2dWidth*i/e),n.canvas.width=this.canvas2dWidth,n.canvas.height=this.canvas2dHeight},this.setUniforms=function(t){this.uniforms=t},this.render=function(){n.resizeCanvasToDisplaySize(t.glContext.canvas,t.getDevicePixelRatio()),t.glContext.useProgram(t.programInfo.program),n.setBuffersAndAttributes(t.glContext,t.programInfo,t.bufferInfo),n.setUniforms(t.programInfo,this.uniforms),n.drawBufferInfo(t.glContext,t.glContext.TRIANGLES,t.bufferInfo)},this.get2dContext=function(){return null==t.canvas2d?null:[t.canvas2d.getContext("2d"),t.canvas2dWidth,t.canvas2dHeight]},this.clearFrameBuffer=function(e,i,r,o){n.bindFramebufferInfo(t.glContext,t.framebufferInfo),this.glContext.clearColor(e,i,r,o),this.glContext.clear(this.glContext.COLOR_BUFFER_BIT),n.bindFramebufferInfo(t.glContext,null)},this.renderFramebuffer=function(){n.bindFramebufferInfo(t.glContext,t.framebufferInfo),this.render(),n.bindFramebufferInfo(t.glContext,null)},this.resetViewport=function(){var e=t.getDevicePixelRatio(),i=t.parentElement.clientWidth,n=t.parentElement.clientHeight;t.glContext.viewport(0,0,Math.floor(i*e),Math.floor(n*e))}},e.exports=VRtwglQuad},{"../js-ext/twgl-full.js":3}],26:[function(t,e,i){VRtwglQuad=t("./VRtwglQuad.js"),VRRenderModes=t("./VRRenderModes.js"),VRLookController=t("./VRControllers.js"),VRDeviceManager=t("./VRDeviceManager.js"),VRCanvasFactory=t("./VRCanvasFactory.js"),twgl=t("../js-ext/twgl-full.js");var n="precision highp float;\nattribute vec4 position;\nvoid main() {\n  gl_Position = position;\n}\n",r="precision highp float;\n#define PI 3.141592653589793\nuniform vec2 resolution;\nuniform sampler2D textureSource;\nuniform sampler2D textureGui;\nuniform mat4 transform;\nuniform int renderMode;\nuniform vec2 fovParams;\nuniform vec2 k;\nuniform float ipdAdjust;\nvoid main(void) {\n  vec2 uv = gl_FragCoord.xy / resolution;\n  bool leftImg=false;\n  vec2 fov = fovParams;\n  if (renderMode == 1) {\n    fov.y *= 2.;\n    if (uv.x<0.5) { \n      uv.x *= 2.; \n      uv.x += ipdAdjust;\n      leftImg=true; }\n    else {\n      uv.x = 2.*(uv.x - .5);\n      uv.x -= ipdAdjust;\n    }\n    float r2 = (uv.x-0.5)*(uv.x-0.5) + (uv.y-0.5)*(uv.y-0.5);\n    uv.x = 0.5+(uv.x-0.5)*(1. + k.x*r2 + k.y*r2*r2);\n    uv.y = 0.5+(uv.y-0.5)*(1. + k.x*r2 + k.y*r2*r2);\n    uv.x = 0.5+fov.x*(uv.x-0.5);\n    uv.y = 0.5+fov.y*(uv.y-0.5);\n  } else {\n    uv.x = 0.5+fov.x*(uv.x-0.5);\n    uv.y = 0.5+fov.y*(uv.y-0.5);\n  }\n  float lat = 0.5*PI*(2.*uv.y-1.0);\n  float lon = PI*(2.0*uv.x-1.0);\n  vec2 pnt = vec2(lon, lat);\n  float x2y2 = pnt.x * pnt.x + pnt.y * pnt.y;\n  vec3 _sphere_pnt = vec3(2. * pnt, x2y2 - 1.) / (x2y2 + 1.);\n  vec4 sphere_pnt = vec4(_sphere_pnt, 1.);\n  sphere_pnt *= transform;\n  float r = length(sphere_pnt);\n  float _lon = -1.*atan(sphere_pnt.y, sphere_pnt.x);\n  float _lat = 2.0*(acos(sphere_pnt.z / r) - PI*.5) + PI*.5;\n  _lon = mod(_lon, 2.*PI);\n  vec2 lonLat = vec2(_lon/(PI*2.), _lat/(PI));\n  if (renderMode != 2) {\n    if (renderMode == 0) {\n      lonLat.y *= 0.5;\n    } else {\n      if (leftImg == true) {\n        lonLat.y *= 0.5;\n      } else {\n        lonLat.y = 0.5 + lonLat.y*0.5;\n      }\n    }\n    vec4 spherePx = texture2D(textureSource, lonLat);\n    vec4 guiPx = texture2D(textureGui, lonLat);\n    gl_FragColor = guiPx*guiPx.a + spherePx*(1.-guiPx.a);\n  } else if (renderMode == 2) {\n    vec4 colorL, colorR, colorLSphere, colorLGui, colorRSphere, colorRGui;\n    colorLSphere = texture2D(textureSource, vec2(lonLat.x, lonLat.y*0.5));\n    colorLGui = texture2D(textureGui, vec2(lonLat.x, lonLat.y*0.5));\n    colorL = colorLGui*colorLGui.a + colorLSphere*(1.-colorLGui.a);\n    colorRSphere = texture2D(textureSource, vec2(lonLat.x, 0.5+lonLat.y*0.5));\n    colorRGui = texture2D(textureGui, vec2(lonLat.x, 0.5+lonLat.y*0.5));\n    colorR = colorRGui*colorRGui.a + colorRSphere*(1.-colorRGui.a);\n    gl_FragColor = vec4( colorL.g * 0.7 + colorL.b * 0.3, colorR.g, colorR.b, colorL.a + colorR.a ) * 1.1;\n  }\n}\n",o="precision highp float;\n#define PI 3.141592653589793\nuniform vec2 resolution;\nuniform sampler2D textureSource;\nuniform mat4 transform;\nuniform vec2 sphX;\nuniform vec2 sphYX;\nuniform vec4 uvL;\nuniform vec4 uvR;\nvoid main(void) {\n  //normalize uv so it is between 0 and 1\n  vec2 uv = gl_FragCoord.xy / resolution;\n  bool leftImg=false;\n  if (uv.y<0.5) { \n    uv.y *= 2.; \n    leftImg=true; }\n  else {\n    uv.y = 2.*(uv.y - .5);\n  }\n  //map uv.x 0..1 to -PI..PI and uv.y 0..1 to -PI/2..PI/2\n  float lat = 0.5*PI*(2.*uv.y-1.0);\n  float lon = PI*(2.0*uv.x-1.0);\n  // map lat/lon to point on unit sphere\n  float r = cos(lat);\n  vec4 sphere_pnt = vec4(r*cos(lon), r*sin(lon), sin(lat), 1.0);\n  sphere_pnt *= transform;\n  // now map point in sphere back to lat/lon coords\n  float sphere_pnt_len = length(sphere_pnt);\n  sphere_pnt /= sphere_pnt_len;\n  vec2 lonLat = vec2(atan(sphere_pnt.y, sphere_pnt.x), asin(sphere_pnt.z));\n  // map back to 0..1\n  lonLat.x = (lonLat.x/(2.0*PI))+0.5;\n  lonLat.y = (lonLat.y/(.5*PI))+0.5;\n  vec2 testPt = (lonLat-sphX);\n  testPt = mod(testPt, 1.)/sphYX;\n  // bail out if we're out of drawable region\n  if (testPt.x<0. || testPt.x>1. || testPt.y<0. || testPt.y>1.){ discard; return;}\n  // now map to either left or right UV tex\n  vec2 uvX;\n  vec2 uvYX;\n  if (leftImg == true) {\n    uvX = uvL.xy;\n    uvYX = uvL.zw;\n  } else {\n    uvX = uvR.xy;\n    uvYX = uvR.zw;\n  }\n  vec2 texC = uvX + (testPt*uvYX);\n  gl_FragColor = texture2D(textureSource, texC); \n}\n";VRtwglQuadStereoProjection=function(){var t=this;this.vrDeviceManager=VRDeviceManager,this.vrtwglQuad=null,this.vrtwglQuadFb=null,this.vrtwglQuadFbGui=null,this.textureSet=[],this.fbRes=2048,this.textureDescriptions={},this.textures=[],this.fovX=40,this.tick=0,this.vrGui=null,this.controller=new VRLookController,this.cameraMatrix=twgl.m4.identity(),this.controller.setCamera(this.cameraMatrix),this.getContainer=function(){return this.vrtwglQuad.container},this.getContext=function(){return this.vrtwglQuad.glContext},this.setVrGui=function(t){this.vrGui=t},this.uniforms={resolution:[0,0],fovParams:[0,0],textureSource:null,textureGui:null,transform:twgl.m4.identity(),renderMode:VRRenderModes.STEREOSIDEBYSIDE,k:[0,0],ipdAdjust:0},this.uniformsFb={resolution:[this.fbRes,this.fbRes],textureSource:null,transform:twgl.m4.identity()},this.uniformsFbGui={resolution:[this.fbRes,this.fbRes],textureSource:null,transform:twgl.m4.identity()},this.setupFromDevice=function(t){this.uniforms.renderMode=t.renderMode,this.fovX=t.hfov,this.uniforms.k=t.k,this.uniforms.ipdAdjust=t.ipdAdjust},this.getRenderMode=function(){return this.uniforms.renderMode},this.getIPDAdjust=function(){return this.uniforms.ipdAdjust},this.init=function(e){this.vrtwglQuad=new VRtwglQuad,this.vrtwglQuad.init(e,n,r),this.setupFromDevice(this.vrDeviceManager.getWindowedDevice()),this.vrtwglQuadFb=new VRtwglQuad,this.vrtwglQuadFb.initFramebuffer(this.fbRes,this.vrtwglQuad.glContext,n,o),t.vrtwglQuadFb.clearFrameBuffer(0,0,0,0),this.vrtwglQuadFbGui=new VRtwglQuad,this.vrtwglQuadFbGui.initFramebuffer(this.fbRes,this.vrtwglQuad.glContext,n,o),t.vrtwglQuadFbGui.clearFrameBuffer(0,0,0,0),t.vrtwglQuad.resetViewport()},this.renderGui=function(){if(null==this.vrGui)return void console.log("ERROR: trying to render before gui is ready");for(t.vrtwglQuadFbGui.clearFrameBuffer(0,0,0,0),texIt=0;texIt<t.vrGui.canvasSet.length;texIt++){var e=t.vrGui.canvasSet[texIt][0],i=e.vrTextureDescription;e.update(t.tick),t.uniformsFbGui.textureSource=e.glTex,t.uniformsFbGui.sphX=[.5-.5*(i.sphereFOV[0]/360),.5-.5*(i.sphereFOV[1]/180)],t.uniformsFbGui.sphYX=[i.sphereFOV[0]/360,i.sphereFOV[1]/180],t.uniformsFbGui.transform=t.createOrientation(Math.PI*i.sphereCentre[0]/180,Math.PI*i.sphereCentre[1]/180),t.uniformsFbGui.uvL=[i.U_l[0],i.U_l[1],i.V_l[0]-i.U_l[0],i.V_l[1]-i.U_l[1]],t.uniformsFbGui.uvR=[i.U_r[0],i.U_r[1],i.V_r[0]-i.U_r[0],i.V_r[1]-i.U_r[1]],t.renderFbGui()}t.vrtwglQuad.resetViewport()},this.resize=function(){t.vrtwglQuad.resize()},this.render=function(){this.controller.update(),twgl.m4.copy(this.cameraMatrix,this.uniforms.transform),this.uniforms.resolution=[t.vrtwglQuad.canvas.width,t.vrtwglQuad.canvas.height];var e=t.vrtwglQuad.canvas.height/t.vrtwglQuad.canvas.width;this.uniforms.fovParams=[this.fovX/360,e*this.fovX/360],this.uniforms.textureSource=t.vrtwglQuadFb.getFramebufferTexture(),this.uniforms.textureGui=t.vrtwglQuadFbGui.getFramebufferTexture(),t.vrtwglQuad.setUniforms(this.uniforms),t.vrtwglQuad.render()},this.renderFb=function(){t.vrtwglQuadFb.setUniforms(this.uniformsFb),t.vrtwglQuadFb.renderFramebuffer()},this.renderFbGui=function(){t.vrtwglQuadFbGui.setUniforms(this.uniformsFbGui),t.vrtwglQuadFbGui.renderFramebuffer()},this.anim=function(){t.render(),requestAnimationFrame(t.anim)},this.createOrientation=function(t,e){var i=twgl.m4.identity(),n=twgl.v3.create(0,0,1);twgl.m4.axisRotate(i,n,t,i);var r=twgl.v3.create(0,1,0);return twgl.m4.axisRotate(i,r,e,i),i},this.texturesLoaded=function(e,i,n){t.vrtwglQuadFb.clearFrameBuffer(0,0,0,0);for(var r in t.textures)if(t.textures.hasOwnProperty(r)){var o=t.textureDescriptions[r];t.uniformsFb.textureSource=t.textures[r],t.uniformsFb.sphX=[.5-.5*(o.sphereFOV[0]/360),.5-.5*(o.sphereFOV[1]/180)],t.uniformsFb.sphYX=[o.sphereFOV[0]/360,o.sphereFOV[1]/180],t.uniformsFb.transform=t.createOrientation(Math.PI*o.sphereCentre[0]/180,Math.PI*o.sphereCentre[1]/180),t.uniformsFb.uvL=[o.U_l[0],o.U_l[1],o.V_l[0]-o.U_l[0],o.V_l[1]-o.U_l[1]],t.uniformsFb.uvR=[o.U_r[0],o.U_r[1],o.V_r[0]-o.U_r[0],o.V_r[1]-o.U_r[1]],t.renderFb();var A=t.vrtwglQuad.glContext;A.deleteTexture(t.textures[r])}t.vrtwglQuad.resetViewport()},this.loadTextures=function(e){var i=t.vrtwglQuad.glContext,n=[];for(texIt=0;texIt<e.length;texIt++){var r={min:i.LINEAR,mag:i.LINEAR,src:e[texIt].textureSource,crossOrigin:""};n[texIt]=r,this.textureDescriptions[texIt]=e[texIt]}var i=t.vrtwglQuad.glContext;this.textures=twgl.createTextures(i,n,this.texturesLoaded)},this.teardown=function(){this.textures=[],this.textureDescriptions=[]}},e.exports=VRtwglQuadStereoProjection},{"../js-ext/twgl-full.js":3,"./VRCanvasFactory.js":5,"./VRControllers.js":6,"./VRDeviceManager.js":7,"./VRRenderModes.js":12,"./VRtwglQuad.js":25}],27:[function(t,e,i){function n(){c.onResize()}var r=t("./VRStoryParser.js"),o=t("./VRURLParser.js"),A=t("../js-ext/domready.js"),s=function(){function t(){window.VRURLPARSER_INIT=!0;var t=new o;return t}var e;return{getInstance:function(){return e||(e=t()),e}}}(),a=function(){function t(){function t(){i.onResize()}function e(){i.parseDocXML(document.body)}window.VRSTORYPARSER_INIT=!0;var i=new r;return window.addEventListener("resize",t,!1),A(e),i}var e;return{getInstance:function(){return e||(e=t()),e}}}();if(!window.VRURLPARSER_INIT){var u=s.getInstance();if(u.init(),1==u.isEditor){window.stop(),document.body.innerHTML="",window.VRSTORYPARSER_INIT=!0;var c=new r;return window.addEventListener("resize",n,!1),void c.initFromURLSource(u.scenePhoto)}}if(!window.VRSTORYPARSER_INIT)var c=a.getInstance()},{"../js-ext/domready.js":1,"./VRStoryParser.js":21,"./VRURLParser.js":23}]},{},[27]);
